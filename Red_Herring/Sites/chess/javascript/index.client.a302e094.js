!function(e){var t={};function __webpack_require__(n){if(t[n])return t[n].exports;var r=t[n]={i:n,l:!1,exports:{}};return e[n].call(r.exports,r,r.exports,__webpack_require__),r.l=!0,r.exports}__webpack_require__.m=e,__webpack_require__.c=t,__webpack_require__.d=function(e,t,n){__webpack_require__.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},__webpack_require__.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},__webpack_require__.t=function(e,t){if(1&t&&(e=__webpack_require__(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(__webpack_require__.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)__webpack_require__.d(n,r,function(t){return e[t]}.bind(null,r));return n},__webpack_require__.n=function(e){var t=e&&e.__esModule?function getDefault(){return e.default}:function getModuleExports(){return e};return __webpack_require__.d(t,"a",t),t},__webpack_require__.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},__webpack_require__.p="",__webpack_require__(__webpack_require__.s=589)}({0:function(e,t,n){"use strict";var r=n(9);t.a=r.a},1:function(e,t,n){"use strict";n.d(t,"a",function(){return r}),n.d(t,"b",function(){return o});var r={ADD_BLINKING_SQUARE:"ADD_BLINKING_SQUARE",CLEAR_ARROW:"CLEAR_ARROW",CLEAR_BLINKING_SQUARE:"CLEAR_BLINKING_SQUARE",CLEAR_EFFECT:"CLEAR_EFFECT",CLEAR_MARKED_SQUARE:"CLEAR_MARKED_SQUARE",INIT:"INIT",LOAD:"LOAD",MAKE_MOVE:"MAKE_MOVE",ILLEGAL_MOVE:"ILLEGAL_MOVE",JUMP_TO_POSITION:"JUMP_TO_POSITION",TREE_CHANGE:"TREE_CHANGE",TREE_AMENDED:"TREE_AMENDED",SETTINGS_CHANGE:"SETTINGS_CHANGE",PGN_HEADERS_UPDATED:"PGN_HEADERS_UPDATED",CANCEL_PREMOVES:"CANCEL_PREMOVES",PREMOVE:"PREMOVE",GUESS_THE_MOVE:"GUESS_THE_MOVE",CANCEL_GUESS_THE_MOVE:"CANCEL_GUESS_THE_MOVE",UPDATE_NODE:"UPDATE_NODE"},o={MAX_HISTORY_LIMIT:200,getInitialHistory:function getInitialHistory(){return[]},add:function add(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(e.length>o.MAX_HISTORY_LIMIT-1){var r=e.findIndex(function(e){return null!==e});e[r]=null}e.push({type:t,payload:n})},getLastItem:function getLastItem(e){return e[e.length-1]}}},10:function(e,t,n){"use strict";n.d(t,"a",function(){return a}),n.d(t,"e",function(){return i}),n.d(t,"c",function(){return s}),n.d(t,"b",function(){return c}),n.d(t,"d",function(){return l});var r=n(6),o=n(0),a={ARIA_CONTROLS:"aria-controls",AVATAR:"data-avatar",CUSTOM_BTN_CLASS:"data-custom-btn-class",CUSTOM_COLLAPSE_CLASS:"data-custom-collapse-class",ICON_BUTTON:"data-icon-button",STATS:"data-stats",SURVEY_DATA:"data-survey",SURVEY_VOTED:"data-voted-survey",USERNAME:"data-username",VS_STATS:"data-vs-stats"},i=(window.context&&window.context.user,window.context&&window.context.user&&window.context.user.username,{category:function category(e){return o.a.trans(e,{},"dynamic")},loading:o.a.trans("Loading..."),showMore:o.a.trans("More"),showLess:o.a.trans("Less")}),s={AMPLITUDE_LOGGER:"amplitude-logger",BASE_CONTAINER:".base-container",BOARD_POPOVER:"v-board-popover",CAPTCHA:"captcha",COLLAPSE:"v-toggle-collapse",COLLAPSED:"toggle-collapsed",CONTENT_AD:"content-ad",CONTENT_CATEGORY_SELECT:"content-category-select",CONTENT_LANGUAGE_SELECT:"content-language-select",CONFIRM_OPEN:"confirm-open",CONFIRM_POPOVER:"v-confirm-popover",FEATURE_SIDEBAR_LINK:"post-category-link-feature",FILTERS:"page-filters",FORM_DATEPICKER:"v-datepicker",FORM_DROPDOWN:"form-dropdown",GAME_PREVIEW:"game-preview",GIFT_MEMBERSHIP_MODAL:"gift-membership-modal",HEADLINE_SIDEBAR_LINK:"post-category-link-headline",HIDDEN:"toggle-hidden",LANGUAGE_DROPDOWN:"post-view-languages",MESSAGE_PARENT:"vue-message",NAVIGATION_FOOTER:"navigation-footer",NEW_GAME:"new-game",NEW_GAME_BUTTON:"new-game-button",PAGINATION_BOTTOM:"pagination-bottom",PAGINATION_TOP:"pagination-top",POST_AUTHOR_FOLLOW:"post-author-follow",POST_CAN_EDIT_URL:"post-can-edit-url",POST_EDIT_URL:"post-edit-url",POST_EDIT_URL_FIELD:"post-edit-url-field",POST_IMAGE_BUTTON:"image-upload-button",POST_IMAGE_THUMBNAIL:"image-upload-thumbnail",SCROLL_TOP_ANCHOR:"scroll-top-anchor",SHORT_SIDEBAR_AD_BOTTOM:"short-sidebar-ad-bottom",SHORT_SIDEBAR_AD_TOP:"short-sidebar-ad-top",SIDEBAR_STATS:"sidebar-stats",SIDEBAR_SURVEY:"sidebar-survey",SIDEBAR_TOGGLE_BUTTON_TEXT:"sidebar-users-grid-toggle-button-text",SIDEBAR_TOGGLE_ICON:"sidebar-users-grid-toggle-icon",SIDEBAR_USER_ITEMS:"sidebar-users-grid-toggle-item",SIDEBAR_USERS_TOGGLE_BUTTON:"sidebar-users-grid-toggle-button",STAT_CHART:"stat-chart",TOOLTIP:"v-tooltip",TOOLTIP_CLASS:"tooltip",TOOLTIP_TOP:"top",USER_POPOVER:"v-user-popover",USER_TAGLINE:"post-view-meta-user",VERSION_DROPDOWN:"version-dropdown"},c={SHOW_MODAL:"show-confirm-popover",VOTE_COUNTED:"vote-counted",VIEW_CHANGE:"view-change",VIEW_GRID:"view-grid",VIEW_LIST:"view-list"},l={changeContentLanguage:function changeContentLanguage(){return r.a.generate("web_user_callback_set_content_language")},enPassant:function enPassant(){return r.a.generate("web_article_view",{url:"how-to-capture-en-passant"})},surveyVote:function surveyVote(e,t){return r.a.generate("web_survey_callback_vote",{id:e,optionId:t})},redirectToLoginPage:function redirectToLoginPage(e){return r.a.generate("web_security_login_and_go",{redirectUrl:e})},userProfile:function userProfile(e){return r.a.generate("web_member_view",{username:e})}};JSON.parse(localStorage.getItem("json_settings"))},103:function(e,t,n){var r=n(133),o=n(125);e.exports=function isArrayLike(e){return null!=e&&o(e.length)&&!r(e)}},11:function(e,t,n){"use strict";var r=n(5),o=n.n(r);function ownKeys(e,t){var n=Object.keys(e);return Object.getOwnPropertySymbols&&n.push.apply(n,Object.getOwnPropertySymbols(e)),t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(n,!0).forEach(function(t){o()(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}n.d(t,"b",function(){return a}),n.d(t,"a",function(){return i});var a={$1:"!",$2:"?",$3:"!!",$4:"??",$5:"!?",$6:"?!",$10:"=",$11:"=",$12:"=",$13:"∞",$14:"⩲",$15:"⩱",$16:"±",$17:"∓",$18:"+-",$19:"-+",$22:"⨀",$146:"N"},i=function invertObject(e){return Object.keys(e).reduce(function(t,n){return _objectSpread({},t,o()({},e[n],n))},{})}(a)},111:function(e,t,n){"use strict";var r=n(92),o=n.n(r);t.default=o.a},112:function(e,t,n){"use strict";var r=n(93),o=n.n(r);t.default=o.a},113:function(e,t,n){e.exports=n(19)(46)},115:function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},118:function(e,t){var n=Array.isArray;e.exports=n},12:function(e,t,n){"use strict";n.d(t,"a",function(){return l});var r=n(5),o=n.n(r),a=n(3),i=n(2),s=n(1),c=n(4);function ownKeys(e,t){var n=Object.keys(e);return Object.getOwnPropertySymbols&&n.push.apply(n,Object.getOwnPropertySymbols(e)),t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n}var l=function selectNode(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],l=i.a.findNode(e.jce._lines(),t,n,r),u=function _objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(n,!0).forEach(function(t){o()(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},e.tree.selected),d=u.line,f=u.move;if(!l)return e;var p={};return p=t.move+n<0&&t.line===l.ids.line?{line:0,move:-1}:l.ids,a.a.selectNode(e,p),s.b.add(e.history,s.a.JUMP_TO_POSITION,{from:{line:d,move:f},to:p}),c.a.updateState(e)}},125:function(e,t){var n=9007199254740991;e.exports=function isLength(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=n}},13:function(e,t,n){"use strict";n.d(t,"c",function(){return getLocale}),n.d(t,"a",function(){return a}),n.d(t,"b",function(){return formatNumber});var r=n(0);function getLocale(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"-";return(e||(Object.prototype.hasOwnProperty.call(window,"context")?window.context.i18n.locale:"en-US")).replace("_",t)}var o={year:{milliseconds:31536e6,str:"{1} 1 year|]1,Inf] %1$s% years",strAgo:"{1} 1 year ago|]1,Inf] %1$s% years ago"},month:{milliseconds:function getMsInThisMonth(){switch((new Date).getMonth()){case 3:case 5:case 8:case 10:return 2592e6;case 1:return(new Date).getFullYear()%4==0?25056e5:24192e5;default:return 26784e5}}(),str:"{1} 1 month|]1,Inf] %1$s% months",strAgo:"{1} 1 month ago|]1,Inf] %1$s% months ago"},day:{milliseconds:864e5,str:"{1} 1 day|]1,Inf] %1$s% days",strAgo:"{1} 1 day ago|]1,Inf] %1$s% days ago"},hour:{milliseconds:36e5,str:"{1} 1 hour|]1,Inf] %1$s% hours",strAgo:"{1} 1 hour ago|]1,Inf] %1$s% hours ago"},minute:{milliseconds:6e4,str:"{1} 1 minute|]1,Inf] %1$s% minutes",strAgo:"{1} 1 minute ago|]1,Inf] %1$s% minutes ago"}},a={hoursMinute:function hoursMinute(e){var t,n,o=[],a=0,i=e;return!0===(arguments.length>1&&void 0!==arguments[1]&&arguments[1])&&(i-=86400*(a=Math.floor(i/86400))),i-=3600*(t=Math.floor(i/3600)),n=Math.floor(i/60),a>0&&o.push(r.a.transChoice("{0} 0 days|{1} 1 day|]1,Inf] %1$s% days",a,{"%1$s%":a})),t>0&&o.push(r.a.transChoice("{0} 0 hours|{1} 1 hour|]1,Inf] %1$s% hours",t,{"%1$s%":t})),(n>0||0===o.length)&&o.push(r.a.transChoice("{0} 0 min|{1} 1 min|]1,Inf] %1$s% min",n,{"%1$s%":n})),o.join(" ")},long:function long(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date,t=e instanceof Date?e:new Date(e);return new Intl.DateTimeFormat(getLocale(),{year:"numeric",month:"short",day:"numeric"}).format(t)},full:function full(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date,t=e instanceof Date?e:new Date(e);return new Intl.DateTimeFormat(getLocale(),{year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"short"}).format(t)},numeric:function numeric(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date,t=e instanceof Date?e:new Date(e);if(window.Intl){var n=getLocale();return new Intl.DateTimeFormat(n,{day:"2-digit",month:"2-digit",year:"numeric"}).format(t)}var r="0".concat(t.getMonth()+1).slice(-2),o="0".concat(t.getDate()).slice(-2);return"".concat(r,"/").concat(o,"/").concat(t.getFullYear())},relative:function relative(e){var t,n,a=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],s=Date.now(),c=(e instanceof Date?e:new Date(e)).getTime(),l=s-c;if(Math.abs(l)>o.month.milliseconds&&a){return new Intl.DateTimeFormat(getLocale(),{year:"numeric",month:"short",day:"numeric"}).format(c)}if(l>=o.year.milliseconds)n=o.year,t=Math.abs(Math.floor(l/o.year.milliseconds));else if(l>=o.month.milliseconds)n=o.month,t=Math.abs(Math.floor(l/o.month.milliseconds));else if(l>=o.day.milliseconds)n=o.day,t=Math.abs(Math.floor(l/o.day.milliseconds));else if(l>=o.hour.milliseconds)n=o.hour,t=Math.abs(Math.floor(l/o.hour.milliseconds));else{if(!(l>=o.minute.milliseconds))return r.a.trans("Just now");n=o.minute,t=Math.abs(Math.floor(l/o.minute.milliseconds))}var u=Math.abs(l)===l;return r.a.transChoice(u&&i?n.strAgo:n.str,t,{"%1$s%":t})},customNumericDate:function customNumericDate(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"/",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"m/d/y",r=e instanceof Date?e:new Date(e),o={d:"0".concat(r.getDate()).slice(-2),m:"0".concat(r.getMonth()+1).slice(-2),y:"".concat(r.getFullYear())};return["m","d","y"].every(function(e){return n.split("/").includes(e)})?n.split("/").reduce(function(e,t){return e.push(o[t]),e},[]).join(t):"".concat(o.m).concat(t).concat(o.d).concat(t).concat(o.y)}};function formatNumber(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return new Intl.NumberFormat([getLocale(t),"en-US"],n).format(e)}},131:function(e,t,n){var r=n(147),o=n(172);e.exports=function baseForOwn(e,t){return e&&r(e,t,o)}},132:function(e,t){var n=Object.prototype;e.exports=function isPrototype(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||n)}},133:function(e,t,n){var r=n(95),o=n(91),a="[object AsyncFunction]",i="[object Function]",s="[object GeneratorFunction]",c="[object Proxy]";e.exports=function isFunction(e){if(!o(e))return!1;var t=r(e);return t==i||t==s||t==a||t==c}},134:function(e,t,n){var r=n(135);e.exports=function castFunction(e){return"function"==typeof e?e:r}},135:function(e,t){e.exports=function identity(e){return e}},136:function(e,t,n){var r=n(191),o=n(192),a=n(134),i=n(118);e.exports=function forEach(e,t){return(i(e)?r:o)(e,a(t))}},137:function(e,t,n){"use strict";var r=n(23),o=n(10),a=n(94);t.a=Object(r.a)("#".concat(o.c.SHORT_SIDEBAR_AD_BOTTOM),function(e){return{component:a.a,propsData:{position:e.getAttribute("data-position"),slotId:e.getAttribute("data-slot-id")}}})},138:function(e,t,n){"use strict";var r=n(23),o=n(10),a=n(94);t.a=Object(r.a)("#".concat(o.c.SHORT_SIDEBAR_AD_TOP),function(e){return{component:a.a,propsData:{position:e.getAttribute("data-position"),slotId:e.getAttribute("data-slot-id")}}})},14:function(e,t,n){"use strict";var r="icon-background",o="icon-component",a="icon-component-shadow",i="icon-shadow",s='\n  <path class="'.concat(i,'" d="M9 .5a9 9 0 1 0 9 9 9 9 0 0 0-9-9z" opacity=".3"/>\n  <path class="').concat(r,'" d="M9 0a9 9 0 1 0 9 9 9 9 0 0 0-9-9z" fill="#95bb4a"/>\n  <path d="M9 3.72a.48.48 0 0 0-.44.3L7.24 7.46l-3.68.19a.48.48 0 0 0-.27.84l2.86 2.32-1 3.56a.47.47 0 0 0 .18.5.46.46 0 0 0 .27.09.5.5 0 0 0 .26-.08l3.09-2 3.09 2a.5.5 0 0 0 .26.08.46.46 0 0 0 .27-.09.47.47 0 0 0 .18-.5l-1-3.56 2.86-2.32a.48.48 0 0 0-.27-.84l-3.68-.19L9.44 4A.48.48 0 0 0 9 3.72z" opacity=".1"/>\n  <path d="M9 3.22a.48.48 0 0 0-.44.3L7.24 7l-3.68.19a.48.48 0 0 0-.27.81l2.86 2.32-1 3.56a.47.47 0 0 0 .18.5.46.46 0 0 0 .27.09.5.5 0 0 0 .26-.08l3.09-2 3.09 2a.5.5 0 0 0 .26.08.46.46 0 0 0 .27-.09.47.47 0 0 0 .18-.5l-1-3.56L14.71 8a.48.48 0 0 0-.27-.84L10.76 7 9.44 3.52a.48.48 0 0 0-.44-.3z" fill="#fff"/>\n'),c='\n  <path class="'.concat(i,'" opacity=".3" d="M9,.5a9,9,0,1,0,9,9A9,9,0,0,0,9,.5Z"/>\n  <path class="').concat(r,'" fill="#a88865" d="M9,0a9,9,0,1,0,9,9A9,9,0,0,0,9,0Z"/>\n  <path class="').concat(a,'" opacity=".3" d="M8.4,6c-1-.75-2.52-1.09-4.83-1.09H2.49v8.71H3.57A8.13,8.13,0,0,1,8.4,14.76Z"/>\n  <path class="').concat(a,'" opacity=".3" d="M9.49,14.76a8.14,8.14,0,0,1,4.84-1.17h1.08V4.88H14.33C12,4.88,10.52,5.22,9.49,6Z"/>\n  <path class="').concat(o,'" fill="#fff" d="M8.4,5.47c-1-.75-2.52-1.09-4.83-1.09H3v8.71h.58A8.13,8.13,0,0,1,8.4,14.26Z"/>\n  <path class="').concat(o,'" fill="#fff" d="M9.49,14.26a8.14,8.14,0,0,1,4.84-1.17h.58V4.38h-.58c-2.32,0-3.81.34-4.84,1.09Z"/>\n'),l='\n  <path class="'.concat(i,'" d="M9 .5a9 9 0 1 0 9 9 9 9 0 0 0-9-9z" opacity=".3"/>\n  <path class="').concat(r,'" d="M9 0a9 9 0 1 0 9 9 9 9 0 0 0-9-9z" fill="#c93430"/>\n  <g class="').concat(a,'" opacity=".2">\n    <path d="M14.68 5.48a2.77 2.77 0 0 0-.77-.92 3.81 3.81 0 0 0-1.1-.56 3.86 3.86 0 0 0-1.2-.19 3.68 3.68 0 0 0-1.19.19 5.72 5.72 0 0 0-.9.37l-.33.2a3.5 3.5 0 0 1 .43.63A3.26 3.26 0 0 1 10 6.66a.45.45 0 0 0 .19 0l.11-.09a1.13 1.13 0 0 1 .28-.18 2.54 2.54 0 0 1 .42-.23 1.61 1.61 0 0 1 .49-.07 1.13 1.13 0 0 1 .73.24.74.74 0 0 1 .3.6 1 1 0 0 1-.25.68c-.17.19-.39.4-.65.64s-.33.27-.49.42a3.08 3.08 0 0 0-.45.55 2.55 2.55 0 0 0-.33.66 2.43 2.43 0 0 0-.13.84v.35a.34.34 0 0 0 .32.32h1.72a.27.27 0 0 0 .22-.1.29.29 0 0 0 .09-.22v-.21a.93.93 0 0 1 .27-.7 6.62 6.62 0 0 1 .65-.64A4.62 4.62 0 0 0 14 9a5.58 5.58 0 0 0 .49-.6 2.92 2.92 0 0 0 .36-.73 3.08 3.08 0 0 0 .14-1 2.76 2.76 0 0 0-.31-1.19zM12.3 12.72h-1.89a.29.29 0 0 0-.22.09.33.33 0 0 0-.09.22v1.84a.31.31 0 0 0 .09.22.26.26 0 0 0 .22.1h1.89a.33.33 0 0 0 .23-.09.34.34 0 0 0 .1-.23V13a.34.34 0 0 0-.1-.22.33.33 0 0 0-.23-.06zM6.68 12.72H4.79a.29.29 0 0 0-.22.09.33.33 0 0 0-.09.22v1.84a.35.35 0 0 0 .08.22.28.28 0 0 0 .23.1h1.89a.35.35 0 0 0 .23-.09.34.34 0 0 0 .1-.23V13a.34.34 0 0 0-.1-.22.35.35 0 0 0-.23-.06zM8.28 4.56A3.63 3.63 0 0 0 7.19 4 3.86 3.86 0 0 0 6 3.81 3.78 3.78 0 0 0 4.79 4a6.65 6.65 0 0 0-.9.37 2.84 2.84 0 0 0-.55.38l-.21.19a.31.31 0 0 0 0 .41l1 1.21a.31.31 0 0 0 .21.13.54.54 0 0 0 .25-.06l.1-.09a1.46 1.46 0 0 1 .29-.18 2.2 2.2 0 0 1 .41-.18 1.57 1.57 0 0 1 .49-.07 1.13 1.13 0 0 1 .73.24.74.74 0 0 1 .3.6 1 1 0 0 1-.26.68c-.17.19-.38.4-.64.64a6.4 6.4 0 0 0-.49.42 2.7 2.7 0 0 0-.52.53 2.94 2.94 0 0 0-.34.66 2.7 2.7 0 0 0-.12.84v.35a.29.29 0 0 0 .09.22.28.28 0 0 0 .22.1h1.76a.26.26 0 0 0 .21-.1.29.29 0 0 0 .09-.22v-.21a1 1 0 0 1 .27-.7 8.22 8.22 0 0 1 .66-.64A5.68 5.68 0 0 0 8.36 9a7 7 0 0 0 .48-.6 3 3 0 0 0 .37-.73 3.1 3.1 0 0 0 .13-1 2.67 2.67 0 0 0-1.06-2.11z"/>\n  </g>\n  <path class="').concat(o,'" fill="#fff" d="M14.68 5a2.77 2.77 0 0 0-.77-.92 3.81 3.81 0 0 0-1.1-.56 3.86 3.86 0 0 0-1.2-.19 3.68 3.68 0 0 0-1.19.17 5.72 5.72 0 0 0-.9.37l-.33.2a3.5 3.5 0 0 1 .43.63A3.26 3.26 0 0 1 10 6.16a.45.45 0 0 0 .19 0l.09-.16a1.13 1.13 0 0 1 .28-.18 2.54 2.54 0 0 1 .44-.16 1.61 1.61 0 0 1 .49-.07 1.13 1.13 0 0 1 .73.24.74.74 0 0 1 .3.6 1 1 0 0 1-.25.68c-.17.19-.39.4-.65.64s-.33.27-.49.42a3.08 3.08 0 0 0-.45.55 2.55 2.55 0 0 0-.33.66 2.43 2.43 0 0 0-.13.84v.35a.34.34 0 0 0 .32.32h1.72a.27.27 0 0 0 .22-.1.29.29 0 0 0 .09-.22v-.21a.93.93 0 0 1 .27-.7 6.62 6.62 0 0 1 .62-.66 4.62 4.62 0 0 0 .54-.46 5.58 5.58 0 0 0 .49-.6 2.92 2.92 0 0 0 .36-.73 3.08 3.08 0 0 0 .14-1A2.76 2.76 0 0 0 14.68 5zM12.3 12.22h-1.89a.29.29 0 0 0-.22.09.33.33 0 0 0-.09.22v1.84a.31.31 0 0 0 .09.22.26.26 0 0 0 .22.1h1.89a.33.33 0 0 0 .23-.09.34.34 0 0 0 .1-.23v-1.84a.34.34 0 0 0-.1-.22.33.33 0 0 0-.23-.09zM6.68 12.22H4.79a.29.29 0 0 0-.22.09.33.33 0 0 0-.09.22v1.84a.35.35 0 0 0 .08.22.28.28 0 0 0 .23.1h1.89a.35.35 0 0 0 .23-.09.34.34 0 0 0 .1-.23v-1.84a.34.34 0 0 0-.1-.22.35.35 0 0 0-.23-.09zM8.28 4.06a3.63 3.63 0 0 0-1.09-.56A3.86 3.86 0 0 0 6 3.31a3.78 3.78 0 0 0-1.2.17 6.65 6.65 0 0 0-.9.37 2.84 2.84 0 0 0-.55.38l-.21.19a.31.31 0 0 0 0 .41L4.09 6a.31.31 0 0 0 .21.13.54.54 0 0 0 .25-.06l.1-.07a1.46 1.46 0 0 1 .29-.18 2.2 2.2 0 0 1 .41-.18 1.57 1.57 0 0 1 .49-.07 1.13 1.13 0 0 1 .73.24.74.74 0 0 1 .3.6 1 1 0 0 1-.26.68c-.17.19-.38.4-.64.64a6.4 6.4 0 0 0-.49.42 2.7 2.7 0 0 0-.48.57 2.94 2.94 0 0 0-.34.66 2.7 2.7 0 0 0-.12.84v.35a.29.29 0 0 0 .09.22.28.28 0 0 0 .22.1h1.76a.26.26 0 0 0 .21-.1.29.29 0 0 0 .09-.22v-.21a1 1 0 0 1 .27-.7A8.22 8.22 0 0 1 7.84 9a5.68 5.68 0 0 0 .52-.48 7 7 0 0 0 .48-.6 3 3 0 0 0 .37-.73 3.1 3.1 0 0 0 .13-1 2.67 2.67 0 0 0-1.06-2.13z"/>\n'),u='\n  <path class="'.concat(i,'" opacity=".3" d="M9,.5a9,9,0,1,0,9,9A9,9,0,0,0,9,.5Z"/>\n  <path class="').concat(r,'" fill="#1baca6" d="M9,0a9,9,0,1,0,9,9A9,9,0,0,0,9,0Z"/>\n  <path class="').concat(a,'" opacity=".2" d="M12.57,14.85a.3.3,0,0,1-.1.24.32.32,0,0,1-.23.1h-2a.3.3,0,0,1-.24-.1.41.41,0,0,1-.08-.24V13a.32.32,0,0,1,.09-.23.29.29,0,0,1,.23-.1h2a.32.32,0,0,1,.23.1.29.29,0,0,1,.1.23Zm-.11-3.93a.33.33,0,0,1-.1.23.34.34,0,0,1-.23.08H10.35a.32.32,0,0,1-.34-.31L9.86,4.15A.42.42,0,0,1,10,3.91a.3.3,0,0,1,.24-.1H12.3a.36.36,0,0,1,.25.1.42.42,0,0,1,.09.24Z"/>\n  <path class="').concat(o,'" fill="#fff" d="M12.57,14.35a.3.3,0,0,1-.1.24.32.32,0,0,1-.23.1h-2a.3.3,0,0,1-.24-.1.41.41,0,0,1-.08-.24v-1.9a.32.32,0,0,1,.09-.23.29.29,0,0,1,.23-.1h2a.32.32,0,0,1,.23.1.29.29,0,0,1,.1.23Zm-.11-3.93a.33.33,0,0,1-.1.23.34.34,0,0,1-.23.08H10.35a.32.32,0,0,1-.34-.31L9.86,3.65A.42.42,0,0,1,10,3.41a.3.3,0,0,1,.24-.1H12.3a.36.36,0,0,1,.25.1.42.42,0,0,1,.09.24Z"/>\n  <path class="').concat(a,'" opacity=".2" d="M8.07,14.85a.3.3,0,0,1-.1.24.32.32,0,0,1-.23.1h-2a.3.3,0,0,1-.24-.1.41.41,0,0,1-.08-.24V13a.32.32,0,0,1,.09-.23.29.29,0,0,1,.23-.1h2a.32.32,0,0,1,.23.1.29.29,0,0,1,.1.23ZM8,10.92a.33.33,0,0,1-.1.23.34.34,0,0,1-.23.08H5.85a.32.32,0,0,1-.34-.31L5.36,4.15a.42.42,0,0,1,.09-.24.3.3,0,0,1,.24-.1H7.8a.36.36,0,0,1,.25.1.42.42,0,0,1,.09.24Z"/>\n  <path class="').concat(o,'" fill="#fff" d="M8.07,14.35a.3.3,0,0,1-.1.24.32.32,0,0,1-.23.1h-2a.3.3,0,0,1-.24-.1.41.41,0,0,1-.08-.24v-1.9a.32.32,0,0,1,.09-.23.29.29,0,0,1,.23-.1h2a.32.32,0,0,1,.23.1.29.29,0,0,1,.1.23ZM8,10.42a.33.33,0,0,1-.1.23.34.34,0,0,1-.23.08H5.85a.32.32,0,0,1-.34-.31L5.36,3.65a.42.42,0,0,1,.09-.24.3.3,0,0,1,.24-.1H7.8a.36.36,0,0,1,.25.1.42.42,0,0,1,.09.24Z"/>\n'),d='\n  <path class="'.concat(i,'" d="M9 .5a9 9 0 1 0 9 9 9 9 0 0 0-9-9z" opacity=".3"/>\n  <path class="').concat(r,'" d="M9 0a9 9 0 1 0 9 9 9 9 0 0 0-9-9z" fill="#95bb4a"/>\n  <path class="').concat(a,'" d="M15.11 6.81l-5.66 5.66-1.66 1.65a.38.38 0 0 1-.55 0L2.89 9.78a.39.39 0 0 1 0-.55l1.39-1.39a.39.39 0 0 1 .55 0l2.69 2.69 5.65-5.65a.38.38 0 0 1 .55 0l1.39 1.38a.39.39 0 0 1 0 .55z" opacity=".2"/>\n  <path class="').concat(o,'" d="M15.11 6.31L9.45 12l-1.66 1.62a.38.38 0 0 1-.55 0L2.89 9.28a.39.39 0 0 1 0-.55l1.39-1.39a.39.39 0 0 1 .55 0L7.52 10l5.65-5.65a.38.38 0 0 1 .55 0l1.39 1.38a.39.39 0 0 1 0 .58z" fill="#fff"/>\n'),f='\n  <path class="'.concat(i,'" opacity=".3" d="M9,.5a9,9,0,1,0,9,9A9,9,0,0,0,9,.5Z"/>\n  <path class="').concat(r,'" fill="#5a9ac0" d="M9,0a9,9,0,1,0,9,9A9,9,0,0,0,9,0Z"/>\n  <path class="').concat(a,'" opacity=".2" d="M15,6.8,7.81,14a.38.38,0,0,1-.55,0L3,9.73a.41.41,0,0,1,0-.55L4.36,7.81a.4.4,0,0,1,.54,0l2.63,2.64L13.1,4.9a.38.38,0,0,1,.55,0L15,6.25A.38.38,0,0,1,15,6.8Z"/>\n  <path class="').concat(o,'" fill="#ffffff" d="M15,6.3,7.81,13.49a.38.38,0,0,1-.55,0L3,9.23a.41.41,0,0,1,0-.55L4.36,7.31a.4.4,0,0,1,.54,0L7.53,10,13.1,4.4a.38.38,0,0,1,.55,0L15,5.75A.38.38,0,0,1,15,6.3Z"/>\n'),p='\n  <path class="'.concat(i,'" opacity=".3" d="M9,.5a9,9,0,1,0,9,9A9,9,0,0,0,9,.5Z"/>\n  <path class="').concat(r,'" fill="#a09f9e" d="M9,0a9,9,0,1,0,9,9A9,9,0,0,0,9,0Z"/>\n  <path class="').concat(o,'" fill="#fff" d="M9,2.5A6.5,6.5,0,1,0,15.5,9,6.5,6.5,0,0,0,9,2.5Z"/>\n  <path class="').concat(r,'" fill="#a09f9e" d="M9,5a4,4,0,1,0,4,4A4,4,0,0,0,9,5Z"/>\n  <path class="').concat(o,'" fill="#fff" d="M9,7.5A1.5,1.5,0,1,0,10.5,9,1.5,1.5,0,0,0,9,7.5Z"/>\n'),m='\n  <path class="'.concat(i,'" d="M9 .5a9 9 0 1 0 9 9 9 9 0 0 0-9-9z" opacity=".3"/>\n  <path class="').concat(r,'" d="M9 0a9 9 0 1 0 9 9 9 9 0 0 0-9-9z" fill="#f0c15c"/>\n  <path class="').concat(a,'" opacity=".3" d="M13.51 14.85a.3.3 0 0 1-.1.24.33.33 0 0 1-.24.1h-2a.29.29 0 0 1-.23-.1.36.36 0 0 1-.09-.24V13a.33.33 0 0 1 .1-.23.27.27 0 0 1 .22-.1h2a.33.33 0 0 1 .24.1.29.29 0 0 1 .1.23zm-.12-3.93a.29.29 0 0 1-.1.23.31.31 0 0 1-.23.08h-1.77a.31.31 0 0 1-.34-.31l-.15-6.77a.49.49 0 0 1 .08-.24.32.32 0 0 1 .25-.1h2.11a.38.38 0 0 1 .25.1.42.42 0 0 1 .09.24z"/>\n  <path class="').concat(o,'" fill="#fff" d="M13.51 14.35a.3.3 0 0 1-.1.24.33.33 0 0 1-.24.1h-2a.29.29 0 0 1-.23-.1.36.36 0 0 1-.09-.24v-1.9a.33.33 0 0 1 .1-.23.27.27 0 0 1 .22-.1h2a.33.33 0 0 1 .24.1.29.29 0 0 1 .1.23zm-.12-3.93a.29.29 0 0 1-.1.23.31.31 0 0 1-.23.08h-1.77a.31.31 0 0 1-.34-.31l-.15-6.77a.49.49 0 0 1 .08-.24.32.32 0 0 1 .25-.1h2.11a.38.38 0 0 1 .25.1.42.42 0 0 1 .09.24z"/>\n  <path class="').concat(a,'" opacity=".3" d="M7.5 14.87a.33.33 0 0 1-.09.23.35.35 0 0 1-.23.09H5.29a.28.28 0 0 1-.23-.1.35.35 0 0 1-.06-.22V13a.33.33 0 0 1 .09-.22.29.29 0 0 1 .22-.09h1.87a.35.35 0 0 1 .23.09.33.33 0 0 1 .09.22zm2.21-7.16a3 3 0 0 1-.37.73 7 7 0 0 1-.48.6 5.68 5.68 0 0 1-.52.48 8.22 8.22 0 0 0-.66.64 1 1 0 0 0-.27.7v.21a.29.29 0 0 1-.09.22.26.26 0 0 1-.21.1H5.38a.28.28 0 0 1-.22-.1.29.29 0 0 1-.09-.22v-.35a2.7 2.7 0 0 1 .12-.84 3.39 3.39 0 0 1 .33-.66A3.12 3.12 0 0 1 6 8.67a6.4 6.4 0 0 1 .49-.42c.25-.24.47-.45.64-.64a1 1 0 0 0 .26-.68.74.74 0 0 0-.3-.6 1.14 1.14 0 0 0-.73-.24 1.53 1.53 0 0 0-.49.07 2.2 2.2 0 0 0-.41.18 1.46 1.46 0 0 0-.29.18l-.1.09a.54.54 0 0 1-.25.06.31.31 0 0 1-.21-.13l-1-1.21a.31.31 0 0 1 0-.41l.21-.19a2.84 2.84 0 0 1 .55-.38A6.65 6.65 0 0 1 5.29 4a3.74 3.74 0 0 1 1.2-.17 3.86 3.86 0 0 1 1.2.17 3.75 3.75 0 0 1 1.09.56 2.67 2.67 0 0 1 1.06 2.19 3.1 3.1 0 0 1-.13.96z"/>\n  <path class="').concat(o,'" fill="#fff" d="M7.5 14.37a.33.33 0 0 1-.09.23.35.35 0 0 1-.23.09H5.29a.28.28 0 0 1-.23-.1.35.35 0 0 1-.06-.22v-1.84a.33.33 0 0 1 .09-.22.29.29 0 0 1 .22-.09h1.87a.35.35 0 0 1 .23.09.33.33 0 0 1 .09.22zm2.21-7.16a3 3 0 0 1-.37.73 7 7 0 0 1-.48.6 5.68 5.68 0 0 1-.52.46 8.22 8.22 0 0 0-.66.64 1 1 0 0 0-.27.7v.21a.29.29 0 0 1-.09.22.26.26 0 0 1-.21.1H5.38a.28.28 0 0 1-.22-.1.29.29 0 0 1-.09-.22v-.35a2.7 2.7 0 0 1 .12-.84 3.39 3.39 0 0 1 .33-.66A3.12 3.12 0 0 1 6 8.17a6.4 6.4 0 0 1 .49-.42c.25-.24.47-.45.64-.64a1 1 0 0 0 .26-.68.74.74 0 0 0-.3-.6 1.14 1.14 0 0 0-.73-.24 1.53 1.53 0 0 0-.49.07 2.2 2.2 0 0 0-.41.18 1.46 1.46 0 0 0-.31.16l-.1.09a.54.54 0 0 1-.25.06.31.31 0 0 1-.21-.15l-1-1.21a.31.31 0 0 1 0-.41l.21-.19a2.84 2.84 0 0 1 .55-.38 6.65 6.65 0 0 1 .9-.37 3.74 3.74 0 0 1 1.2-.17 3.86 3.86 0 0 1 1.2.19 3.75 3.75 0 0 1 1.09.56 2.67 2.67 0 0 1 1.1 2.23 3.1 3.1 0 0 1-.13.96z"/>\n'),h='\n  <path class="'.concat(i,'" d="M9 .5a9 9 0 1 0 9 9 9 9 0 0 0-9-9z" opacity=".3"/>\n  <path class="').concat(r,'" d="M9 0a9 9 0 1 0 9 9 9 9 0 0 0-9-9z" fill="#c93430"/>\n  <path class="').concat(a,'" d="M14 12.58a.4.4 0 0 1 0 .56l-1.38 1.38a.4.4 0 0 1-.56 0L9 11.44l-3.08 3.08a.4.4 0 0 1-.56 0L4 13.14a.4.4 0 0 1 0-.56L7.06 9.5 4 6.42a.4.4 0 0 1 0-.56l1.36-1.38a.4.4 0 0 1 .56 0L9 7.56l3.08-3.08a.4.4 0 0 1 .56 0L14 5.86a.4.4 0 0 1 0 .56L10.94 9.5z" opacity=".2"/>\n  <path class="').concat(o,'" d="M14 12.08a.4.4 0 0 1 0 .56L12.64 14a.4.4 0 0 1-.56 0L9 10.94 5.92 14a.4.4 0 0 1-.56 0L4 12.64a.4.4 0 0 1 0-.56L7.06 9 4 5.92a.4.4 0 0 1 0-.56L5.36 4a.4.4 0 0 1 .56 0L9 7.06 12.08 4a.4.4 0 0 1 .56 0L14 5.36a.4.4 0 0 1 0 .56L10.94 9z" fill="#f1f2f2"/>\n'),v='\n  <path class="'.concat(i,'" d="M9 .5a9 9 0 1 0 9 9 9 9 0 0 0-9-9z" opacity=".3"/>\n  <path class="').concat(r,'" d="M9 0a9 9 0 1 0 9 9 9 9 0 0 0-9-9z" fill="#dd5357"/>\n  <path class="').concat(a,'" d="M14 12.58a.4.4 0 0 1 0 .56l-1.38 1.38a.4.4 0 0 1-.56 0L9 11.44l-3.08 3.08a.4.4 0 0 1-.56 0L4 13.14a.4.4 0 0 1 0-.56L7.06 9.5 4 6.42a.4.4 0 0 1 0-.56l1.36-1.38a.4.4 0 0 1 .56 0L9 7.56l3.08-3.08a.4.4 0 0 1 .56 0L14 5.86a.4.4 0 0 1 0 .56L10.94 9.5z" opacity=".2"/>\n  <path class="').concat(o,'" d="M14 12.08a.4.4 0 0 1 0 .56L12.64 14a.4.4 0 0 1-.56 0L9 10.94 5.92 14a.4.4 0 0 1-.56 0L4 12.64a.4.4 0 0 1 0-.56L7.06 9 4 5.92a.4.4 0 0 1 0-.56L5.36 4a.4.4 0 0 1 .56 0L9 7.06 12.08 4a.4.4 0 0 1 .56 0L14 5.36a.4.4 0 0 1 0 .56L10.94 9z" fill="#f1f2f2"/>\n'),g='\n  <path class="'.concat(i,'" d="M9 .5a9 9 0 1 0 9 9 9 9 0 0 0-9-9z" opacity=".3"/>\n  <path class="').concat(r,'" d="M9 0a9 9 0 1 0 9 9 9 9 0 0 0-9-9z" fill="#e6912c"/>\n  <path class="').concat(a,'" d="M9.82 14.87a.34.34 0 0 1-.1.23.33.33 0 0 1-.23.09H7.6a.26.26 0 0 1-.22-.1.31.31 0 0 1-.09-.22V13a.33.33 0 0 1 .09-.22.29.29 0 0 1 .22-.09h1.89a.33.33 0 0 1 .23.09.34.34 0 0 1 .1.22zM12 7.71a3.31 3.31 0 0 1-.36.73 7.11 7.11 0 0 1-.49.6 4.62 4.62 0 0 1-.52.48 6.62 6.62 0 0 0-.65.64.93.93 0 0 0-.27.7v.21a.29.29 0 0 1-.09.22.28.28 0 0 1-.22.1H7.69a.3.3 0 0 1-.22-.1.29.29 0 0 1-.09-.22v-.35a2.43 2.43 0 0 1 .13-.84 2.55 2.55 0 0 1 .33-.66 3.08 3.08 0 0 1 .45-.55c.16-.15.33-.29.49-.42s.47-.45.64-.64a1 1 0 0 0 .26-.68.74.74 0 0 0-.3-.6 1.13 1.13 0 0 0-.73-.24 1.57 1.57 0 0 0-.49.07 2.54 2.54 0 0 0-.41.18 1.46 1.46 0 0 0-.29.18l-.1.09a.53.53 0 0 1-.24.06c-.12 0-.19-.07-.21-.13l-1-1.21a.3.3 0 0 1 0-.41l.21-.19a2.67 2.67 0 0 1 .56-.38A5.72 5.72 0 0 1 7.61 4a3.68 3.68 0 0 1 1.19-.19A3.86 3.86 0 0 1 10 4a3.63 3.63 0 0 1 1.09.56 2.79 2.79 0 0 1 .78.92 2.76 2.76 0 0 1 .29 1.27 3.08 3.08 0 0 1-.16.96z" opacity=".2"/>\n  <path class="').concat(o,'" d="M9.82 14.37a.34.34 0 0 1-.1.23.33.33 0 0 1-.23.09H7.6a.26.26 0 0 1-.22-.1.31.31 0 0 1-.09-.22v-1.84a.33.33 0 0 1 .09-.22.29.29 0 0 1 .22-.09h1.89a.33.33 0 0 1 .23.09.34.34 0 0 1 .1.22zM12 7.21a3.31 3.31 0 0 1-.36.73 7.11 7.11 0 0 1-.49.6 4.62 4.62 0 0 1-.52.48 6.62 6.62 0 0 0-.65.64.93.93 0 0 0-.27.7v.21a.29.29 0 0 1-.09.22.28.28 0 0 1-.22.1H7.69a.3.3 0 0 1-.22-.1.29.29 0 0 1-.09-.22v-.35a2.43 2.43 0 0 1 .13-.84 2.55 2.55 0 0 1 .33-.66 3.08 3.08 0 0 1 .45-.55c.16-.15.33-.29.49-.42s.47-.45.64-.64a1 1 0 0 0 .26-.68.74.74 0 0 0-.3-.6 1.13 1.13 0 0 0-.73-.24 1.57 1.57 0 0 0-.49.07 2.54 2.54 0 0 0-.41.18 1.46 1.46 0 0 0-.29.16l-.1.09a.53.53 0 0 1-.24.06C7 6.14 6.93 6.1 6.91 6l-1-1.21a.3.3 0 0 1 0-.41l.21-.19a2.67 2.67 0 0 1 .56-.38 5.72 5.72 0 0 1 .9-.37 3.68 3.68 0 0 1 1.22-.13 3.86 3.86 0 0 1 1.2.19 3.63 3.63 0 0 1 1.09.56 2.79 2.79 0 0 1 .78.92 2.76 2.76 0 0 1 .29 1.27 3.08 3.08 0 0 1-.16.96z" fill="#fff"/>\n'),b='\n  <path\n    class="'.concat(i,'"\n    d="M9,.5a9,9,0,1,0,9,9A9,9,0,0,0,9,.5Z"\n    opacity=".3"></path>\n\n  <path\n    class="').concat(r,'"\n    d="M9,0a9,9,0,1,0,9,9A9,9,0,0,0,9,0Z"\n    fill="#8a8886"></path>\n\n  <path\n    d="M3.59,10.23a.25.25,0,0,1,.24-.31l1.08-.15a.49.49,0,0,1,.2.06.25.25,0,0,1,.11.2,3.58,3.58,0,0,0,.42,1.28,3.68,3.68,0,0,0,.84,1.06,3.76,3.76,0,0,0,1.16.69A3.9,3.9,0,0,0,9,13.31,3.58,3.58,0,0,0,10.47,13a3.94,3.94,0,0,0,1.22-.81A4.09,4.09,0,0,0,12.5,11a3.74,3.74,0,0,0,0-3,4.09,4.09,0,0,0-.81-1.2A3.94,3.94,0,0,0,10.47,6,3.65,3.65,0,0,0,9,5.69a3.61,3.61,0,0,0-1.23.21,3.23,3.23,0,0,0-1.09.6L7.77,7.59c.16.15.21.29.16.38s-.18.17-.4.17H4.37a.36.36,0,0,1-.2,0A.76.76,0,0,1,4,8a.52.52,0,0,1-.17-.38V4.45c0-.2.06-.33.17-.38s.25,0,.41.16L5.51,5.34a5.83,5.83,0,0,1,1.64-1A5.19,5.19,0,0,1,9,4.05a5.3,5.3,0,0,1,2.12.44,5,5,0,0,1,1.73,1.16A5.59,5.59,0,0,1,14,7.38a5.23,5.23,0,0,1,.44,2.12A5.16,5.16,0,0,1,14,11.62a5.59,5.59,0,0,1-1.16,1.73,5.32,5.32,0,0,1-1.73,1.18A5.64,5.64,0,0,1,9,15a5.23,5.23,0,0,1-1.94-.37A5.27,5.27,0,0,1,4.21,12.1,5.1,5.1,0,0,1,3.59,10.23Z"\n    class="').concat(a,'"\n    opacity=".3"></path>\n\n  <path\n    d="M3.59,9.73a.25.25,0,0,1,.24-.31l1.08-.15a.49.49,0,0,1,.2.06.25.25,0,0,1,.11.2,3.58,3.58,0,0,0,.42,1.28,3.68,3.68,0,0,0,.84,1.06,3.76,3.76,0,0,0,1.16.69A3.9,3.9,0,0,0,9,12.81a3.58,3.58,0,0,0,1.47-.31,3.94,3.94,0,0,0,1.22-.81,4.09,4.09,0,0,0,.81-1.2,3.74,3.74,0,0,0,0-3,4.09,4.09,0,0,0-.81-1.2,3.94,3.94,0,0,0-1.22-.81A3.65,3.65,0,0,0,9,5.19a3.61,3.61,0,0,0-1.23.21A3.23,3.23,0,0,0,6.68,6L7.77,7.09c.16.15.21.29.16.38s-.18.17-.4.17H4.37a.36.36,0,0,1-.2,0A.76.76,0,0,1,4,7.49a.52.52,0,0,1-.17-.38V4c0-.2.06-.33.17-.38s.25,0,.41.16L5.51,4.84a5.83,5.83,0,0,1,1.64-1A5.19,5.19,0,0,1,9,3.55,5.3,5.3,0,0,1,11.12,4a5,5,0,0,1,1.73,1.16A5.59,5.59,0,0,1,14,6.88,5.23,5.23,0,0,1,14.45,9,5.16,5.16,0,0,1,14,11.12a5.59,5.59,0,0,1-1.16,1.73A5.32,5.32,0,0,1,11.12,14,5.64,5.64,0,0,1,9,14.45a5.23,5.23,0,0,1-1.94-.37A5.27,5.27,0,0,1,4.21,11.6,5.1,5.1,0,0,1,3.59,9.73Z"\n    class="').concat(o,'"\n    fill="#ffffff"></path>\n'),_=n(11),E=n(9);n.d(t,"b",function(){return O}),n.d(t,"g",function(){return A}),n.d(t,"d",function(){return S}),n.d(t,"c",function(){return N}),n.d(t,"h",function(){return T}),n.d(t,"e",function(){return C}),n.d(t,"f",function(){return I}),n.d(t,"a",function(){return w});var y="//images.chesscomfiles.com",O={ALMOST_CORRECT:{color:"#8a8886",icon:b},BEST_MOVE:{color:"#9EBA5A",icon:s,key:"bestMove",label:Object(E.b)("Best Move"),phrase:Object(E.b)("is best")},BLUNDER:{annotation:_.b.$4,color:"#b33430",icon:l,key:"blunder",label:Object(E.b)("Blunder"),phrase:Object(E.b)("is a blunder")},BOOK:{icon:c,key:"book",label:Object(E.b)("Book"),phrase:Object(E.b)("is a book move")},BRILLIANT:{color:"#1baca6",icon:u,key:"brilliant",label:Object(E.b)("Brilliant"),phrase:Object(E.b)("is brilliant")},CORRECT:{color:"#acce59",key:"correct",icon:d,label:Object(E.b)("Correct")},CRITICAL:{key:"critical",label:Object(E.b)("Critical")},EXCELLENT:{color:"#5a9ac0",icon:f,key:"excellent",label:Object(E.b)("Excellent"),phrase:Object(E.b)("is excellent")},FORCED:{key:"forced",label:Object(E.b)("Forced"),phrase:Object(E.b)("is forced")},GOOD:{icon:p,key:"good",label:Object(E.b)("Good"),phrase:Object(E.b)("is good")},INACCURACY:{annotation:_.b.$6,color:"#f0c15c",icon:m,key:"inaccuracy",label:Object(E.b)("Inaccuracy"),phrase:Object(E.b)("is an inaccuracy")},INCORRECT:{color:"#c93430",icon:h,key:"incorrect",label:Object(E.b)("Incorrect")},MISSED_WIN:{color:"#dd5357",icon:v,key:"missedWin",label:Object(E.b)("Missed Win"),phrase:Object(E.b)("is a missed win")},MISTAKE:{annotation:_.b.$2,color:"#e6912c",icon:g,key:"mistake",label:Object(E.b)("Mistake"),phrase:Object(E.b)("is a mistake")},STAR:{color:"#e6912c",icon:s,key:"star"}},A={COORDINATE_FILE:".coordinates .letter"},S={INSIDE:"inside",NONE:null,OUTSIDE:"outside"},N=("".concat(y,"/chess-themes/boards"),"".concat(y,"/chess-themes/pieces"),"".concat(y,"/chess-themes/sounds"),[{key:0,label:Object(E.b)("None"),value:S.NONE},{key:1,label:Object(E.b)("Inside"),value:S.INSIDE},{key:2,label:Object(E.b)("Outside"),value:S.OUTSIDE}]),T={pieces:["real3d"],animations:["arcade","natural"]},C=[{key:"0",value:null},{key:"1",value:"inside"},{key:"2",value:"outside"}],I={board:".board-board",resize:".board-controls",sidebar:".board-sidebar"},w={minSidebarWidth:300,boardPaddingLeft:30}},147:function(e,t,n){var r=n(171)();e.exports=r},148:function(e,t,n){var r=n(173),o=n(149),a=n(118),i=n(150),s=n(151),c=n(152),l=Object.prototype.hasOwnProperty;e.exports=function arrayLikeKeys(e,t){var n=a(e),u=!n&&o(e),d=!n&&!u&&i(e),f=!n&&!u&&!d&&c(e),p=n||u||d||f,m=p?r(e.length,String):[],h=m.length;for(var v in e)!t&&!l.call(e,v)||p&&("length"==v||d&&("offset"==v||"parent"==v)||f&&("buffer"==v||"byteLength"==v||"byteOffset"==v)||s(v,h))||m.push(v);return m}},149:function(e,t,n){var r=n(174),o=n(88),a=Object.prototype,i=a.hasOwnProperty,s=a.propertyIsEnumerable,c=r(function(){return arguments}())?r:function(e){return o(e)&&i.call(e,"callee")&&!s.call(e,"callee")};e.exports=c},15:function(e,t,n){"use strict";var r,o,a,i=n(35),s=n.n(i),c=(r=function(){var e=[[2637767806,863464769],[720845184,95069639],[1155203408,610415943],[2618685246,1655139042],[1971536997,1218186377],[848342074,540017087],[263957791,1627660921],[3896152207,4076560586],[226391645,1484086288],[436746274,3467632685],[2516964848,3797861296],[3491888988,3510251221],[1086189917,1248276018],[18044180,1876255637],[1572111136,1190386149],[597658413,2146900428],[97624494,2243205793],[1738507407,1854916977],[1950989311,2149575947],[2098318769,3283594736],[2194108574,2015279052],[4079062812,2500884588],[856979699,2941369318],[1270058469,3877737539],[2858720366,3170717948],[2378012835,1387254795],[2278688587,2178388503],[435406673,3555273441],[3031118064,1655806655],[2063925420,1107589828],[3376753832,436852829],[615148625,1302492416],[1285502018,1963045959],[346460119,1016137793],[2803604355,1176288659],[55085973,2968618255],[1669016372,4287873088],[164740250,1037634196],[896886403,883023163],[1935551383,2764331555],[410153072,4055711755],[533441746,1505690343],[3541084098,3466290517],[3214426080,4267541060],[2675233103,1951705124],[1374411850,3115986997],[1552073989,3684348154],[4244110986,875606593],[844343081,3115990494],[2356462440,135999605],[3116133511,377238503],[2129956651,2197966368],[299173332,3276914047],[1701379241,745972291],[1306570996,254977976],[2530644806,214138461],[1122123979,1667800879],[1831591130,3801192033],[1116211970,920967505],[1594837592,2551651254],[972591349,2046373768],[2479207924,1935030411],[1675376029,2367888248],[3960916618,3935874422],[1398143232,3265801671],[133930885,1520005442],[1351827834,2829577566],[2076951437,2723839804],[435980918,2364847828],[1668970368,3738157273],[2185864314,3993911799],[2041407829,31969768],[346864372,2004703094],[4047877822,3437142421],[3669961416,538399484],[616810829,4190688246],[3144558884,4030272234],[216165387,2513010905],[2761740594,3216997572],[3919406634,4096014649],[669429112,2434161727],[2234904640,3111407601],[1421079802,1598085235],[1924213810,310373675],[4002762044,2067865415],[2592451728,2586110625],[1890340057,4031717877],[4189625662,2577429954],[2276713138,3049850801],[2741429688,3310307512],[2924122950,3426712818],[421576781,1193704381],[2277442246,3030264553],[153237420,595540057],[4278711886,4176286928],[2380848297,4030514510],[2618700582,1303682185],[3018992701,185284845],[957243316,1291916363],[1543415220,1898408169],[504378001,531073412],[2591337657,1692896435],[1333852064,903543556],[1661259930,188168388],[561112646,2197961224],[1536910315,2632972300],[1349168372,2307429186],[411152329,2745631190],[1694697476,1081411140],[3755185459,2631660711],[4019355068,4027326706],[2066937809,3761668332],[3120395808,3878773315],[94890149,2109283191],[3045629038,358812277],[1249184265,3465901047],[3477490924,2308583306],[4114113436,3875911716],[1014604031,1434513279],[3991324799,2222416029],[2040431088,1539915569],[2253613964,4081224332],[2547464012,1611168627],[2722521980,4281500978],[71289574,213969824],[2450408597,903689630],[1894451515,364024012],[1939968537,374938813],[1447259295,3785468557],[4021046128,1664847745],[3139524504,3562928047],[1173487682,4065269608],[2467266804,3907744866],[4284945151,3486998177],[2925674454,1953016432],[3710671816,1271453948],[2129465869,1422863833],[587093076,18243356],[3373793513,2411305257],[2156648078,1791034213],[3737413652,1534461430],[468575139,2935304962],[1129551363,3603256834],[2861996892,1763494778],[2826449619,2465197654],[1704209531,1014895022],[3738359347,3402630390],[569410928,4095796581],[3021312909,2108247612],[2444777957,2664129360],[282063667,3773661258],[682545472,3188439005],[3318488457,1917822038],[1447622272,4045023041],[757420137,4038580915],[2613420942,4146703316],[4012836163,150381244],[2938127093,3428591704],[1208226490,3086335530],[2935205706,1446903363],[430957978,3830532479],[1381578755,3757172800],[4109399782,1596778224],[288855589,1954372339],[3169178148,2256716053],[2644780093,3895892303],[107966643,1071681559],[1304747544,2607225372],[1359190711,1898207171],[3229237120,3273634996],[3027167685,3863637628],[3011615298,2883984519],[564135827,978463264],[770797430,362326607],[1983662611,1907583229],[4153656423,48268960],[3609759233,720080177],[3727911466,1270989899],[200708787,2366086947],[744508026,393422515],[1213261630,65757284],[3485747185,3845951003],[2958861301,1680248217],[2598470344,3163845864],[2767997908,4233451722],[3881113485,1492930166],[1773764017,2764062206],[4189435844,2898689174],[4234838742,1267095035],[2624081078,3302114327],[2395569449,390426320],[1728307101,690284926],[3309827454,1118258254],[2028172868,3888829086],[4271523049,909051386],[146617804,942892565],[2467685867,974297806],[2483428231,503635829],[3743260573,2018222096],[1002067894,2289153437],[3535252974,3738302271],[4154611160,1002664952],[3623154244,2349656961],[3646679180,3524329383],[862933752,4282853607],[2806008282,3272780913],[2734037942,3828874677],[1328176304,2137666995],[2278785213,2780788825],[381286368,1816476193],[2074232908,2316293454],[4087773386,3651330956],[967884669,3728964514],[4239349185,3213509668],[419231360,1463788948],[1275421624,2672384707],[1088456595,436245261],[2365565249,783696577],[1758083333,845223583],[2048846183,3530914274],[2635948261,124738415],[940630937,3069598626],[839474029,1253439921],[902477345,165479306],[2836079689,2681188273],[2007115168,2093139645],[1363041891,1282466609],[1130479818,1063857938],[3644959908,1260430427],[1385135238,46497915],[1386975934,3110156681],[2635987502,4233461619],[1915744629,4117939016],[487743653,285736599],[2049219159,3960249250],[69242857,3908563670],[1511066720,1488527520],[215590039,1703564952],[1459430344,4184955468],[676103291,2642967214],[83799035,3182827979],[1949179493,476101251],[2593534694,1493478716],[2283504289,995211746],[1349412676,3449243940],[2954378677,1878813305],[249149717,3329151870],[1578231917,1483986052],[4135085182,890874990],[461755528,3505523909],[3669622373,634949665],[219487622,2914465301],[2825233742,3703631897],[2479105382,2935590907],[2582097898,3187672881],[1221328648,1843341402],[2140891889,3958868911],[1482849818,345750049],[751922730,3178831411],[3546542069,4036458902],[216179596,877293293],[444615341,3117393729],[2424254530,494454238],[1344234989,3003337991],[929188581,2760877801],[2507911009,1879899982],[980166547,1311840394],[3566535507,1790747461],[143525013,2311336672],[4181962471,4273938872],[1815842366,862009811],[911175674,1179575598],[3591335374,3694215714],[1452686093,3393294272],[385158879,2447709103],[4011414929,1264623507],[1448477120,911094312],[3971299641,2289992053],[3133647265,2234591563],[3007628400,964409938],[1708345684,3673411261],[3031964479,2843021794],[3022128657,2480338599],[118850112,473449293],[2048127371,3202109429],[3158349745,382018770],[1505327237,3807570472],[2568424029,3272693060],[1866609495,3888556537],[844703982,1852802964],[3504617058,682636099],[1448882679,3733580327],[821387540,2215744532],[3631471417,311618895],[2077838877,2383929020],[3352949096,1688694420],[2491080787,3998672444],[3368630402,4182204255],[983299419,2837414346],[3651215291,1033373924],[265429091,3988955082],[3019003608,2896212153],[2955948456,3025235588],[903690197,2266253487],[3925215275,89402958],[3959093811,3609545561],[2455088053,223552128],[3115011301,2133669107],[1765081558,673805649],[3324795129,2111392191],[3443871631,432345706],[3152559950,3425427147],[3699649406,672784944],[3129545774,7668664],[2747044893,173040075],[3925243406,852328481],[164095314,3161868591],[2234471571,1302682825],[2164784335,105893718],[159995093,536831360],[599199451,425051327],[3274759746,1680930461],[1192619331,3903085578],[2832721114,3078660237],[91404660,4030521531],[3044880024,1578375623],[3906596030,754177855],[803516785,1894094672],[288455592,2030430096],[2143232492,2317305324],[388352703,3406060288],[2521731420,3588403719],[1043041227,4028028525],[3195290851,2468913324],[4166724431,3168683191],[1228226538,968516529],[500177583,3444787306],[533367442,4252082053],[4236023256,657816314],[413575568,3367198397],[3435884549,3334062733],[1004255532,1135705894],[2859513268,4170618274],[3914086821,1251487871],[3080761716,3489067886],[3571165255,699353261],[773372954,3648014952],[769693293,2939128604],[3116440923,507748478],[1687629160,3739431776],[2489486648,3502376324],[3686847158,2878383449],[3530767427,902211375],[2121652637,2493976397],[1827477891,930064171],[2549918411,4029725732],[2071415163,844118802],[2236083679,3088894868],[2040110303,4144562891],[3489536313,1133419300],[2190878435,2301466071],[2465915458,2448602097],[1675766804,2073834499],[3329799896,1613253148],[1483966600,1348836071],[159505618,2527621997],[2674227354,1695130688],[2683539437,1927873839],[3833196123,2570082188],[3891433165,759819981],[1455453349,2179602430],[1430583255,1957776111],[2067726741,4235143439],[303380021,2998980439],[2136024795,3126725799],[2054591852,1051702291],[1029141665,489794361],[2317027384,569642164],[2068461795,624418658],[2499875684,1830645251],[1302894490,4319401],[1002663431,2406815191],[1560941298,2060652753],[2141002286,515773223],[3661248027,475092913],[3705503008,2419919909],[914567990,3496539911],[3462935583,2039034761],[2878378006,2379243316],[1133857586,1390159333],[3023618742,2140726761],[282908558,944874642],[3686955701,1148723903],[2604456805,4163675010],[3061545110,377179268],[3218002352,76459088],[2836503392,916455101],[536836808,151306053],[2886925079,404221671],[2936593041,2011015485],[453815187,1852163908],[3042568989,82176306],[3279635891,4174836410],[3282689058,2360003049],[4088968807,1516570623],[2680453086,1322680794],[1731693966,3438253771],[1842894553,1294307894],[2736377365,2964642609],[121205621,521330014],[2324595870,3005710757],[3784465521,676493813],[1958759409,2030833406],[1306150933,1016370058],[2636541290,482366508],[1950415745,1695073534],[322077955,3746046623],[3602873262,3829181504],[1211684447,1861645455],[504701736,4080111082],[2407799203,1223857855],[1925743434,1498920209],[3617596327,845198428],[2498480299,3484773806],[2680229135,2560201696],[3731399221,1536412390],[2756509305,2924710846],[2635957500,3459716133],[1372762539,769635894],[802677945,3878474636],[1707760534,3075809808],[3714687192,2872792173],[1615679922,1606381794],[1940556374,1337437342],[445390489,731124040],[2864974375,64601760],[1984806574,2141516710],[513390958,1890172555],[744398315,1475299139],[982749166,852662657],[652663695,4260736510],[1184061125,82616221],[3363191899,147951756],[1064069880,1507328085],[2138882964,547595589],[2616926846,3186935246],[2298715513,3606862940],[2414381911,811477686],[2694745228,900437726],[4202576185,2201114451],[3602305260,3323446937],[3756663274,2658490339],[3061587876,2171079416],[3390977925,2850497765],[486312941,224925241],[3515712841,3510684394],[1322319486,2647200565],[3839619171,1148450258],[392296762,1154854654],[1401523788,957405781],[1934485528,527352730],[645968162,3131215255],[696971825,3361451947],[2038689491,1946699733],[1723966113,2785859721],[2652365974,1118037185],[3988018407,3134982149],[1354171594,3053634345],[1287854075,2631782435],[1723106141,2662328866],[563845090,1878819261],[639520332,171129501],[534957223,1696062352],[3612364282,2283204027],[3109494688,1304463816],[500957989,630925278],[3477030536,2149497258],[4109750364,281719363],[951472732,564407054],[922095147,2767874048],[3946156928,829677774],[2622281253,2086286851],[2936811901,850242186],[630086272,3340782667],[2340986210,1296336989],[4107355543,3865114709],[3560210278,3968418243],[3868847493,2967450637],[611513888,2083325060],[3265390517,3025776309],[2874106961,3424470508],[1668707698,2923258228],[2778598353,24320552],[292356118,3415510793],[754567370,86994591],[185141877,1621715171],[2884558258,3722473457],[1492107531,111281805],[3336927864,4225337056],[782994598,1021838039],[346133860,18281270],[2080909533,1649329040],[3612065399,3859901127],[2151962287,284556115],[3957975594,3745718727],[52533817,3998775856],[1232633839,397383972],[2716413964,3629253960],[1531307298,3836851439],[3030137657,2500401718],[3561556693,653345841],[313061910,2945718466],[2065276,3342140708],[410498334,1470588117],[2726640512,4051654894],[2570984935,758567696],[3008987264,3462702678],[623860175,228525243],[3527183895,1829844480],[467272850,3890501742],[568376656,650516927],[990477018,4035508558],[2366955227,817792110],[4183621538,989198068],[946958343,1639184195],[3395758993,3924097558],[1690887473,3220519765],[605184237,1255270525],[275515833,1926424610],[2142902612,283494960],[2021972412,1823828440],[105373677,3448326697],[1666662384,1042433908],[1338566998,261206307],[498685668,1344755577],[3101233780,3119109371],[2733370951,3808165089],[3656512268,3449289481],[4025308119,1607880299],[778896067,1612183167],[2846510368,3674754715],[3058428120,2991822529],[1892379383,3268787440],[2565895844,4154602030],[3213117192,98999135],[2495816991,116985075],[1040203361,1785041385],[3106252493,69316595],[1639829808,2087117568],[3213709576,3799911752],[604681594,2340981536],[4236730699,2938666503],[4009938384,1878897714],[2701667332,1725918218],[2182473079,1258184],[3550198211,2760750799],[657991062,875584532],[1640976276,3380476221],[460041378,2924352091],[1972323596,2287414795],[2510248061,1350206297],[2959337826,3762681165],[1625877874,3235902929],[2070189957,1429368735],[4245163299,1839731898],[2358312347,138364248],[275739390,2179122576],[2037777210,972544338],[2766930226,1984733259],[1933485829,4209310327],[3034118011,3286589799],[2653025529,62078937],[2641780289,2679545709],[3540781195,2787026415],[1569993599,3215949659],[441337890,3947723353],[1878946792,459505587],[3724105660,920173002],[1691411102,3934795955],[148741087,3647709027],[142506469,2776440083],[3811107376,3823285243],[472209891,252266174],[1913386482,1867329194],[2960608550,482740699],[1145005292,1513558421],[1091751784,1687823886],[3625186042,3086337482],[1712140887,940065262],[1504455800,1945702563],[3896940088,2003245591],[2478191531,4197739e3],[3233871270,250924495],[3404865229,1131917964],[1462204167,429621621],[1349259705,3641608989],[3627860584,2048468319],[1244251718,1513180369],[3979211282,371413143],[3043187861,4285699810],[581894202,3060983825],[1390895705,1811317301],[2599134010,3337406128],[2488233440,2436161462],[1816641224,2208816697],[1792034756,815866116],[2779893723,2695577703],[2084952115,2951772258],[1351806869,169269771],[2469979804,86740603],[1163545420,4264616949],[1795352113,2511146232],[1796715044,3134635815],[3521170642,1538900329],[3725363621,1455009392],[1342594643,1512127734],[2618386938,662157428],[2028859350,2494504685],[1841905045,648351336],[4002935891,4033319405],[850071259,1768358867],[979915719,3876018087],[830889197,1629549437],[1744763229,2455795856],[522919199,368499868],[3063822504,2522639205],[2861636095,407686388],[4097602344,1945259027],[4215946617,1251639506],[894485042,534122652],[924809191,1807237502],[1811585710,1589663609],[3439653887,1722232],[3810997538,105152714],[2677100683,4291805514],[77233985,102407776],[4239834691,2851274395],[148802076,2006440603],[2409138150,126301601],[3048474397,3217504870],[588133437,4221603123],[1139638106,263087485],[982032635,3165674595],[562514827,1294842959],[467575086,905357513],[1405117894,3370530088],[3813285157,242912619],[3601878331,1985076606],[1586505598,2092146221],[738488098,103663229],[2970334297,321718822],[1068097019,1742926233],[235518094,420804527],[283685722,4092504887],[2666392744,3799169331],[3569817788,1256762975],[2169728352,292617248],[2444571896,2239859206],[3967907832,1066404216],[420376911,2913277294],[3046293305,2956347747],[2311278792,2477686209],[2885955184,4172514290],[3030078181,2275536480],[4212469731,4280736393],[1046900335,1773022229],[995380926,1414273529],[3892683234,2429494358],[615726237,2127712535],[3880203074,2071130305],[176180504,3070850165],[1474506861,2283723599],[1256707747,1857412043],[764236850,359687368],[3521530334,511649419],[2318567964,3992868140],[128167623,2518992858],[2220129756,1042300052],[2567608573,1349636707],[441446694,384760969],[4143447316,829506048],[817912603,2738025500],[2368091832,357934982],[1187643061,1561463042],[3438021235,3030161697],[1318922279,895468690],[434876457,1130220303],[1180291767,1132759596],[2520707785,1798553137],[1962430872,2958700157],[1510954061,3534879512],[57831539,3269538993],[3354831405,3852135009],[891783098,2698494511],[2555636406,996018997],[2881342935,3982231648],[3473267445,2894952368],[1238029452,3958679326],[2051805420,559465638],[3655936674,1186951582],[330209165,167662935],[1929681327,2450868735],[1313566811,2458925988],[4283920930,3243182650],[1438004300,4185567150],[3093439067,89876832],[3401620219,3721579956],[3673745794,2682874719],[3053321309,825410712],[822915968,3681514755],[3900685126,561657358],[553823814,1857753416],[4166295066,983949325],[128359165,3426887194],[3300989119,3884968622],[4193552686,3647722552],[452189154,1569670618],[4122259632,3537825460],[2519387887,2821594244],[74333898,2940550377],[4032631446,2173999692],[2521268686,1934310532],[2620314688,2177785789],[1378755571,2455646622],[394133753,4231198609],[734399075,2800989170],[573292462,1634883078],[1214417373,3426576256],[2110224475,2399009920],[2331215665,3224086912],[531326186,698539511],[3839443603,583861850],[2644531398,2017784332],[616620850,3070237104],[590349237,2798642861],[3582377217,3317831670],[1582708616,1596570667],[2126148205,2358511947],[173450736,3219362418],[3616831144,1323437318],[2655785577,3131359031],[401600069,2967397952],[496349349,4244179910],[2479612086,2579650653],[1710903074,2049666425],[3589924952,690291925],[3266682943,1900485231],[1496318498,3025542656],[3459221058,3389461212],[2091479615,3140389256],[663040899,1207089672],[3323704225,1105530508],[353318429,2879253542],[2674540957,941987316],[1688550857,620657353],[338551967,4286217277],[204689992,2239736295],[178008789,3940832005],[3871613304,3300636974],[1911672356,2429684487],[4055679954,1974461722],[3878217928,1009991796],[2533095482,310920740],[2174833823,3596041637],[1604814460,2939543881],[1452830254,4092397851],[2441027029,4169690209],[3524103304,3372213855]],t=[[836181454,1689436944],[2776523577,3710710688],[4049974663,3750330768],[519497435,2979405513]],n=[[1892447193,197291556],[3793382197,3742120663],[3838936,2994760034],[479846099,1018728609],[3476112862,182272649],[3504620154,1427438450],[2009473484,2679350403],[1738755500,1129731339]],r=[4174784170,2938602761],o={p:0,P:1,n:2,N:3,b:4,B:5,r:6,R:7,q:8,Q:9,k:10,K:11},a=[];a[5]=1,a[6]=0,a[9]=3,a[10]=2,a[17]=5,a[18]=4,a[33]=7,a[34]=6,a[65]=9,a[66]=8,a[129]=11,a[130]=10;var i,s=[2,5,10,20,40,80,160,64],c="nbrq",l=["","0000000","000000","00000","0000","000","00","0",""],u=16;function to32BitHex(e){var t=e.toString(16);return l[t.length]+t}function to64BitHex(e){return to32BitHex(e[0])+to32BitHex(e[1])}function hash(a,i){var c,l,u,d,f,p,m,h,v,g,b,_,E=a.split(" "),y=E[0].split("/"),O="w"===E[1],A=0,S=Number(O),N=S?3:4;for(u=7;u>=0;u-=1)for(d=0,m=(f=y[u]).length,p=0;p<m;p+=1)h=f[p],(b=o[h])>=0&&(c=(c^(v=e[64*b+8*(7-u)+d])[0])>>>0,l=(l^v[1])>>>0,b===S&&u===N&&(A|=1<<d)),d+=Number(h)||1;return"-"!==E[2]&&((g=E[2]).indexOf("K")>-1&&(c=(c^(v=t[0])[0])>>>0,l=(l^v[1])>>>0),g.indexOf("Q")>-1&&(c=(c^(v=t[2])[0])>>>0,l=(l^v[1])>>>0),g.indexOf("k")>-1&&(c=(c^(v=t[1])[0])>>>0,l=(l^v[1])>>>0),g.indexOf("q")>-1&&(c=(c^(v=t[3])[0])>>>0,l=(l^v[1])>>>0)),E[3]&&"-"!==E[3]&&(_=E[3].charCodeAt(0)-97,s[_]&A&&(c=(c^(v=n[_])[0])>>>0,l=(l^v[1])>>>0)),O&&(c=(c^r[0])>>>0,l=(l^r[1])>>>0),i&&"hex"===i?to64BitHex([c,l]):[c,l]}function wrap(e){var t,n,r,o,a={};function parseBook(e,t){var r,o,a,i,s,l,u=n.getUint16(e+8),d=n.getUint16(e+10);return o=u>>9&7,i=u>>3&7,s=7&u,l=u>>12&7,4===(a=u>>6&7)&&t&&o===i&&"-"!==t&&(7===s&&(0===o&&t.indexOf("K")>-1||7===o&&t.indexOf("k")>-1)?s-=1:0===s&&(0===o&&t.indexOf("Q")>-1||7===o&&t.indexOf("q")>-1)&&(s+=2)),r=String.fromCharCode(a+97)+(o+1)+String.fromCharCode(s+97)+(i+1),l&&(r+=c[l-1]),{move:r,weight:d}}function query(e){return"string"==typeof e&&(e={fen:e}),t(e)}if(a={query:query,pick:function pick(e){var t,n,r,o,a,i=0;if(function sortMoves(e){e.sort(function sorter(e,t){return t.weight-e.weight})}(t=(e=e||{}).moves||query(e)),r=t.length){if(e.type&&1!==r&&"best"!==e.type){if("random"===e.type){for(o=Math.floor(Math.random()*t.sum)+1,a=0;a<r-1&&!(o<=(i+=t[a].weight));a+=1);return t[a].move}return"randomDisregardWeight"===e.type?t[Math.floor(Math.random()*r)].move:"worst"===e.type?t[r-1].move:((n=parseInt(e.type)||1)<0&&(n=r+n+1),n<1?n=1:n>r&&(n=r),t[n-1].move)}return t[0].move}}},e.getUint32)t=function bufferBookFind(e){var t,r,o,a,i,s=n.length||n.byteLength||0,c=e.offset||0,l=e.fen,d=e.chess960,f=e.checkAll,p=[],m=0;for(e.hash?"string"==typeof(t=e.hash)&&(t=function hex64ToDec(e){return[parseInt(e.substr(0,8),16),parseInt(e.substr(8),16)]}(t)):t=hash(l),!d&&l&&(i=l.split(" ")[2]),c=0;c<s;c+=u)if(n.getUint32(c)===t[0]&&n.getUint32(c+4)===t[1])o=parseBook(c,i),p[p.length]=o,m+=o.weight,r=!0;else if(r&&!f)break;if(p.sum=m,e.relative)for(a=p.length-1;a>=0;a-=1)p[a].relative=Math.round(p[a].weight/m*1e4);return p},n=e,a.buffer=n;else for(o in t=function jsonBookFind(e){var t,n,o,i,s,c,l=0,u=e.fen;if(a.useFen)o=u.replace(/ \d+ \d+$/,""),(t=r[o])||(i=o.replace(/[a-h][1-8]$/,"-"))!==o&&(t=r[i]);else if(e.hash||(e.hash=hash(u,"hex")),t=r[e.hash]){if(t[0]&&t[0].n&&(t=t[0]),t.n&&!t.b)return[];if(t.b)t=function decompressMoves(e){var t,n=[],r=e.b.length;for(t=0;t<r;++t)n.push({move:e.b[t],weight:e.w[t]});return n}(t);else if(!e.chess960&&u)for(c=u.split(" ")[2],n=t.length-1;n>=0;n-=1)(s=t[n].move.match(/e([18])([ah])\1/))&&("h"===s[2]&&("1"===s[1]&&c.indexOf("K")>-1||"8"===s[1]&&c.indexOf("k")>-1)?t[n]={move:"e"+s[1]+"g"+s[1],weight:t[n].weight}:"a"===s[2]&&("1"===s[1]&&c.indexOf("Q")>-1||"8"===s[1]&&c.indexOf("q")>-1)&&(t[n]={move:"e"+s[1]+"c"+s[1],weight:t[n].weight}))}if(t)for(n=t.length-1;n>=0;n-=1)l+=Number(t[n].weight);else t=[];return t.sum=l,t},r=e,a.json=r,r){a.useFen=o.indexOf(" ")>-1;break}return a}function getBook(e,t){!function ajaxLoad(e,t){var n=new XMLHttpRequest,r=e.toLowerCase().indexOf(".json")>-1;function onload(){var e;if(n.status>=200&&n.status<300||304===n.status||0===n.status||1223===n.status)if(r)try{t(null,JSON.parse(n.response))}catch(e){t(e)}else e=new DataView(n.response),t(null,e);else t(new Error("Error code: "+n.status))}n.open("GET",e,!0),r||(n.responseType="arraybuffer"),n.onload=onload,n.onerror=onload,n.send()}(e,function onload(e,n){var r;if(n&&(r=wrap(n)),t)return t(e,r);if(e)throw e;return r})}return{hash:hash,loadBook:(i={},function loadBook(e,t){i[e]?i[e].book?setTimeout(function(){t(null,i[e].book)},0):i[e].cbs.push(t):(i[e]={cbs:[t]},getBook(e,function onload(t,n){var r=i[e].cbs;t?delete i[e]:(i[e].book=n,i[e].cbs=void 0),r.forEach(function(e){setTimeout(function(){e(t,n)},0)})}))}),to64BitHex:to64BitHex,zobristPiece:e,zobristCastle:t,zobristEnPassant:n,zobristTurn:r,zobristPieceValue:o,zobristPieceValueNumbers:a}}(),o=function init(){var e,t,n,o,a={Chess:0,Chess960:1,Crazyhouse:2,"3-check":3,"King of the Hill":4,Bughouse:5,chess960:1,Fischerandom:1,fischerandom:1,crazyhouse:2,"three-check":3,kingofthehill:4,koth:4,bughouse:5},i=["Chess","Chess960","Crazyhouse","3-check","King of the Hill","Bughouse"],c={a8:0,b8:1,c8:2,d8:3,e8:4,f8:5,g8:6,h8:7,a7:16,b7:17,c7:18,d7:19,e7:20,f7:21,g7:22,h7:23,a6:32,b6:33,c6:34,d6:35,e6:36,f6:37,g6:38,h6:39,a5:48,b5:49,c5:50,d5:51,e5:52,f5:53,g5:54,h5:55,a4:64,b4:65,c4:66,d4:67,e4:68,f4:69,g4:70,h4:71,a3:80,b3:81,c3:82,d3:83,e3:84,f3:85,g3:86,h3:87,a2:96,b2:97,c2:98,d2:99,e2:100,f2:101,g2:102,h2:103,a1:112,b1:113,c1:114,d1:115,e1:116,f1:117,g1:118,h1:119},l=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],u=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],d=0,f=0,p=0,m=-1,h=1,v=2,g=4,b=8,_=16,E=32,y=64,O=128,A=3,S=252,N=255,T=256,C=512,I=112,w=1,L=2,k=4,P=3,M=7,D=14,R=21,j=127,B="pnbrqkPNBRQK",x="rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1",F=[];F[5]=[-16,-17,-15],F[6]=[16,17,15],F[8]=[-18,-33,-31,-14,18,33,31,14],F[16]=[-17,-15,17,15],F[32]=[-16,1,16,-1],F[64]=[-17,-16,-15,1,17,16,15,-1],F[128]=[-17,-16,-15,1,17,16,15,-1];var V={P:5,p:6,N:9,n:10,B:17,b:18,R:33,r:34,Q:65,q:66,K:129,k:130},H={P:4,p:4,N:8,n:8,B:16,b:16,R:32,r:32,Q:64,q:64,K:128,k:128},G={5:"P",6:"p",9:"N",10:"n",17:"B",18:"b",33:"R",34:"r",65:"Q",66:"q",129:"K",130:"k"},U={9:"N",10:"N",17:"B",18:"B",33:"R",34:"R",65:"Q",66:"Q",129:"K",130:"K"},$=[80,0,0,0,0,0,0,96,0,0,0,0,0,0,80,0,0,80,0,0,0,0,0,96,0,0,0,0,0,80,0,0,0,0,80,0,0,0,0,96,0,0,0,0,80,0,0,0,0,0,0,80,0,0,0,96,0,0,0,80,0,0,0,0,0,0,0,0,80,0,0,96,0,0,80,0,0,0,0,0,0,0,0,0,0,80,8,96,8,80,0,0,0,0,0,0,0,0,0,0,0,8,212,224,212,8,0,0,0,0,0,0,96,96,96,96,96,96,224,0,224,96,96,96,96,96,96,0,0,0,0,0,0,8,212,224,212,8,0,0,0,0,0,0,0,0,0,0,0,80,8,96,8,80,0,0,0,0,0,0,0,0,0,0,80,0,0,96,0,0,80,0,0,0,0,0,0,0,0,80,0,0,0,96,0,0,0,80,0,0,0,0,0,0,80,0,0,0,0,96,0,0,0,0,80,0,0,0,0,80,0,0,0,0,0,96,0,0,0,0,0,80,0,0,80,0,0,0,0,0,0,96,0,0,0,0,0,0,80],q=[336,80,80,0,0,0,96,352,96,0,0,0,80,80,336,0,80,336,80,80,0,0,96,352,96,0,0,80,80,336,80,0,80,80,336,80,80,0,96,352,96,0,80,80,336,80,80,0,0,80,80,336,80,80,96,352,96,80,80,336,80,80,0,0,0,0,80,80,336,88,120,360,120,88,336,80,80,0,0,0,0,0,0,80,88,476,252,508,252,476,88,80,0,0,0,0,96,96,96,96,120,252,252,252,252,252,120,96,96,96,96,0,352,352,352,352,360,508,252,0,252,508,360,352,352,352,352,0,96,96,96,96,120,252,252,252,252,252,120,96,96,96,96,0,0,0,0,80,88,476,252,508,252,476,88,80,0,0,0,0,0,0,80,80,336,88,120,360,120,88,336,80,80,0,0,0,0,80,80,336,80,80,96,352,96,80,80,336,80,80,0,0,80,80,336,80,80,0,96,352,96,0,80,80,336,80,80,0,80,336,80,80,0,0,96,352,96,0,0,80,80,336,80,0,336,80,80,0,0,0,96,352,96,0,0,0,80,80,336],K=[336,80,80,0,0,0,96,352,96,96,0,0,80,80,336,0,80,336,80,80,0,0,96,352,96,96,0,80,80,336,80,0,80,80,336,80,80,0,96,352,96,96,80,80,336,80,80,0,0,80,80,336,80,80,96,352,96,112,80,336,80,80,0,0,0,0,80,80,336,88,120,360,120,120,336,80,80,0,0,0,0,0,0,80,88,476,252,508,252,508,88,80,0,0,0,0,96,96,96,96,120,252,252,252,252,252,252,104,96,96,96,0,352,352,352,352,360,508,252,0,252,508,488,352,352,352,352,0,96,96,96,96,120,252,252,252,252,252,252,104,96,96,96,0,0,0,0,80,88,476,252,508,252,508,88,80,0,0,0,0,0,0,80,80,336,88,120,360,120,120,336,80,80,0,0,0,0,80,80,336,80,80,96,352,96,112,80,336,80,80,0,0,80,80,336,80,80,0,96,352,96,96,80,80,336,80,80,0,80,336,80,80,0,0,96,352,96,96,0,80,80,336,80,0,336,80,80,0,0,0,96,352,96,96,0,0,80,80,336],z=[336,80,80,0,0,96,96,352,96,0,0,0,80,80,336,0,80,336,80,80,0,96,96,352,96,0,0,80,80,336,80,0,80,80,336,80,80,96,96,352,96,0,80,80,336,80,80,0,0,80,80,336,80,112,96,352,96,80,80,336,80,80,0,0,0,0,80,80,336,120,120,360,120,88,336,80,80,0,0,0,0,0,0,80,88,508,252,508,252,476,88,80,0,0,0,0,96,96,96,104,252,252,252,252,252,252,120,96,96,96,96,0,352,352,352,352,488,508,252,0,252,508,360,352,352,352,352,0,96,96,96,104,252,252,252,252,252,252,120,96,96,96,96,0,0,0,0,80,88,508,252,508,252,476,88,80,0,0,0,0,0,0,80,80,336,120,120,360,120,88,336,80,80,0,0,0,0,80,80,336,80,112,96,352,96,80,80,336,80,80,0,0,80,80,336,80,80,96,96,352,96,0,80,80,336,80,80,0,80,336,80,80,0,96,96,352,96,0,0,80,80,336,80,0,336,80,80,0,0,96,96,352,96,0,0,0,80,80,336],W=[336,80,80,0,0,96,96,352,96,96,0,0,80,80,336,0,80,336,80,80,0,96,96,352,96,96,0,80,80,336,80,0,80,80,336,80,80,96,96,352,96,96,80,80,336,80,80,0,0,80,80,336,80,112,96,352,96,112,80,336,80,80,0,0,0,0,80,80,336,120,120,360,120,120,336,80,80,0,0,0,0,0,0,80,88,508,252,508,252,508,88,80,0,0,0,0,96,96,96,104,252,252,252,252,252,252,252,104,96,96,96,0,352,352,352,352,488,508,252,0,252,508,488,352,352,352,352,0,96,96,96,104,252,252,252,252,252,252,252,104,96,96,96,0,0,0,0,80,88,508,252,508,252,508,88,80,0,0,0,0,0,0,80,80,336,120,120,360,120,120,336,80,80,0,0,0,0,80,80,336,80,112,96,352,96,112,80,336,80,80,0,0,80,80,336,80,80,96,96,352,96,96,80,80,336,80,80,0,80,336,80,80,0,96,96,352,96,96,0,80,80,336,80,0,336,80,80,0,0,96,96,352,96,96,0,0,80,80,336],Y=[336,80,80,112,112,112,96,352,96,96,112,112,112,80,336,0,80,336,80,112,112,112,112,352,96,112,112,112,112,336,80,0,80,80,336,112,112,112,112,368,112,112,112,112,368,80,80,0,80,80,80,368,112,112,112,368,112,112,112,368,112,80,80,0,80,80,80,112,368,120,120,376,120,120,368,112,112,80,80,0,0,80,88,120,120,508,252,508,252,508,120,120,120,88,80,0,96,104,252,252,252,252,252,252,252,252,252,252,252,252,104,0,352,352,480,480,488,508,252,0,252,508,488,480,480,480,352,0,96,104,252,252,252,252,252,252,252,252,252,252,252,252,104,0,0,80,88,120,120,508,252,508,252,508,120,120,120,88,80,0,80,80,80,112,368,120,120,376,120,120,368,112,112,80,80,0,80,80,80,368,112,112,112,368,112,112,112,368,112,80,80,0,80,80,336,112,112,112,112,368,112,112,112,112,368,80,80,0,80,336,80,112,112,112,112,352,96,112,112,112,112,336,80,0,336,80,80,112,112,112,96,352,96,96,112,112,112,80,336],Q=[17,0,0,0,0,0,0,16,0,0,0,0,0,0,15,0,0,17,0,0,0,0,0,16,0,0,0,0,0,15,0,0,0,0,17,0,0,0,0,16,0,0,0,0,15,0,0,0,0,0,0,17,0,0,0,16,0,0,0,15,0,0,0,0,0,0,0,0,17,0,0,16,0,0,15,0,0,0,0,0,0,0,0,0,0,17,33,16,31,15,0,0,0,0,0,0,0,0,0,0,0,18,17,16,15,14,0,0,0,0,0,0,1,1,1,1,1,1,1,0,-1,-1,-1,-1,-1,-1,-1,0,0,0,0,0,0,-14,-15,-16,-17,-18,0,0,0,0,0,0,0,0,0,0,0,-15,-31,-16,-33,-17,0,0,0,0,0,0,0,0,0,0,-15,0,0,-16,0,0,-17,0,0,0,0,0,0,0,0,-15,0,0,0,-16,0,0,0,-17,0,0,0,0,0,0,-15,0,0,0,0,-16,0,0,0,0,-17,0,0,0,0,-15,0,0,0,0,0,-16,0,0,0,0,0,-17,0,0,-15,0,0,0,0,0,0,-16,0,0,0,0,0,0,-17],J=[0,5,8,11,14],Z=[31,7,7,7,63],X={P:0,p:0,N:5,n:5,B:8,b:8,R:11,r:11,Q:14,q:14},ee=[g,b,_,E,y],te=["","N","B","R","Q"],ne={CAPTURE:1,BIG_PAWN:2,EP_CAPTURE:4,ANY_CAPTURE:5,PROMOTION:8,KSIDE_CASTLE:16,QSIDE_CASTLE:32,KQSIDE_CASTLE:48,DROP:64,DROP_OR_PROMOTE:72},re=[0,6,1],oe={K:119,Q:112,k:7,q:0,A:112,B:113,C:114,D:115,E:116,F:117,G:118,H:119,a:0,b:1,c:2,d:3,e:4,f:5,g:6,h:7},ae=["Event","Site","Date","Round","White","Black","Result"],ie=["Event","Site","Date","Round","White","Black","Result","Variant","SetUp","FEN","WhiteA","WhiteB","BlackA","BlackB"];function rank(e){return e>>4}function file(e){return 7&e}function algebraic(e){return String.fromCharCode(file(e)+97)+(8-rank(e))}function swapColor(e){return 3-e}function hashNum(e,t){e[0]=(e[0]^t[0])>>>0,e[1]=(e[1]^t[1])>>>0}function completeFen(e){var t,n;return(t=[""," w - - 0 1"," - - 0 1"," - 0 1"," 0 1"," 1"][(n=(e=e.trim()).split(" ")).length])&&e?e+=t:"0"===n[5]&&(n[5]=1,e=n.join(" ")),e}function createVariantZobristNumbers(){r.zobristCheck=[[441249556,340005552],[1040760204,311043682],[1621584863,1749286446],[1006868636,1625552915],[1953853171,24921145],[161251506,1935545265]]}function validateFen(e,t){var n,r,o,i,s,c,l,u,d,f,p,m,h,v,g,b,_,E,y,O,A=/^(?:[A-H]{1,2}[a-h]{0,2}|[A-H]{0,2}[a-h]{1,2}|KQ?k?q?|Qk?q?|kq?|q|-)$/,S=1*t===a.Crazyhouse||a[t]===a.Crazyhouse||1*t===a.Bughouse||a[t]===a.Bughouse,N=0,T=0,C=!0,I="",w={0:0,7:0},L={0:0,7:0},k={0:"k",7:"K"},P={0:"r",7:"R"},M=1*t===a.Chess960||a[t]===a.Chess960;if(!e)return 1;if((1*t===a.Bughouse||a[t]===a.Bughouse)&&2===(s=e.split(" | ")).length)return 0===(c=validateFen(s[0],t))&&(c=validateFen(s[1],t)),c;if(s=e.split(/\s+/),(1*t===a["3-check"]||a[t]===a["3-check"])&&7===s.length&&(i=s.pop(),!/^\+[0-3]\+[0-3]$/.test(i)||"+3+3"===i))return 14;if(6!==s.length)return 1;if(/\D|.{7,}|^0|^$/.test(s[5]))return 2;if(/\D|.{7,}|^0.|^$/.test(s[4]))return 3;if(!/^(?:-|[abcdefgh][36])$/.test(s[3]))return 4;if(f=s[2],M){if(!A.test(f))return 12}else if(!/^(?:KQ?k?q?|Qk?q?|kq?|q|-)$/.test(f)){if(void 0!==t||!A.test(f))return 5;M=!0}if("w"!==s[1]&&"b"!==s[1])return 6;if(S&&(s[0]=s[0].replace(/~(?=.*\/)/g,"")),r=s[0].split("/"),S&&9===r.length&&(i=r.pop(),!/^[pnbrq]{0,63}$/i.test(i)))return 13;if(8!==r.length)return 7;if("3"===s[3][1]&&"w"===s[1]||"6"===s[3][1]&&"b"===s[1])return 11;for("-"!==s[3]&&(l=4===(T="3"===s[3][1]?4:3)?5:2,N=s[3].charCodeAt(0)-97,C=!1,I=4===T?"P":"p"),n=0;n<r.length;++n){for(E=0,y=!1,O=0;O<r[n].length;O++)if(+(o=r[n][O])==+o){if(y)return 8;E+=1*o,y=!0}else{if(-1===B.indexOf(o))return 9;if(C||T!==n||N!==E||I!==o||(C=!0),l===n&&N===E)return 11;n%7==0&&(o===k[n]?L[n]=1<<E:o===P[n]&&(w[n]|=1<<E)),++E,y=!1}if(8!==E)return 10}if(!C)return 11;if("-"!==f)if(M)for(m={0:0,1:0,2:252,4:248,8:240,16:224,32:192,64:128,128:0},p={0:0,1:0,2:1,4:3,8:7,16:15,32:31,64:63,128:0},_={0:[0,0],7:[0,0]},n=f.length-1;n>=0;--n){if(g=f.charCodeAt(n),b&&b>g&&b-g<8)return 15;if(75===g?h=w[v=7]&m[L[v]]:81===g?h=w[v=7]&p[L[v]]:107===g?h=w[v=0]&m[L[v]]:113===g?h=w[v=0]&p[L[v]]:(h=1<<g-((v=g>=97?0:7)?65:97),b=g),!h||0!=(h&h-1))return 15;if(L[v]<2||L[v]>64||(h&w[v])!==h)return 15;if(++_[v][1*(L[v]<h)]>1)return 15}else{if((u=(f.indexOf("K")>-1?128:0)|(f.indexOf("Q")>-1?1:0))&&(16!==L[7]||(u&w[7])!==u))return 15;if((d=(f.indexOf("k")>-1?128:0)|(f.indexOf("q")>-1?1:0))&&(16!==L[0]||(d&w[0])!==d))return 15}return 0}function handToString(e,t){var n,r,o="",a=0,i=t?6:0;if(e)for(;a<5;){for(n=e>>J[a]&Z[a],r=0;r<n;++r)o+=B[a+i];++a}return o}function hashEP(e,t,n,o){e[n+1]!==o&&e[n-1]!==o||hashNum(t,r.zobristEnPassant[file(n)])}function addPawnMove(e,n,r){var o;(0===t||l[n]&L)&&(rank(n)%7==0?(o=r|ne.PROMOTION|e<<M|n<<D,u[f++]=o|4<<R,u[f++]=o|3<<R,u[f++]=o|2<<R,u[f++]=o|1<<R):u[f++]=r|e<<M|n<<D)}function kingOfTheHillWin(e){switch(e){case 67:case 68:case 51:case 52:return!0}return!1}function canCastle960(e,t,n,r){var o,a,i,s=t+(n-t%8),c=n>t%8?1:-1;for(i=t+c;i!==s;i+=c)if(e[i])return!1;if(a=(o=r===h?1===c?118:114:1===c?6:2)-c,l[o]||e[o]&&o!==t&&o!==s||e[a]&&a!==t&&a!==s)return!1;if(o!==t)for(i=t+(c=o>t?1:-1);i!==o;i+=c)if(i!==s&&e[i]||l[i])return!1;return!0}var se=function(){function createHeader(e,t){return"["+e+' "'+String(t).replace(/(\"|\\)/g,"\\$1")+'"]'}return function generatePgn(e,t,n,r,o,i){var s,c,l="string"==typeof e.newline?e.newline:"\n",u=void 0===e.spaceAfterPeriods||e.spaceAfterPeriods,d="";for(s in d+=createHeader("Event",t.Event)+l,d+=createHeader("Site",t.Site)+l,d+=createHeader("Date",t.Date)+l,d+=createHeader("Round",t.Round)+l,o===a.Bughouse?(d+=createHeader("WhiteA",t.WhiteA||"?")+l,d+=createHeader("BlackA",t.BlackA||"?")+l,d+=createHeader("WhiteB",t.WhiteB||"?")+l,d+=createHeader("BlackB",t.BlackB||"?")+l):(d+=createHeader("White",t.White)+l,d+=createHeader("Black",t.Black)+l),d+=createHeader("Result",t.Result)+l,o&&(d+=createHeader("Variant",t.Variant)+l),t.FEN&&t.FEN!==x&&(d+=createHeader("SetUp","1")+l,d+=createHeader("FEN",t.FEN)+l),t)-1===ie.indexOf(s)&&(d+=createHeader(s,t[s])+l);if(d+=l,c=function createLine(e,t,n,r,o,i){var s,c,l,u,d,f,p,m,g,b,_,E,y=[],O="",A=!0,S=t[n],N=S.length,T="";if(S.commands&&!i)for(d in S.commands)T+="[%"+d+" "+S.commands[d]+"]";for(S.initComment&&(T=(T+" "+S.initComment.replace(/(\"|\}|\%|\\)/g,"\\$1")).trim()),T&&y.push("{"+T+"}"),l=0;l<N;++l){if(p=(c=S[l]).color===h,O="",T="",s=c.commands,r!==a.Bughouse?(A&&!p?O=e+"...":p&&(O=e+"."),o&&(p||A)&&(O+=" ")):(y.bughouseOrder||(y.bughouseOrder=[]),y.bughouseOrder.push(c.bughouseOrder),l||(y.blackCountOffset=S[0].color===v?1:0)),O+=c.san,c.annotation&&(O+=c.annotation),c.additionalAnnotation&&(O+=" "+c.additionalAnnotation.join(" ")),A=!1,void 0===c.time||s||(s={clk:(b=c.time,_=void 0,E=void 0,_=Math.floor(b%36e3/600),E=Math.floor(b%36e3%600)/10,Math.floor(b/36e3)+":"+(_<10?"0":"")+_+":"+(E<10?"0":"")+E)}),s&&!i)for(d in s)T+="[%"+d+" "+s[d]+"]";if(c.comment&&(T=(T+" "+c.comment.replace(/(\"|\}|\%|\\)/g,"\\$1")).trim()),T&&(O+=" {"+T+"}",A=!0),y.push(O),c.lines)for(m=c.lines.length,u=0;u<m;++u)t[g=c.lines[u]].length&&((f=createLine(e,t,g,r,o,i))[0]="("+f[0],f[f.length-1]+=")",y=y.concat(f),A=!0);p||e++}return y}(r,n,0,o,u,e.hideCommands),o===a.Bughouse){if(i.isDependent)return c;c=function makeBugHousePgn(e,t,n){var r=t,o=e.siblingGame.pgn(),a=0,i=0,s=[];for(t.bughouseOrder=t.bughouseOrder||[],o.bughouseOrder=o.bughouseOrder||[];t.bughouseOrder.length||o.bughouseOrder.length;)!t.bughouseOrder.length||o.bughouseOrder.length&&t.bughouseOrder[0]>o.bughouseOrder[0]?(o.bughouseOrder.shift(),s.push("B")):(t.bughouseOrder.shift(),s.push("A"));return t=[],s.forEach(function(s){var c,l,u,d="";"A"===s?(c=r,l=++a,u=e.startingMoveNumber()):(c=o,l=++i,u=e.siblingGame.startingMoveNumber()),d=String(Math.floor((l+1)/2)+u-1),(c.blackCountOffset+l)%2?d+=s:d+=s.toLowerCase(),d+="."+(n?" ":"")+c.shift(),t.push(d)}),t}(i,c,u)}return c.push(t.Result),d+function wordWrap(e,t,n){return t<1?e:(t="number"==typeof t?t:80,e.replace(new RegExp("(.{1,"+t+"})(?: |$|\r?\n)","g"),"$1"+n).slice(0,-n.length))}(c.join(" "),e.maxWidth,l)}}(),ce=function(){var e="!?‼⁇⁉⁈□∇Δ∞⩲⩱±∓⨀⟳→↑⇆∆⌓⇔⇗⟫⟪✕⊥⊕○⇄↻⊙~",t=/\[%(\S+)\s([^\]]+)\]/,n=/^(?:[+=~\/\-\u2212]+|T?N|RR|D)$/;function extractCommands(e){var n,r,o={};do{(n=t.exec(e.value))&&(r=!0,e.value=e.value.replace(n[0],"").trim(),o[n[1]]=n[2])}while(n);r&&(e.commands=o)}function isSplitGame(e,t,n){for(var r;++t<n;)if(r=e[t].match(/^\s*(\S+)/))return/^(?:\[|1(?:\.|$))/.test(r[1])}return function tokenize(t,r){var o,a,i,s,c,l,u,d="tags",f=[],p={type:d,value:""},m=0,h=[],v=!0;for(r=r||{},s=(o=t.split(/\r?\n/)).length,a=0;a<s;++a)if("%"!==(i=o[a].trim())[0])if(i){if(l=(i=" "+i+" ").length,c=0,v)for(;c<l;++c)if(u=i[c],"tags"===d){if("["===u)p={type:d="tagName",value:""};else if(u.trim()){p={type:d="san",value:""},v=!1;break}}else if("tagName"===d)p.value&&""===u.trim()?(f.push(p),d="tagValueStart"):" "!==u&&(p.value+=u);else if("tagValueStart"===d){if('"'===u||"“"===u)p={type:d="tagValue",value:""};else if(u.trim())return!1}else if("tagValue"===d)'"'===u||"”"===u?(f.push(p),"]"===i[c+1]?(p={type:d="tags",value:""},++c):d="tagEnd"):("\\"===u&&c+2<l&&(u=i[++c]),c>0&&(p.value+=u));else if("]"===u)p={type:d="tags",value:""};else if(u.trim())return!1;for(;c<l;++c)if(u=i[c],"san"===d)if(e.indexOf(u)>-1)"!"===u||"?"===u||e.indexOf(u)<6&&(u=["!!","??","!?","?!"][e.indexOf(u)-2])?(p.value&&f.push(p),p={type:"a",value:u},"!"!==i[c+1]&&"?"!==i[c+1]||(p.value+=i[++c]),f.push(p),p={type:"san",value:""}):("∞"===u&&"=/"===p.value?(p.type="aa",p.value+=u):(p.value&&(n.test(p.value)&&("--"!==p.value||r.rejectNullMoves)&&(p.type="aa"),f.push(p)),p={type:"aa",value:u},"↑"===u&&"↑"===i[c+1]&&(p.value="↻",++c)),f.push(p),p={type:"san",value:""});else if(" "===u||"\t"===u||"\n"===u||"\r"===u||"{"===u||"("===u||")"===u){if(p.value){if("$"===p.value[0])p.type="nag";else if("*"===p.value||"1-0"===p.value||"0-1"===p.value||"1/2-1/2"===p.value||"½-½"===p.value){if(c+1<l)return!1;p.type="result","½-½"===p.value&&(p.value="1/2-1/2")}n.test(p.value)&&("--"!==p.value||r.rejectNullMoves)&&(p.type="aa"),f.push(p),p={type:d,value:""}}if(" "===u||"\t"===u||"\n"===u||"\r"===u)d="san";else if("{"===u)d="comment";else if("("===u)d="san",f.push({type:"variationStart",value:++m});else if(f.push({type:"variationEnd",value:m}),d="san",!m--)return!1;p.type=d}else if("."===u||!p.value&&+u==+u&&"-"!==i[c+1]&&"/"!==i[c+1]){if(+u==+u)switch(p.number||(p.number=""),p.number+=u,i[c+1]){case"A":case"a":case"B":case"b":p.number+=i[++c],f.push({type:"number",value:p.number}),delete p.number}}else p.value+=u;else 0===c&&(p.value=p.value.trim()),"}"!==u?("\\"===u&&c+2<l&&(u=i[++c]),p.value+=u):(p.value=p.value.trim(),p.value.indexOf("[")>-1&&extractCommands(p),f.push(p),p={type:d="san",value:""})}else"tags"===d?(d="san",v=!1):"comment"!==d&&"tagValueStart"!==d&&!m&&f.length&&isSplitGame(o,a,s)&&("tagValue"!==f[f.length-1].type&&(h.push(f),f=[]),d="tags",v=!0);return h.push(f),h}}();function Chess(ie,le){var ue,de,fe=0,pe=!0,me=[],he=h,ve=[],ge=m,be=0,_e=1,Ee=1,ye=[],Oe=[ye],Ae=0;ye.id=Ae;var Se={},Ne=[],Te=!1,Ce=!1,Ie=makeMoveChess;function hashPosition(){var e,t,n,o=he===h?[4174784170,2938602761]:[0,0];for(n=0;n<120;++n)136&n&&(n+=8),(e=de[n])&&hashNum(o,r.zobristPiece[64*r.zobristPieceValueNumbers[e&N]+8*(7-rank(n))+file(n)]);if(Ce)for(t=1;t<3;++t)ve[t]&&(0!=(ve[t]&ve[t]-1)?(hashNum(o,r.zobristCastle[t-1]),hashNum(o,r.zobristCastle[t+1])):ve[t]>1<<file(me[t])?hashNum(o,r.zobristCastle[t-1]):hashNum(o,r.zobristCastle[t+1]));else{for(t=1;t<3;++t)ve[t]&&(ve[t]&ne.KSIDE_CASTLE&&hashNum(o,r.zobristCastle[t-1]),ve[t]&ne.QSIDE_CASTLE&&hashNum(o,r.zobristCastle[t+1]));Te?function hashHand(e,t){var n,o,a,i,s,c,l,u=0;for(n=1;n<3;++n){if(o=t[n])for(a=0;a<5;){for(s=u+63*a,i=o>>J[a]&Z[a],c=0;c<i;++c)hashNum(e,[31*(l=r.zobristPiece[s++])[0]>>>0,17*l[1]>>>0]);++a}u=315}}(o,ue._hand):fe===a["3-check"]&&function hash3Check(e,t){t[h]&&hashNum(e,r.zobristCheck[t[h]-1]),t[v]&&hashNum(e,r.zobristCheck[t[v]+2])}(o,Ne)}return ge!==m&&hashEP(de,o,ge+(he===h?16:-16),g|he),o}function getCurrentHash(){var e;return ye.length?e=ye[ye.length-1].hash:(ye.hash||(ye.hash=hashPosition()),e=ye.hash),[e[0],e[1]]}function setVariant(e,t){fe!==(fe=e?a[e]||1*e||a[String(e).replace(/ /g,"").toLowerCase()]||a.Chess:0)&&(fe===a.Bughouse?(Te=!0,ue.isDependent||(ue.siblingGame=Chess(),ue.siblingGame.hashing(pe),ue.siblingGame.isDependent=!0,ue.siblingGame.siblingGame=ue,ue.siblingGame.header({Variant:"Bughouse"})),createVariantZobristNumbers(),Ie=makeMoveVariant):(delete ue.siblingGame,Te=fe===a.Crazyhouse,Ce=fe===a.Chess960,fe?(createVariantZobristNumbers(),Ie=makeMoveVariant):Ie=makeMoveChess),t||updateSetup(generateFen()))}function disambiguate960Rook(e,t){for(var n,r,o=e>7?h:v;!(136&e);){if((n=de[e])&o)if(n&E){if(r)return;r=e%8+(o===h?65:97)}else if(n&O)return r;e+=t}}function _clear(e,t,n){de=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],he=h,me[h]=m,me[v]=m,ve[h]=0,ve[v]=0,ue._hand[h]=0,ue._hand[v]=0,Ne[h]=0,Ne[v]=0,ge=m,be=0,_e=1,t||(Oe=[ye=[]],Ae=0,ye.id=Ae,Se={Event:"?",Site:"?",Date:"????.??.??",Round:"?",White:"?",Black:"?",Result:"*"},e?setHeader(["Variant",e]):setVariant(!1,n),n||updateSetup(generateFen()))}function reset(){_clear(0,!1,!0),ye.hash=[1178310168,378666140],de=[34,10,18,66,130,18,10,34,0,0,0,0,0,0,0,0,6,6,6,6,6,6,6,6,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,5,5,5,5,5,5,5,5,0,0,0,0,0,0,0,0,33,9,17,65,129,17,9,33],Ee=1,me[h]=116,me[v]=4,ve[h]=48,ve[v]=48}function load(e,t,n,r){var o,s,l,u,d,f,p,b,_,y,S,N,T=0;if(r?(N=(o=e.split(" "))[3],S=o[2]):(N=(o=e.trim().split(/\s+/))[3]||"-",S=o[2]||"-"),void 0===t?(31&S.charCodeAt(0))<9&&setVariant(a.Chess960,!0):setVariant(t,!0),s=o[0],!r&&!(s=function fixFenPieces(e,t){var n,r,o=e.length,i=0,s=0,c=t&&(t===a.Crazyhouse||t===a.Bughouse);for(n=0;n<o;++n)if(+(r=e[n])!=+r)if("/"===r){if(8!==s&&(e=e.substr(0,n)+(8-s)+e.substr(n),++n,++o),s=0,++i>7){if(!c&&n<o-1||!/^[pnbrq]{0,63}$/i.test(e.substr(n+1)))return!1;break}}else if(V[r]){if(++s>8)return!1}else{if("~"!==r)return!1;c&&n&&/[nbrq]/i.test(e[n-1])||(e=e.substr(0,n)+e.substr(n+1),--n,--o)}else(s+=1*r)>8&&(e=e.substr(0,n)+(r-(s-8))+e.substr(n+1),s=8);return e}(s,fe)))return!1;if(u=s.length,_clear(i[fe],n,!0),Te){if(fe===a.Bughouse&&!ue.isDependent&&(f=e.split(" | "),!ue.siblingGame.load(1===f.length?e:f[1],t,n,r)))return reset(),!1;for(d=0;d<u;++d)if(+(p=s[d])!=+p)if("/"===p){if(T>111){for(++d;d<u;++d)p=s[d],ue._hand[p<"a"?h:v]+=1<<X[p]>>>0;break}T+=8}else de[T]=V[p],"~"===s[d+1]&&(++d,de[T]|=C),de[T]&O&&(me[de[T]&A]=T),++T;else T+=1*p}else for(d=0;d<u;++d)+(p=s[d])!=+p?"/"===p?T+=8:(de[T]=V[p],de[T]&O&&(me[de[T]&A]=T),++T):T+=1*p;if(he="b"===o[1]?v:h,"-"!==S)if(Ce){for(_={1:[0,0],2:[0,0]},d=S.length-1;d>=0;--d)75===(l=S.charCodeAt(d))?l=disambiguate960Rook(119,-1):81===l?l=disambiguate960Rook(112,1):107===l?l=disambiguate960Rook(7,-1):113===l&&(l=disambiguate960Rook(0,1)),b=l<97?h:v,y=oe[String.fromCharCode(l)],(p=de[y])===(E|b)&&(l>=97?me[b]>=1&&me[b]<=6&&(ve[b]|=1<<l-97):me[b]>=113&&me[b]<=118&&(ve[b]|=1<<l-65),++_[b][1*(me[b]<y)]);(_[h][0]>1||_[h][1]>1)&&(ve[h]=0),(_[v][0]>1||_[v][1]>1)&&(ve[v]=0)}else{if(!r)for(d=S.length-1;d>=0;--d)p=de[oe[S[d]]],b=S.charCodeAt(d)<97?h:v,p===(E|b)&&me[b]===(b===h?116:4)||(S=S.substr(0,d)+S.substr(d+1)||"-");for(d=S.length-1;d>=0;--d)switch(S[d]){case"K":ve[h]|=ne.KSIDE_CASTLE;break;case"Q":ve[h]|=ne.QSIDE_CASTLE;break;case"k":ve[v]|=ne.KSIDE_CASTLE;break;case"q":ve[v]|=ne.QSIDE_CASTLE}}return!r&&(2!==N.length||he===h&&"6"!==N[1]||he===v&&"3"!==N[1]||de[N.charCodeAt(0)-97+16*(8-("3"===N[1]?4:5))]!==(g|swapColor(he))||de[c[N]])&&(N="-"),ge="-"===N?m:c[N],be=1*o[4]||0,_e=1*o[5]||1,fe===a["3-check"]&&(o[6]&&"+3+3"!==o[6]&&(f=o[6].match(/^\+([0-3])\+([0-3])$/)),f=f||[0,0,0],Ne[h]=1*f[1],Ne[v]=1*f[2]),n||(Ee=_e,updateSetup(generateFen())),!0}function generateFen(){return fe?function generateVariantFen(){var e,t,n,r=0,o="",i="";for(e=0;e<120;++e)136&e&&(r&&(o+=r),o+="/",r=0,e+=8),(n=de[e])?(r&&(o+=r,r=0),o+=G[n&N],Te&&n&C&&(o+="~")):++r;if(r&&(o+=r),Te&&(o+="/"+handToString(ue._hand[h],!0)+handToString(ue._hand[v])),Ce){for(t=ve[v],e=0;t;)1&t&&(i=String.fromCharCode(e+97)+i),t>>=1,++e;for(t=ve[h],e=0;t;)1&t&&(i=String.fromCharCode(e+65)+i),t>>=1,++e}else ve[h]&ne.KSIDE_CASTLE&&(i+="K"),ve[h]&ne.QSIDE_CASTLE&&(i+="Q"),ve[v]&ne.KSIDE_CASTLE&&(i+="k"),ve[v]&ne.QSIDE_CASTLE&&(i+="q");return o+=" "+(he===h?"w":"b")+" "+(i||"-")+" "+(ge===m?"-":algebraic(ge))+" "+be+" "+_e,fe===a["3-check"]?o+=" +"+Ne[h]+"+"+Ne[v]:fe!==a.Bughouse||ue.isDependent||(o+=" | "+ue.siblingGame.fen()),o}():function generateStandardFen(){var e,t,n=0,r="",o="";for(e=0;e<120;++e)136&e&&(n&&(r+=n),r+="/",n=0,e+=8),(t=de[e])?(n&&(r+=n,n=0),r+=G[t&N]):++n;return n&&(r+=n),ve[h]&ne.KSIDE_CASTLE&&(o+="K"),ve[h]&ne.QSIDE_CASTLE&&(o+="Q"),ve[v]&ne.KSIDE_CASTLE&&(o+="k"),ve[v]&ne.QSIDE_CASTLE&&(o+="q"),r+=" "+(he===h?"w":"b")+" "+(o||"-")+" "+(ge===m?"-":algebraic(ge))+" "+be+" "+_e}()}function setHeader(e){var t,n,r;for(t=0;t<e.length;t+=2)n=e[t],r=e[t+1],n&&("Variant"===n&&(setVariant(r),r=fe?i[fe]:void 0),"Result"===n&&"*"!==r&&"1-0"!==r&&"0-1"!==r&&"1/2-1/2"!==r&&(r="*"),void 0!==r?Se[n]=String(r):ae.indexOf(n)>-1?Se[n]="Date"===n?"????.??.??":"?":delete Se[n]);return Se}function updateSetup(e){ye.length>0||Ae||(e!==x?(Se.SetUp="1",Se.FEN=e,ye.hash=null):(delete Se.SetUp,delete Se.FEN,ye.hash=[1178310168,378666140]))}function get(e){var t=de[c[e]];return t?{type:G[t&S|v],color:t&A,promoted:0!=(t&C)}:null}function calculateLegalMoveInfo(r,a){var i,s,c,u,d,f,p,h,v,b,_,E,y,A,N=he,C=O|N,M=l;if(e=[],t=0,n=0,o=0,M[0]=M[1]=M[2]=M[3]=M[4]=M[5]=M[6]=M[7]=M[16]=M[17]=M[18]=M[19]=M[20]=M[21]=M[22]=M[23]=M[32]=M[33]=M[34]=M[35]=M[36]=M[37]=M[38]=M[39]=M[48]=M[49]=M[50]=M[51]=M[52]=M[53]=M[54]=M[55]=M[64]=M[65]=M[66]=M[67]=M[68]=M[69]=M[70]=M[71]=M[80]=M[81]=M[82]=M[83]=M[84]=M[85]=M[86]=M[87]=M[96]=M[97]=M[98]=M[99]=M[100]=M[101]=M[102]=M[103]=M[112]=M[113]=M[114]=M[115]=M[116]=M[117]=M[118]=M[119]=0,a!==m){for(y=function chooseKingThreats(e,t){return Ce&&ve[e]?Y:ve[e]&ne.KSIDE_CASTLE&&!de[t+1]&&!de[t+2]?ve[e]&ne.QSIDE_CASTLE&&!de[t-1]&&!de[t-2]&&!de[t-3]?(o=ne.KQSIDE_CASTLE,W):(o=ne.KSIDE_CASTLE,K):ve[e]&ne.QSIDE_CASTLE&&!de[t-1]&&!de[t-2]&&!de[t-3]?(o=ne.QSIDE_CASTLE,z):q}(N,a),i=0;i<120;++i)if(136&i&&(i+=8),u=de[i])if(u&N)(!r||(0|u)&r)&&e.push(i);else if(0!=((A=y[i-a+119])&u))if(u&g)for(b=F[u],s=1;s<3;++s)136&(h=i+b[s])||(M[h]|=w,h===a&&(++t,M[i]|=L));else for(v=(b=F[u&S]).length,E=u&I,s=0;s<v;++s)if(_=b[s],!(a>(h=i)&&_<0&&a-h>16||a<h&&_>0&&h-a>16))for(;!(136&(h+=_));){if(M[h]|=w,d=de[h]){if(d&N)if(h===a){for(c=h-_;c!==i;c-=_)M[c]|=L;M[i]|=L,++t,E&&0==(136&(h+=_))&&(M[h]|=w)}else if(E&&A&T&&t<2)for(p=h+_;0==(136&p);){if(f=de[p]){f===C&&(M[h]|=k+(Math.abs(_)<<P),++n);break}p+=_}break}if(!E)break}t>1&&(e=[a])}else e=function getPieces(e,t){var n,r,o=[];for(n=0;n<120;++n)136&n&&(n+=8),(r=e[n])&&(r&t)===t&&o.push(n);return o}(de,N|r)}function validateEnPassant(e,n){var r,o,a,i=n+16*(he===h?1:-1);return(1!==t||0!=(l[n]&L)||0!=(l[i]&L))&&(r=de[e],de[n]=r,de[e]=0,o=de[i],de[i]=0,a=inCheck(),de[e]=r,de[n]=0,de[i]=o,!a)}function addCastlingMoves(e){var t,n,r;if(Ce){if(ve[e])for(n=(t=me[e])%8,r=0;r<8;++r)ve[e]&1<<r&&canCastle960(de,t,r,e)&&(u[f++]=(r>n?ne.KSIDE_CASTLE:ne.QSIDE_CASTLE)+(t<<M)+(t+(r-n)<<D),++r)}else o&ne.KSIDE_CASTLE&&(n=(t=me[e])+2,0===l[t+1]&&0===l[t+2]&&(u[f++]=ne.KSIDE_CASTLE+(t<<M)+(n<<D))),o&ne.QSIDE_CASTLE&&(n=(t=me[e])-2,0===l[t-1]&&0===l[t-2]&&(u[f++]=ne.QSIDE_CASTLE+(t<<M)+(n<<D)))}function generateMoves(r,o){var a,i,s,c,m,h,v,_,E,y,O=he,A=swapColor(O),N=me[O];for(calculateLegalMoveInfo(r,N),p=e.length,f=d,E=0;E<p;++E)if(a=e[E],c=de[a],!(t&&n&&l[a]&k))if(c&g)for(h=F[c],0!==n&&0!=(l[a]&k)&&l[a]>>P!=16||(m=a+h[0],0===de[m]&&(addPawnMove(a,m,0),re[O]===rank(a)&&(m+=h[0],de[m]||addPawnMove(a,m,ne.BIG_PAWN)))),i=1;i<3;++i)136&(m=a+(v=h[i]))||n&&l[a]&k&&l[a]>>P!==Math.abs(v)||(de[m]&A?addPawnMove(a,m,ne.CAPTURE):m===ge&&validateEnPassant(a,m)&&(u[f++]=ne.EP_CAPTURE|a<<M|m<<D));else{if(n&&l[a]&k){if(c&b)continue;if(!($[a-me[O]+119]&c))continue;h=[v=l[a]>>P,-v]}else h=F[c&S];if(y=a<<M,a===N){for(i=0;i<8;++i)0==(136&(m=a+(v=h[i])))&&(de[m]?de[m]&A&&0==(l[m]&w)&&(u[f++]=ne.CAPTURE|y|m<<D):0==(l[m]&w)&&(u[f++]=y|m<<D));0===t&&addCastlingMoves(O)}else for(s=h.length,_=c&I,i=0;i<s;++i)for(v=h[i],m=a;!(136&(m+=v));){if(de[m]){de[m]&A&&(0===t||l[m]&L)&&(u[f++]=ne.CAPTURE|y|m<<D);break}if((0===t||l[m]&L)&&(u[f++]=y|m<<D),!_)break}}return Te&&function drop(e,n,r){var o,a,i,s,c;if(!e)for(n&&(n>>=26),s=0;s<5;++s)if((!n||(0|n)==1<<s)&&ue._hand[r]&Z[s]<<J[s]){for(0===s?(o=16,a=103,i=ne.DROP):(o=0,a=119,i=ne.DROP|s<<R),c=o;c<=a;++c)136&c&&(c+=8),de[c]||(0===t||1===t&&l[c]&L)&&(u[f++]=i|c<<D);if(n)return}}(o,r,O),f}function inCheckAfterMove(e,t,n,r){var o,i,s,c,l,u,d,f;if(fe===a["King of the Hill"]&&e&O&&kingOfTheHillWin(n))return!0;if(r&ne.KQSIDE_CASTLE&&(n=he===h?r&ne.KSIDE_CASTLE?117:115:r&ne.KSIDE_CASTLE?5:3,e=E,f=!0),(o=me[swapColor(he)])===m)return!1;if(0==(e&O)&&$[n-o+119]&e)for(s=Q[n-o+119],l=e&I,c=n+s;0==(136&c);){if(c===o){if(e&g){if((e&A)===h?o-n<0:o-n>0)return!0;break}return!0}if(c!==t&&de[c]||!l)break;c+=s}if(!f){if((i=$[t-o+119])&I&&(s=Q[t-o+119])!==Q[n-o+119])for(c=o-s;0==(136&c);){if(c!==t&&(u=de[c])){if(u&he&&i&u&&u&I)return!0;break}c-=s}if(r&ne.EP_CAPTURE&&(i=$[(d=n+16*(he===h?1:-1))-o+119])&I)for(c=o-(s=Q[d-o+119]);0==(136&c);){if(c!==t&&c!==d){if(c===n)break;if(u=de[c]){if(u&he&&i&u&&u&I)return!0;break}}c-=s}}return!1}function moveToSan(e,t){var n,r,o,i,s,c,l="";return e&ne.KQSIDE_CASTLE?l=e&ne.KSIDE_CASTLE?"O-O":"O-O-O":e&ne.DROP?(o=e>>D&j,(n=e>>R)&&(l+=te[n]),l+="@"+algebraic(o)):(o=e>>D&j,(i=de[r=e>>M&j])&g?(e&ne.ANY_CAPTURE&&(l+=String.fromCharCode(file(r)+97)+"x"),l+=algebraic(o),e&ne.PROMOTION&&(l+="="+te[n=e>>R])):(l+=U[i&N],p>1&&(l+=function getDisambiguator(e,t,n){var r,o,a,i,s,c;if(f<2)return"";for(e&=S,c=0;c<f;++c)if(r=u[c],n===r>>D&&(a=r>>M&j)!==t&&de[a]&e){if(o=!0,rank(t)===rank(a)){if(i)return algebraic(t);s=!0}if(file(t)===file(a)){if(s)return algebraic(t);i=!0}}if(o)return i?String(8-rank(t)):String.fromCharCode(file(t)+97);return""}(i,r,o)),e&ne.ANY_CAPTURE&&(l+="x"),l+=algebraic(o))),t||(e&ne.KQSIDE_CASTLE?(r=e>>M&j,o=e>>D&j):e&ne.DROP_OR_PROMOTE&&(i=ee[n]+he),inCheckAfterMove(i,r,o,e)&&(Ie(e,r,o,n),s=d,d=f,c=p,fe!==a.Chess&&isVariantWin()?l+="#":generateMoves()-d?l+="+":l+="#",f=d,d=s,p=c,reverseMove(ye.pop()))),l}function kingAttacked(e){return me[e]!==m&&function attacked(e,t){var n,r,o,a,i=F[b],s=b|e;for(n=0;n<8;++n)if(0==(136&(o=t+i[n]))&&((r=de[o])&s)===s)return!0;for(i=F[O],n=0;n<8;++n)for(o=t+(a=i[n]);0==(136&o);){if(r=de[o]){if(r&e&&$[t-o+119]&r){if(!(r&g))return!0;if(e===h?t-o<0:t-o>0)return!0}break}o+=a}return!1}(swapColor(e),me[e])}function inCheck(){return kingAttacked(he)}function inCheckmate(){return inCheck()&&0===generateMoves()}function inStalemate(){var e=!inCheck()&&0===generateMoves();return e&&fe===a.Bughouse&&!ue.isDependent&&(e=ue.siblingGame.inStalemate()),e}function insufficientMaterial(e){var t,n,r=0,o=0,a=0;for(n=0;n<120;++n)if(136&n&&(n+=8),t=de[n]){if(e&&0==(t&e))continue;if(100&t)return!1;if(t&b){if(o||r++)return!1}else if(t&_){if(r)return!1;if(++o,(rank(n)+n)%2&&++a,a&&o!==a)return!1}}return!0}function inThreefoldRepetition(){if(be<8)return!1;for(var e,t=getCurrentHash(),n=!1,r=be,o=!1,a=ye,i=a.length-1;;){if((i-=2)<0){if(a.id){i=a.atMoveNode+i+2,a=Oe[a.parentId];continue}if(-2===i)return!1;e=a.hash,o=!0}else e=a[i].hash,a[i].halfMoves>r||r<2?o=!0:r=a[i].halfMoves;if(e[0]===t[0]&&e[1]===t[1]){if(n)return!0;n=!0}if(o)return!1}}function modifyHand(e){var t,n,o,i,s,c,l,u,d,f=e.move;if(fe===a.Crazyhouse||f&ne.DROP?(n=ue._hand,s=e.hash,d=e.color):(n=ue.siblingGame._hand,e.handSibling=!0,pe&&((c=ue.siblingGame._history()).length?s=c[c.length-1].hash:(c.hash||(c.hash=ue.siblingGame._hashPosition()),s=c.hash)),d=swapColor(e.color)),e.captured){switch((e.captured&C?g:e.captured&S)&S){case g:l=0;break;case b:l=1;break;case _:l=2;break;case E:l=3;break;default:l=4}t=1<<J[l],pe&&(i=n[d]>>J[l]&Z[l],u=r.zobristPiece[i+63*l+(d===h?0:315)])}else t=-1<<J[o=f>>R],pe&&(i=n[d]>>J[o]&Z[o],u=r.zobristPiece[i-1+63*o+(d===h?0:315)]);n[d]+=t,e.handChange=t,pe&&hashNum(s,[31*u[0]>>>0,17*u[1]>>>0])}function makeMoveChess(e,t,n,o){var a,i,s,c,l,u,d,f,p=he,b=swapColor(p),_={move:e,epSquare:ge,halfMoves:be,castlingW:ve[h],castlingB:ve[v],color:p},y=p===h;pe&&(c=getCurrentHash(),_.hash=c,hashNum(c,r.zobristTurn),ge!==m&&hashEP(de,c,ge+(y?16:-16),g|p)),0==(e&ne.KQSIDE_CASTLE)?Te&&e&ne.DROP?(de[n]=ee[o]|p,pe&&hashNum(c,r.zobristPiece[64*r.zobristPieceValueNumbers[de[n]]+8*(7-rank(n))+file(n)]),modifyHand(_),d=0):(d=de[t],(f=de[n])&&(_.captured=f,pe&&hashNum(c,r.zobristPiece[64*r.zobristPieceValueNumbers[de[n]&N]+8*(7-rank(n))+file(n)]),f&E&&ve[b]&&(Ce?rank(n)===(y?0:7)&&(s=1<<file(n),ve[b]&s&&(ve[b]^=s,pe&&(s>1<<file(me[p])?hashNum(c,r.zobristCastle[b-1]):hashNum(c,r.zobristCastle[b+1])))):n===(y?7:119)?ve[b]&ne.KSIDE_CASTLE&&(ve[b]^=ne.KSIDE_CASTLE,pe&&hashNum(c,r.zobristCastle[b-1])):n===(y?0:112)&&ve[b]&ne.QSIDE_CASTLE&&(ve[b]^=ne.QSIDE_CASTLE,pe&&hashNum(c,r.zobristCastle[b+1])))),e&ne.PROMOTION?de[n]=ee[o]|p|C:de[n]=de[t],de[t]=0,pe&&(hashNum(c,r.zobristPiece[64*r.zobristPieceValueNumbers[d&N]+8*(7-rank(t))+file(t)]),hashNum(c,r.zobristPiece[64*r.zobristPieceValueNumbers[de[n]&N]+8*(7-rank(n))+file(n)]))):d=O,e&ne.EP_CAPTURE?(y?(u=n+16,l=6):(u=n-16,l=8),_.captured=g|b,de[u]=0,pe&&hashNum(c,r.zobristPiece[64*r.zobristPieceValueNumbers[g|b]+8*(l-rank(n))+file(n)])):d&O?(Ce?(e&ne.KQSIDE_CASTLE&&(de[n]=0,de[t]=0,e&ne.KSIDE_CASTLE?y?(a=118,i=117):(a=6,i=5):y?(a=114,i=115):(a=2,i=3),de[a]=p|O,de[i]=p|E,pe&&(hashNum(c,r.zobristPiece[64*r.zobristPieceValueNumbers[O|p]+8*(7-rank(t))+file(t)]),hashNum(c,r.zobristPiece[64*r.zobristPieceValueNumbers[E|p]+8*(7-rank(n))+file(n)]),hashNum(c,r.zobristPiece[64*r.zobristPieceValueNumbers[O|p]+8*(7-rank(a))+file(a)]),hashNum(c,r.zobristPiece[64*r.zobristPieceValueNumbers[E|p]+8*(7-rank(i))+file(i)]))),pe&&(0!=(ve[p]&ve[p]-1)?(hashNum(c,r.zobristCastle[p-1]),hashNum(c,r.zobristCastle[p+1])):ve[p]>1<<file(me[p])?hashNum(c,r.zobristCastle[p-1]):hashNum(c,r.zobristCastle[p+1])),me[p]=a||n):(e&ne.KQSIDE_CASTLE&&(de[n]=de[t],de[t]=0,e&ne.KSIDE_CASTLE?(a=n-1,i=n+1):(a=n+1,i=n-2),de[a]=de[i],de[i]=0,pe&&(hashNum(c,r.zobristPiece[64*r.zobristPieceValueNumbers[O|p]+8*(7-rank(t))+file(t)]),hashNum(c,r.zobristPiece[64*r.zobristPieceValueNumbers[E|p]+8*(7-rank(i))+file(i)]),hashNum(c,r.zobristPiece[64*r.zobristPieceValueNumbers[O|p]+8*(7-rank(n))+file(n)]),hashNum(c,r.zobristPiece[64*r.zobristPieceValueNumbers[E|p]+8*(7-rank(a))+file(a)]))),pe&&(ve[p]&ne.KSIDE_CASTLE&&hashNum(c,r.zobristCastle[p-1]),ve[p]&ne.QSIDE_CASTLE&&hashNum(c,r.zobristCastle[p+1])),me[p]=n),ve[p]=0):d&E&&ve[p]&&(Ce?rank(t)===(y?7:0)&&(s=1<<file(t),ve[p]&s&&(ve[p]^=s,pe&&(s>1<<file(me[p])?hashNum(c,r.zobristCastle[p-1]):hashNum(c,r.zobristCastle[p+1])))):t===(y?119:7)?ve[p]&ne.KSIDE_CASTLE&&(ve[p]^=ne.KSIDE_CASTLE,pe&&hashNum(c,r.zobristCastle[p-1])):t===(y?112:0)&&ve[p]&ne.QSIDE_CASTLE&&(ve[p]^=ne.QSIDE_CASTLE,pe&&hashNum(c,r.zobristCastle[p+1]))),e&ne.BIG_PAWN?(ge=y?n+16:n-16,pe&&hashEP(de,c,n,g|b)):ge=m,d&g||e&ne.ANY_CAPTURE?be=0:be++,he=b,ye.push(_)}function makeMoveVariant(e,t,n,o){var i,s=he;makeMoveChess(e,t,n,o),i=ye[ye.length-1],Te?(be=i.halfMoves+1,i.captured&&modifyHand(i),fe===a.Bughouse&&(i.bughouseOrder=ue.moveCount()-1+ue.siblingGame.moveCount())):fe===a["3-check"]&&kingAttacked(he)&&(i.checked=!0,pe&&Ne[s]&&hashNum(i.hash,r.zobristCheck[Ne[s]+(s===h?-1:2)]),++Ne[s],pe&&hashNum(i.hash,r.zobristCheck[Ne[s]+(s===h?-1:2)]))}function reverseMove(e){var t,n,r=he,o=swapColor(r),i=e.move,s=i>>D&j,c=i>>M&j;if(he=o,ve[v]=e.castlingB,ve[h]=e.castlingW,ge=e.epSquare,be=e.halfMoves,fe){if(Ce&&i&ne.KQSIDE_CASTLE)return i&ne.KSIDE_CASTLE?o===h?(n=118,t=117):(n=6,t=5):o===h?(n=114,t=115):(n=2,t=3),de[n]=0,de[t]=0,de[c]=o|O,de[s]=o|E,void(me[o]=c);if(e.handChange&&(fe!==a.Crazyhouse&&e.handSibling?ue.siblingGame._hand[swapColor(o)]-=e.handChange:ue._hand[o]-=e.handChange),i&ne.DROP)return void(de[s]=0);e.checked&&--Ne[o]}i&ne.PROMOTION?(de[c]=g|o,i&ne.CAPTURE?de[s]=e.captured:de[s]=0):(de[c]=de[s],i&ne.KQSIDE_CASTLE?(de[s]=0,i&ne.KSIDE_CASTLE?(t=s+1,n=s-1):(t=s-2,n=s+1),de[t]=o|E,de[n]=0,me[o]=c):(s===me[o]&&(me[o]=c),i&ne.CAPTURE?de[s]=e.captured:(de[s]=0,i&ne.EP_CAPTURE&&(de[s-(o===h?-16:16)]=g|r))))}function beautifyMove(e,t,n){var r,o,a=e>>D&j,i={color:he,to:algebraic(a),flags:e&j};return Te&&0!=(e&ne.DROP)?(o=e>>R,i.drop=o,i.piece=ee[o]+he):(r=e>>M&j,i.from=algebraic(r),i.piece=de[r],e&ne.PROMOTION&&(o=e>>R,i.promotion=ee[o]+he),e&ne.CAPTURE?i.captured=de[a]:e&ne.EP_CAPTURE&&(i.captured=g|swapColor(he))),i.san=t||moveToSan(e,n),i}function isVariantWin(){return fe===a["3-check"]?3===Ne[swapColor(he)]:fe===a["King of the Hill"]?kingOfTheHillWin(me[swapColor(he)]):void 0}function isBughouseWin(){if(fe===a.Bughouse)return ue.siblingGame.inCheckmate()}function createVariation(){var e=[],t=generateFen(),n=ye.length-1,r=ye[n];return!!r&&(e.parentId=Ae,e.id=Oe.length,ye.curFen=t,r.lines||(r.lines=[]),r.lines.push(e.id),r.move?reverseMove(r):(ge=r.epSquare,--be,he=swapColor(he)),he===v&&--_e,e.atMoveNode=n,e.hash=n?ye[n-1].hash:ye.hash,Ae=e.id,Oe.push(e),ye=e,!0)}function selectLine(e){var t=generateFen();ye.curFen=t,ye=Oe[e],Ae=e,load(ye.curFen,fe,!0,!0)}return ue={WHITE:h,BLACK:v,PAWN:g,KNIGHT:b,BISHOP:_,ROOK:E,QUEEN:y,KING:O,FLAGS:ne,load:load,reset:reset,moves:function moves(e){var t,n,r,moves=[],o=moveToSan;for(e&&(e.verbose&&(o=beautifyMove),e.type&&(n=e.type|e.type<<24),r=e.noDrop),generateMoves(n,r),t=0;t<f;++t)moves.push(o(u[t]));return moves},inCheck:inCheck,inCheckmate:inCheckmate,inStalemate:inStalemate,isBughouseWin:isBughouseWin,in50MoveRule:function in50MoveRule(){return be>=100},inDraw:function inDraw(){return be>=100||inStalemate()||insufficientMaterial()||inThreefoldRepetition()||Boolean(function isBughouseDraw(){if(fe===a.Bughouse)return ue.siblingGame.in50MoveRule()||ue.siblingGame.inThreefoldRepetition()}())},insufficientMaterial:insufficientMaterial,inThreefoldRepetition:inThreefoldRepetition,isVariantWin:isVariantWin,gameOver:function gameOver(){return ue.inDraw()||inCheckmate()||Boolean(isVariantWin())||Boolean(isBughouseWin())},isPositionValid:function isPositionValid(e){var t,n,r,o=0;if(!1!==(e=e||{}).pawns)for(t=0;t<=119;){if((r=de[t])&g)return!1;8==++t&&(t=112)}if(!1!==e.kings){for(t=0;t<=119;++t)if(136&t&&(t+=8),(r=de[t])&O){if(++o>2)return!1;if(n&&n&r)return!1;n=r&A}if(2!==o)return!1}return!1===e.check||!1===e.kings&&me[swapColor(he)]===m||!kingAttacked(swapColor(he))},validateFen:validateFen,fen:generateFen,pgn:function pgn(e){return(e=e||{}).useResultHeader||Ae||(isVariantWin()||inCheckmate()?Se.Result=he===v?"1-0":"0-1":ue.inStalemate()?Se.Result="1/2-1/2":isBughouseWin()&&(Se.Result=ue.siblingGame.turn()===h?"1-0":"0-1")),se(e,Se,Oe,Ee,fe,ue)},loadPgn:function loadPgn(e,t,n){var r,o,i,s,c,l,u,d,f,p={},m=0;if("number"!=typeof t&&(n=n||t,t=0),n=n||{},"string"==typeof e&&(n.singleGame&&(e=e.replace(/(?:\r?\n\s*){2,}/g,"\n")),e=ue.tokenizePgn(e,n)),t<0&&(t=e.length+t),!(s=e[t]))return!1;for(reset(),o=s.length,r=0;r<o&&"tagName"===(i=s[r]).type;++r){if(!s[r+1]||"tagValue"!==s[r+1].type)return!1;++r,"FEN"===i.value?u=completeFen(s[r].value):p[i.value]=s[r].value}if(p.Variant&&!u&&(u=x),u||"1"===p.SetUp)if("0"===p.SetUp)p.FEN=u;else if(!u||!load(u,p.Variant))return!1;for(ue.header(p),l=(c=ue)._history();r<o;++r)if("san"===(i=s[r]).type&&0===m){if(!c.move(i.value)){if(!n.skipBadLines||!(0!==Ae||ye.length&&n.allowBadMainLine))return reset(),!1;m=1}}else if("result"===i.type&&"*"===Se.Result)setHeader(["Result",i.value]);else if("a"===i.type&&0===m&&l[l.length-1])l[l.length-1].annotation=i.value;else if("nag"!==i.type&&"aa"!==i.type||0!==m||!l[l.length-1])if("comment"===i.type&&0===m)l.length?(i.value.trim()&&(l[l.length-1].comment=i.value),i.commands&&(l[l.length-1].commands=i.commands,i.commands.clk&&(l[l.length-1].time=(d=i.commands.clk,f=void 0,10*(3600*(f=d.split(":"))[0]+60*f[1]+1*f[2]))))):(l.initComment=String(i.value),i.commands&&(l.commands=i.commands));else if("variationStart"===i.type){if(m>0)++m;else if(!createVariation())return reset(),!1;l=c._history()}else"variationEnd"===i.type?(m>0&&--m,0===m&&(selectLine(l.parentId),l=c._history())):"number"===i.type&&fe===a.Bughouse&&(l=(c=/b/i.test(i.value.slice(-1))?ue.siblingGame:ue)._history());else l[l.length-1].additionalAnnotation||(l[l.length-1].additionalAnnotation=[]),-1===l[l.length-1].additionalAnnotation.indexOf(i.value)&&l[l.length-1].additionalAnnotation.push(i.value);return!0},header:function header(e){return Array.isArray(e)?setHeader(e):"object"===s()(e)?(Object.keys(e).forEach(function(t){setHeader([t,e[t]])}),Se):Se},turn:function turn(e){return e!==h&&e!==v||(he=e),he},move:function playMove(e){var t,n,o,i,s,l,d,p,v,b,_,E,y;if("string"==typeof e){switch(e[i=e.length-1]){case"+":case"#":e=e.substr(0,i)}for(v=B.indexOf(e[0])>6?H[e[0]]:"O"===e[0]?O:g,Te&&(-1===e.indexOf("@")?b=!0:(b=!1,v<<=24)),generateMoves(v,b),i=0;i<f;++i)if(e===(l=moveToSan(u[i],!0))){n=u[i];break}if(!n)return"--"===e?function makeNullMove(){var e,t={color:he,san:"--",epSquare:ge},n={color:he,san:"--"};return pe&&(e=getCurrentHash(),t.hash=e,hashNum(e,r.zobristTurn),ge!==m&&hashEP(de,e,ge+(he===h?16:-16),g|he)),ge=m,be++,(he=swapColor(he))===h&&++_e,ye.push(t),n}():(e=Chess.fixSanMove(e,de,he))?playMove(e):null;d=n>>M&j,p=n>>D&j,o=n>>R}else{if(e.drop){switch(e.drop){case"p":o=0;break;case"n":o=1;break;case"b":o=2;break;case"r":o=3;break;case"q":o=4;break;default:return null}v=1<<26+o}else{if(e.promotion)switch(e.promotion){case"q":o=4;break;case"n":o=1;break;case"r":o=3;break;case"b":o=2;break;default:return null}d=c[e.from],b=!0,v=de[d]&S}for(p=c[e.to],t=((o?o<<R:0)|p<<D)>>M|d,generateMoves(v,b),i=0;i<f;++i)if(u[i]>>M===t){n=u[i];break}if(!n)return(e=Chess.fixObjMove(e,de,he))?playMove(e):null}return y=n&ne.DROP_OR_PROMOTE?ee[o]+he:de[d],s=beautifyMove(n,l,!0),_=inCheckAfterMove(y,d,p,n),Ie(n,d,p,o),_&&(fe!==a.Chess&&isVariantWin()?s.san+="#":0===generateMoves()?s.san+="#":s.san+="+"),(E=ye[ye.length-1]).san=s.san,s.piece&C&&(E.promoted=!0),he===h&&++_e,s},undo:function undo(e){var t=ye.pop();return t?(he===h&&--_e,t.move?(reverseMove(t),!!e||beautifyMove(t.move,t.san)):(ge=t.epSquare,--be,he=swapColor(he),!!e||{san:"--",color:t.color})):null},clear:function clear(e){_clear(e)},put:function put(e,t,n){var r,o=c[t],a=!1,i=de[o],s=i&A,l=e.color;if(isNaN(o)||!e.type||!l||-1===B.indexOf(e.type))return!1;if(de[o]=H[e.type]|l|(e.promoted?C:0),de[o]&O&&(me[l]=o),i&&de[me[s]]&&de[me[s]]!==(O|s)){for(r=0;r<120;++r)136&r&&(r+=8),de[r]===(O|s)&&(me[s]=r,a=!0);a||(me[s]=m)}return n||load(generateFen(),fe,!0,!1),!0},get:get,remove:function remove(e,t){var n,r=de[c[e]],o=get(e),a=r&A;if(de[c[e]]=0,r&O)for(me[a]=m,ve[a]=0,n=0;n<120;++n)if(136&n&&(n+=8),de[n]===(O|a)){me[r.color]=n;break}return t||load(generateFen(),fe,!0,!1),o},history:function history(e,t){for(var n,r=[],o=ye,a=o.length;;){if(-1==--a){if(o.id&&!t){a=o.atMoveNode,o=Oe[o.parentId];continue}break}e?((n=beautifyMove(o[a].move,o[a].san)).color=o[a].color,!a&&o.initComment&&(n.firstComment=o.initComment),void 0!==o[a].comment&&(n.comment=o[a].comment),void 0!==o[a].time&&(n.time=o[a].time),void 0!==o[a].annotation&&(n.annotation=o[a].annotation),void 0!==o[a].additionalAnnotation&&(n.additionalAnnotation=o[a].additionalAnnotation),void 0!==o[a].commands&&(n.commands=o[a].commands),void 0!==o[a].captured&&(n.captured=o[a].captured),void 0!==o[a].promoted&&(n.promoted=o[a].promoted),void 0!==o[a].lines&&(n.lines=o[a].lines),void 0!==o[a].bughouseOrder&&(n.bughouseOrder=o[a].bughouseOrder),B.indexOf(o[a].san[0])>6?n.piece=H[o[a].san[0]]:"O"===o[a].san[0]?n.piece=O:n.piece=g,n.piece|=n.color,r.unshift(n)):r.unshift(o[a].san)}return r},hashes:function hashes(){for(var hashes=[],e=ye,t=e.length;;){if(-1==--t){if(e.id){t=e.atMoveNode,e=Oe[e.parentId];continue}e.hash||getCurrentHash(),hashes.unshift(e.hash);break}hashes.unshift(e[t].hash)}return hashes},moveCount:function moveCount(){return ye.length},startingMoveNumber:function startingMoveNumber(){return Ee},completeFen:completeFen,createVariation:createVariation,selectLine:selectLine,hash:function hash(){var hash=getCurrentHash();return fe!==a.Bughouse||ue.isDependent?hash:[hash,ue.siblingGame.hash()]},hashing:function hashing(e){pe=e,fe!==a.Bughouse||ue.isDependent||ue.siblingGame.hashing(pe)},hand:function hand(){if(Te)return handToString(ue._hand[h],!0)+handToString(ue._hand[v])},checks:function checks(){if(fe===a["3-check"])return[Ne[h],Ne[v]]},tokenizePgn:ce,_hand:[],_history:function _history(e){return e&&(Ae=(ye=e).id),ye},_lines:function _lines(){return Oe},_hashPosition:hashPosition,_board:function _board(){return de}},ie&&load(ie,le)||reset(),ue}return Chess.fixSanMove=function(e,t,n){var r,o,a;if(/0|[?!+#]$|[18][QNRB]$|^P/.test(e))return e.replace(/[?!+#]+$/,"").replace(/0/g,"O").replace(/([18])([QNRB])$/,"$1=$2").replace(/^P/,"");if(o=e.indexOf("=")>0?-4:-2,r=e.substr(o,2),n=swapColor(n),t[c[r]]&n||/^[a-h]x?[a-h]/.test(e)){if(-1===e.indexOf("x"))return e.slice(0,o)+"x"+e.substr(o)}else if(e.indexOf("x")>-1)return e.replace("x","");return(a=e.match(/^([KQNRB]?)([a-h][1-8]?|[1-8])(x?[a-h][1-8])=?(.?)$/))?t[c[a[2]]]?{from:a[2],to:r,promotion:a[4].toLowerCase()}:a[1]+a[3]+a[4]:void 0},Chess.fixObjMove=function(e,t,n){if(t[c[e.from]]===(O|n)&&e.to&&e.from[1]===e.to[1]){if(e.from<e.to)return"O-O";if(e.from>e.to)return"O-O-O"}},Chess}(),a=function ENGINE_MANAGER(e){var t="rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1",n=["bench","d","eval","flip","isready","perft","ponderhit","stop","uci","ucinewgame"],o=[{cmd:"position",args:["fen","startpos","moves","continuation"]},{cmd:"go",args:["binc","btime","confidence","depth","infinite","mate","mindepth","mintime","maxdepth","maxtime","movestogo","movetime","ponder","searchmoves","shallow","winc","wtime"]}],a=["moves","searchmoves"],i=["ponder","infinite","startpos"],s=/Total Evaluation[\s\S]+\n$/i;function createWebWorker(e,t,n){var r=new Worker(e||"stockfish.js"),o={terminate:function terminate(){r.terminate()},postMessage:postMessage,addEventListener:function addEventListener(e,t){o["on"+e]=t}};function postMessage(e){r.postMessage(e)}return r.onmessage=function(e){o.onmessage(e)},r.onerror=function(a){if(t.pathToNonWasmEngine&&t.pathToNonWasmEngine!==e){a.preventDefault&&a.preventDefault();try{r.terminate()}catch(a){}return(r=createWebWorker(t.pathToNonWasmEngine,t,n)).onmessage=function(e){o.onmessage(e)},function requeue(e){e.length&&e.forEach(function(e){e.message="",postMessage(e.cmd)})}(n._activeCommands()),!1}if(t.onError)return t.onError(a)},o}function parseSearchLine(e){var t,n,r,o,a,i={},s=["lowerbound","upperbound","score"],c=["depth","seldepth","time","nodes","multipv","cp","mate","currmovenumber","hashfull","nps","tbhits","sbhits","cpuload"],l=["depth","seldepth","time","nodes","pv","multipv","score","cp","mate","lowerbound","upperbound","currmove","currmovenumber","hashfull","nps","tbhits","sbhits","cpuload","string","refutation","currline","bestmove","ponder","baseTurn","pvSan","bestmoveSan","ponderSan","bmc"],u=["pv","pvSan","string","refutation","currline"];for(n=(t=e.split(" ")).length,r="info"===t[0]?1:0,i.mtype=t[0];r<n;r+=1)t[r]&&(!a||o&&l.indexOf(t[r])>-1?(a=t[r],s.indexOf(a)>-1?(i[a]=!0,a=null):o=u.indexOf(a)>-1||-1===l.indexOf(a)):(c.indexOf(a)>-1&&(t[r]=Number(t[r])),o?(void 0===i[a]&&(i[a]=[]),i[a].push(t[r])):(i[a]=t[r],a=null)));return"(none)"===i.bestmove&&(i.bestmove=void 0,i.bestmoveSan=void 0),"(none)"===i.ponder&&(i.ponder=void 0,i.ponderSan=void 0),i}function getFirstWord(e){var t=e.indexOf(" ");return-1===t?e:e.substr(0,t)}return function loadEngine(c,l){var u,d,f={},p=function createWorker(e,t){var n=e.pathToNonWasmEngine&&"undefined"==typeof WebAssembly?e.pathToNonWasmEngine:e.enginePath||e.pathToEngineWorker;if(e.pathToWasmEngine&&(n+="#"+e.pathToWasmEngine),"undefined"!=typeof Worker)return createWebWorker(n,e,t)}(c,f),m=[],h=[];function onmessage(t){var n,r,o,a,i,c="string"==typeof t?t:t.data;if(f)if(c.indexOf("\n")>-1)for(a=c.split("\n"),i=0;i<a.length;i+=1)onmessage(a[i]);else if(e.log&&console.log("debug (onmessage): "+c),f.stream&&f.stream(c),m.length&&0!==c.indexOf("No such option")&&0!==c.indexOf("id ")&&0!==c.indexOf("Stockfish")&&0!==c.indexOf("info string variant")&&(r=function determineQueueNum(e,t){var n,r,o,a,i=getFirstWord(e);if("bench"!==t[0].cmd&&"perft"!==t[0].cmd)for(n="uciok"===i||"option"===i?"uci":"readyok"===i||"ready"===i?"isready":"json"===i?"fetch":"bestmove"===i||"info"===i?"go":"other",a=t.length,o=0;o<a;o+=1)if((r=getFirstWord(t[o].cmd))===n||"other"===n&&("d"===r||"eval"===r))return o;return 0}(c,m),o=m[r])){if(o.stream&&!o.discard&&o.stream(c),void 0===o.message?o.message="":""!==o.message&&(o.message+="\n"),o.message+=c,"uciok"===getFirstWord(c))n=!0;else if("readyok"===getFirstWord(c)||"ready"===getFirstWord(c))n=!0,f.ready=!0;else if(0!==c.indexOf("bestmove")&&"bestmove"!==getFirstWord(c)||"bench"===o.cmd)if("d"===o.cmd)0!==c.indexOf("Legal uci moves")&&0!==c.indexOf("Key is")||(o.done=!0,n=!0);else if("fetch json"===o.cmd)try{o.message=JSON.parse(o.message.replace(/^json /gm,"").replace(/\n/g,"")),n=!0}catch(t){}else"eval"===o.cmd?s.test(o.message)&&(n=!0):0===c.indexOf("pawn key")?n=!0:0===c.indexOf("Nodes/second")?n=!0:0===c.indexOf("Unknown command")&&(n=!0);else n=!0,o.message=c;n&&(m.splice(r,1),o.cb&&!o.discard?o.cb(o.message):o.ondiscard&&o.ondiscard())}}function bestMoveSearch(){var n,r,o,a,i,s=1,c=[],l=[],d=null,p=h[0].args,m=h[0].cb,v=h[0].stream,g=p.timeout,b=1,_=14;function convertpv(e){var t=[],n=l[e]||createSanPv(c[e]);return c[e].forEach(function oneach(e,r){t.push({moveSan:n[r],moveLan:e})}),t}function getpv(e,t,n,r){var o;for(o=c.length-1;o>=0;o-=1)if(c[o][0]===e)return convertpv(o);return n?[{moveSan:t,moveLan:e},{moveSan:r,moveLan:n}]:t?[{moveSan:t,moveLan:e}]:[]}function convertScore(e){0===e.mate?(e.mateIn=0,e.cp=-31800*b):(e.mateIn=Number(e.mate*b)||null,"number"!=typeof e.mateIn||isNaN(e.mateIn)||"number"==typeof e.cp?(e.cp*=b,9===Math.abs(e.cp)&&(e.cp=0),p.normalize&&e.depth<=_&&"number"==typeof loadEngine._previousCP&&1===e.multipv&&function normalize(e){var t=.03*Math.pow(32,e.depth/_);e.cp=loadEngine._previousCP+(e.cp-loadEngine._previousCP)*t}(e)):e.cp=31800*b*(e.mate/Math.abs(e.mate))),e.score=e.cp/100}function addBestMoveProps(t){var i;if(t.baseTurn=o,t.cp=n,t.score=n/100,t.mate=r,t.mateIn=d,t.depth=s,t.moveLan=t.bestmove,t.moveLan){if(t.move=e.uciToObj(t.moveLan)[0],!(i=a.move(t.move)))throw new Error("Bad moveLan in line: "+t.moveLan+" at "+a.fen()+"\ndata: "+JSON.stringify(t)+"\nargs: "+JSON.stringify(p));if(t.moveSan=t.bestmoveSan=i.san,t.ponder&&"(none)"!==t.ponder){if(!(i=a.move(e.uciToObj(t.ponder)[0])))throw new Error("Bad ponder in line: "+t.ponder+" at "+a.fen()+"\ndata: "+JSON.stringify(t)+"\nargs: "+JSON.stringify(p));t.ponderSan=i.san,a.undo(!0)}a.undo(!0)}}function createSanPv(t){var n,r,o=t.length,i=[];for(n=0;n<o;++n){if(!(r=a.move(e.uciToObj(t[n])[0])))throw new Error("Bad pv in line: "+t[n]+" ("+n+") at "+a.fen()+"\npv: "+JSON.stringify(t)+"\nargs: "+JSON.stringify(p));i.push(r.san)}for(n=0;n<o;++n)a.undo(!0);return i}function createTimeout(){g&&(clearTimeout(u),u=setTimeout(function(){f.stop(),m&&(m(),m=void 0)},g))}p.timeout=void 0,h[0].started=!0,p.difficulty>=0&&p.difficulty<20?(f.setoption("Skill Level",p.difficulty),p.maximumError>=0&&p.maximumError<=4999&&f.setoption("Skill Level Maximum Error",p.maximumError),p.errorProbability>=1&&p.errorProbability<=128&&f.setoption("Skill Level Probability",p.errorProbability)):f.setoption("Skill Level",20),void 0!==p.contempt?f.setoption("Contempt",p.contempt):f.setoption("Contempt","0"),p.multiPv>1?f.setoption("MultiPV",p.multiPv):f.setoption("MultiPV",1),p.movetime||p.wtime&&p.btime||p.depth||(p.btime=p.btime||72e3,p.wtime=p.wtime||72e3),!p.startpos&&p.fen||p.moves||p.variant?(a=e.createGame({fen:p.fen?(i=p.fen,(i+"").replace(/\[([qrbnp]*)\]/i,"/$1").replace(/([0-3])\+([0-3]) (\d+ \d+)/,function(e,t,n,r){return r+" +"+(3-t)+"+"+(3-n)})):t,moves:p.moves,variant:p.variant,disableHashing:!0})).turn()===a.WHITE?o="w":(o="b",b=-1):(o="w",a=e.createGame({disableHashing:!0})),f.setVariant(p.variant),f.position(p),f.go(p,function returnBestMove(e){var t=parseSearchLine(e);if(addBestMoveProps(t),s>_&&n<5e3&&n>-5e3&&(loadEngine._previousCP=n),t.pv=getpv(t.moveLan,t.moveSan),1===t.pv.length&&t.ponder&&(t.pv=getpv(t.moveLan,t.moveSan,t.ponder,t.ponderSan)),m)try{m(t)}catch(e){console.error(e)}h.shift(),h.length>0&&bestMoveSearch(),clearTimeout(u)},function streamInfo(e){var t=parseSearchLine(e);t.score&&(t.baseTurn=o,convertScore(t),1!==t.multipv&&0!==t.depth||(n=t.cp,r=t.mate,d=t.mateIn)),t.pv&&v&&(t.pvSan=createSanPv(t.pv)),!t.pv||t.lowerbound||t.upperbound||(c.push(t.pv),v&&l.push(t.pvSan)),t.depth>s?s=t.depth:"bestmove"===t.mtype&&addBestMoveProps(t),!v||0===t.mateIn&&t.pv||v(t),createTimeout()}),createTimeout()}function startUp(){f.isready(function onstart(){c.settings?f.uci(function onuci(){Object.keys(c.settings).forEach(function oneach(e){f.setoption(e,c.settings[e])}),l&&l(f)}):l&&l(f)})}return f.send=function(t,n,r){var o;t=String(t).trim(),e.log&&console.log("debug (send): "+t),"ucinewgame"!==t&&"flip"!==t&&"stop"!==t&&"ponderhit"!==t&&0!==t.indexOf("position")&&0!==t.indexOf("setoption")?m[m.length]={cmd:t,cb:n,stream:r}:o=!0,p&&(p.postMessage(t),o&&n&&setTimeout(n,0))},f._activeCommands=function(){return m},f.quit=function(){p&&p.terminate&&(p.terminate(),p=null,f.ready=void 0),clearTimeout(u)},n.forEach(function oneach(e){f[e]=function makeSCmd(t,n){f.send(e,t,n)}}),o.forEach(function oneach(e){f[e.cmd]=function makeCCmd(t,n,r){var o=[e.cmd];d&&t.fen&&(t.fen=function convertStockfishVariantFen(e){return(e+"").replace(/^([^\/]+)((?:\/[^\/]+){7})\/([qrbnp]*)/i,"$1$2[$3]").replace(/( \d+ \d+) \+([0-3])\+([0-3])/,function(e,t,n,r){return" "+(3-n)+"+"+(3-r)+t})}(t.fen)),e.args.forEach(function oneach(e){if(t[e]||0===t[e]){if(a.indexOf(e)>-1){if(!t[e]||!t[e].length)return;Array.isArray(t[e])&&(t[e]=t[e].join(" "))}o.push(e),-1===i.indexOf(e)&&o.push(t[e])}}),f.send(o.join(" "),n,r)}}),f.setoption=function(e,t){f.send("setoption name "+e+" value "+t)},f.setVariant=function(e){var t;e!==d&&(t=String(e).toLowerCase().replace(/ |-/g,""),e&&"chess"!==t?"chess960"===t?(f.setoption("UCI_Variant","chess"),f.setoption("UCI_Chess960","true")):("threecheck"===t&&(t="3check"),f.setoption("UCI_Variant",t),f.setoption("UCI_Chess960","false")):(t=void 0,f.setoption("UCI_Variant","chess"),f.setoption("UCI_Chess960","false")),d=t)},f.loadBook=function(e,t){r.loadBook(e,function onload(n,r){f.book=r,f.pathToBook=e,f.bookLoaded=!0,n&&(console.error("Error loading opening book."),console.error(n),f.pathToBook=null,f.bookLoaded=!1),t()})},f.getBestMove=function(t,n,r){var o;if((t=t||{}).fen=t.fen||t.baseFen,t.is960&&(t.variant="Chess960"),f.bookLoaded&&t.useBook&&(o=function getBookMove(t){var n,r,o;if(o=t.moves&&t.moves.length?e.getFenFromMoves(t.fen,t.moves,t.variant):t.fen,(n=f.book.pick({fen:o,type:void 0!==t.bookPick?t.bookPick:"random",chess960:"Chess960"===t.variant}))&&(e.getLegalMoves(o,t.variant).some(function(e){if(e.from+e.to+(e.promotion||"")===n)return r=e,!0}),r))return{moveSan:r.san,moveLan:n,move:{from:r.from,to:r.to,promotion:r.promotion||null},baseTurn:o.split(" ")[1],pv:[{moveSan:r.san,moveLan:n}],depth:null,score:null,mateIn:null,isBookMove:!0}}(t)))return setTimeout(function(){o.mtype="bestmove",n(o)},0);!function queueBestMoveSearch(e,t,n){h.push({args:e,cb:t,stream:n}),1===h.length&&bestMoveSearch()}(t,n,r)},f.stopAll=function(t){var n,r=m.length,o=0;function ondiscard(){0==(o-=1)&&t()}for(h=[],n=0;n<r;n+=1)e.log&&console.log("debug (stop_moves): "+n,getFirstWord(m[n].cmd)),"go"!==getFirstWord(m[n].cmd)||m[n].discard||(f.stop(),m[n].discard=!0,t&&(o+=1,m[n].ondiscard=ondiscard));t&&!o&&f.isready(t)},f.restartEngine=function(e){return f.stopAll(),f.quit(),m=[],h=[],f.bookLoaded&&!c.book&&((c=JSON.parse(JSON.stringify(c))).book=f.book),loadEngine(c,e)},f.stopFast=function(e,t){var n;f.stopAll(function(){clearTimeout(n),e(f)}),n=setTimeout(function(){f.restartEngine(e)},t||5e3)},"undefined"!=typeof Worker&&(function addListener(){p.addEventListener("message",onmessage,!1)}(),c.book&&(f.book=c.book,f.bookLoaded=!0,f.pathToBook=c.pathToBook),!f.book&&c.pathToBook?f.loadBook(c.pathToBook,startUp):setTimeout(startUp,0),f.getFenFromMoves=e.getFenFromMoves,f.getLegalMoves=e.getLegalMoves,f.getPositionInfo=e.getPositionInfo,f.isFenValid=e.isFenValid,f.ready=!1,f)}},function(){var e,t=o(),n="rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1",i=252,c=255,l={4:"p",5:"P",6:"p",8:"n",9:"N",10:"n",16:"b",17:"B",18:"b",32:"r",33:"R",34:"r",64:"q",65:"Q",66:"q",128:"k",129:"K",130:"k"},u="pnbrq",d=512,f="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789!?{~}(^)[_]@#$,./&-*++=",p="qnrbkp";function decodeTCN(e){var t,n,r,o,a=e.length,i=[];for(t=0;t<a;t+=2)o={},n=f.indexOf(e[t]),(r=f.indexOf(e[t+1]))>63&&(o.promotion=p[Math.floor((r-64)/3)],r=n+(n<16?-8:8)+(r-1)%3-1),n>75?o.drop=p[n-79]:o.from=f[n%8]+(Math.floor(n/8)+1),o.to=f[r%8]+(Math.floor(r/8)+1),i.push(o);return i}function uciToObj(e){var t,n,r=e.split(" "),o=r.length,a=[];if(e)for(t=0;t<o;++t)4===(n=r[t]).length?"@"===n[1]?a.push({drop:n[0].toLowerCase(),to:n.substr(2,2)}):a.push({from:n.substr(0,2),to:n.substr(2,2)}):a.push({from:n.substr(0,2),to:n.substr(2,2),promotion:n[4]});return a}function isSameMove(e,t){return e.san===t.san||e.from==t.from&&e.to==t.to&&e.promotion==t.promotion&&e.drop==t.drop}function makePremove(e,n,r){var a,i,s,c,l,u=e.header().Variant,d=getPremoves(e.fen(),n,u);if(d){for(a=d.length-1;a>=0;--a)if(isSameMove(i=d[a],r)){s=!0;break}if(s)return i.drop?e.put({type:i.drop,color:n},i.to,!0):(c=e.remove(i.from,!0),i.flags===t.FLAGS.KSIDE_CASTLE?(l=e.remove("Chess960"===u?i.to:"h"+i.from[1],!0),e.put(c,"g"+i.from[1],!0),e.put(l,"f"+i.from[1],!0)):i.flags===t.FLAGS.QSIDE_CASTLE?(l=e.remove("Chess960"===u?i.to:"a"+i.from[1],!0),e.put(c,"c"+i.from[1],!0),e.put(l,"d"+i.from[1],!0)):(i.promotion&&(c.type=i.promotion,c.promoted=!0),e.put(c,i.to,!0))),i}if(r.from&&(r=o.fixObjMove(r,e._board(),n)))return makePremove(e,n,{san:r})}function getPieces(e,t){var n,r,o,a=t?{}:[],s=e._board();if(t)for(n=112;n>=0;++n)136&n&&(n-=24),(r=s[n])&&(a[o=f[7&n]+(8-(n>>4))]={type:l[r&i],color:3&r,promoted:0!=(r&d),square:o});else for(n=112;n>=0;++n)136&n&&(n-=24),(r=s[n])&&a.push({type:l[r&i],color:3&r,promoted:0!=(r&d),rank:8-(n>>4),file:1+(7&n)});return a}function makeMoves(e,t,n,r){var o,a,i,s,c,l,u,d,f,p;for(n=n||{},"string"==typeof t&&(t=t.trim().split(" ")),i=t.length,o=0;o<i;o+=1){if(c="b"===t[o].board||"B"===t[o].board?e.siblingGame:e,l="string"==typeof t[o]?uciToObj(t[o])[0]:t[o].san?t[o].san:t[o],!c.move(l)){if(!n.autoPromote){if(n.skipBadLines)break;return!1}if(!0===n.autoPromote?l.promotion="q":l.promotion=n.autoPromote,!c.move(l)){if(n.skipBadLines)break;return!1}}if(d=(u=c._history())[u.length-1],r&&(f=parseInt(r[o],10)),("number"!=typeof f||isNaN(f))&&(f=parseInt(t[o].time,10)),"number"!=typeof f||isNaN(f)||(d.time=f,f=void 0),t[o].firstComment&&(u.initComment=t[o].firstComment),t[o].comment&&(d.comment=t[o].comment),t[o].annotation&&(d.annotation=t[o].annotation),t[o].additionalAnnotation&&(d.additionalAnnotation=t[o].additionalAnnotation),t[o].commands&&(d.commands=t[o].commands),t[o].lines)for(s=t[o].lines.length,a=0;a<s;++a){if(p=e._history().id,e.createVariation(),!makeMoves(e,t[o].lines[a],n)&&!n.skipBadLines)return!1;e.selectLine(p)}}return!0}function createGame(e){var t,r;if((e=e||{}).game)return e.game;if(t=o(),e.analysis&&function extendChess(e){var t,r,a=-1,i=0;function fixContComment(t){var n=e._lines()[t.ids.line];return n.initComment&&(t.comment=(n.initComment+" "+(t.comment||"")).trim(),n.initComment=""),!0}e.extended||(e.extended=!0,t={header:e.header,load:e.load,loadPgn:e.loadPgn,createVariation:e.createVariation,undo:e.undo,pgn:e.pgn},e._move=e.move,e.premoves=[],e.undo=function(){return e.deletePosition(a,i)},e.isLegalMove=function(n){return!!e._move(n)&&t.undo(!0)},e.premove=function(t,n){var r,a=e.premoves.length,i=o();return a?i.load(e.premoves[a-1].fen,e.header().Variant):i.load(e.fen(),e.header().Variant),(r=makePremove(i,n,t))?(e.premoves.push({move:r,pieces:getPieces(i),fen:i.fen()}),r):null},e.getPieces=function(t){return getPieces(e,t)},e.origHistory=e.history,e.history=function(t,n){var r,o,a,i=[],c=e._history(),l=c.length,u=e._lines();for("boolean"==typeof t&&(t={verbose:t}),t=t||{},n&&(t.noParentLines=n),t.toCurrent&&(l=e.ids().move+1);;){if(-1==--l){if(c.id&&!t.noParentLines){l=c.atMoveNode,c=u[c.parentId];continue}break}if(t.verbose){for(o in r={},c[l])if(c[l][o]&&"object"===s()(c[l][o]))for(a in r[o]=c[l][o].constructor===Array?[]:{},c[l][o])r[o][a]=c[l][o][a];else r[o]=c[l][o];i.unshift(r)}else i.unshift(c[l].san)}return i},e._getPos=function(r,o){var s,c;return"number"!=typeof r&&(r=a),"number"!=typeof o&&(o=i),s=(c=e._lines())[o],r>=0?s[r]:s.id?s.atMoveNode?c[s.parentId][s.atMoveNode-1]:e._getPos(s.atMoveNode-1,s.parentId):{fen:t.header().FEN||n,hash:s.hash,initial:!0}},e.move=function(t,n){var r,o,s,c,l=e._history();if(t&&("string"==typeof t||t.to&&(t.from||t.drop))){if(i===l.id&&a<l.length-1||n){if(e.moveForward(n,t))return!0;a<l.length-1&&(e.selectPosition(a+1),e.createVariation(),l=e._history())}e.siblingGame&&(s=e.isDependent?e.siblingGame.fen():e.fen()),(r=e._move(t))&&(normalizeMoveObj(r),i=l.id,o=l[a=l.length-1],c=e._getPos(a-1),e.siblingGame?(e.isDependent?o.fen=e.siblingGame.fen():o.fen=e.fen(),o.beforeFen=s):(o.fen=e.fen(),o.beforeFen=c.fen),c.initial?(o.moveNumber=0,o.previous=null):(o.moveNumber=c.moveNumber+1,o.previous=c.ids,c.isContinuation&&fixContComment(c)),i&&0===a&&e._lines()[l.parentId][l.atMoveNode].move===o.move&&(o.isContinuation=!0),o.flags=r.flags,o.to=r.to,o.from=r.from,o.drop=r.drop,o.capturedStr=r.captured,o.promotion=r.promotion,o.piece=r.piece,r.promoted&&(o.promoted=!0),r.capturedPromotedPawn&&(o.capturedPromotedPawn=!0),o.ids={move:a,line:i})}return r},e.header=e.headers=function(n){var r=t.header(n);return e.siblingGame&&extendChess(e.siblingGame),r},e.load=function(n,r,o,s){var c=t.load(n,r,o,s);return e.siblingGame&&extendChess(e.siblingGame),c&&!o&&(a=-1,i=0),c},e.removeEmptyLines=function(){var t,n,r=e._lines();for(t=r.length-1;t>0;--t)r[t].length||(r[t]=void 0,n=!0);n&&e.reorderLines()},e.loadPgn=function(n,r,o){var s=t.loadPgn(n,r,o),c=e._history();return e.removeEmptyLines(),a=c.length-1,i=c.id,s},e.ids=function(){return{move:a,line:i}},e.selectLine=function(t){e.selectPosition(null,t)},e.moveBackward=function(){var t;if(a<=1)if(0===i){if(-1===a)return!1;e.selectPosition(a-1)}else(t=e._getPos(a-1,i)).isContinuation?e.selectPosition(e._history().atMoveNode,e._history().parentId):t.initial?e.selectPosition(-1,0):e.selectPosition(t.ids.move,t.ids.line);else e.selectPosition(a-1);return!0},e.moveForward=function(t,n){var r,s,c,l,u,d,f=e._lines();if("string"==typeof n&&(n={san:n}),!(r=f[i][a+1])||n&&!isSameMove(n,r)){if(n&&r&&r.lines)for(u=r.lines.length,l=0;l<u;++l)if((c=f[r.lines[l]][0])&&isSameMove(n,c)){r=c,d=!0;break}if(!d&&t&&(s=f[i][a])&&s.lines)for(u=s.lines.length,l=0;l<u;++l)if((c=f[s.lines[l]][0])&&c.isContinuation&&(c=f[s.lines[l]][1])&&(!n||isSameMove(n,c))){r=c,d=!0;break}if(!d)return!!(n&&n.san&&(n=o.fixSanMove(n.san,e._board(),e.turn()))||n&&n.to&&n.from&&Math.abs(n.to.charCodeAt(0)-n.from.charCodeAt(0))>1&&(n=o.fixObjMove(n,e._board(),e.turn())))&&e.moveForward(t,n)}return e.selectPosition(r.ids.move,r.ids.line)},e.moveVariation=function(t,n){var r,o,a,i=e._lines(),s=i[t];if(s&&s.id)for(o=(r=i[s.parentId][s.atMoveNode].lines).length-1;o>=0;--o)if(r[o]===t&&r[a=o-(n?1:-1)])return r[o]=r[a],r[a]=t,e.reorderLines(),!0;return!1},e.promoteVariation=function(t,n){for(var r,o,s,c,l,u,d=e._lines(),f=d[t];f&&f[0]&&f.id&&(-1!==n||f.parentId);){for(r=d[s=f.parentId],c=f.atMoveNode,f[0].lines=r[c].lines.concat(f[0].lines||[]),r[c].lines=void 0,u=r.length-c,o=r.splice(c,u),l=0;l<u;++l)o[l].ids.line=t,o[l].ids.move=l;for(o.id=t,o.parentId=s,o.atMoveNode=c,o.hash=f.hash,0===c?(o.initComment=r.initComment,r.initComment=f.initComment):f.initComment&&(r[c-1].comment=((r[c-1].comment||"")+" "+f.initComment).trim()),d[t]=o,u=f.length,l=0;l<u;++l)f[l].ids.line=s,f[l].ids.move=l+c,r.push(f[l]);for(o[0].isContinuation=!!f[0].isContinuation&&fixContComment(o[0]),r[c].isContinuation=!c&&"number"==typeof r.parentId&&d[r.parentId][r.atMoveNode].move===r[0].move&&fixContComment(r[c]),u=r[c].lines.length,l=0;l<u;++l)d[r[c].lines[l]].atMoveNode=c,d[r[c].lines[l]][0]&&(d[r[c].lines[l]][0].isContinuation=d[r[c].lines[l]][0].move===r[c].move&&fixContComment(d[r[c].lines[l]][0]));if(i===t?(i=s,a+=c):i===s&&a>=c&&(i=t,a-=c),1===n)break;f=d[t=s]}return void 0!==r&&(e._history(d[i]),e.reorderLines(),!a&&d[i][0].isContinuation&&e.selectPosition(d[i].atMoveNode,d[i].parentId),!0)},e.reorderLines=function(t,n){var o,a,s,c,l,u,d,f,p,m,h=e._lines();for(t?p=n.length-1:(t=0,n=[h[0]],p=0,r=!1),s=(o=h[t]).length,a=0;a<s;++a)if((c=o[a]).ids.line=p,c.lines)for(l=c.lines.length,u=0;u<l;++u)(f=h[d=c.lines[u]])?(f.atMoveNode=a,m=n.length,c.lines[u]=m,f.parentId=p,r||d!==i||(r=!0,i=m),n.push(f),e.reorderLines(d,n)):(1===c.lines.length?delete c.lines:c.lines.splice(u,1),--u,--l);t||e.saveLines(n,!0)},e.createVariation=function(){var n,r,o,s,c=e._history(),l=e._lines();return a===c.length-1?(n=t.createVariation(),c=e._history(),a=c.length-1,i=c.id,n):-1!==a&&(r=[],o=c[a],r.parentId=c.id,r.id=l.length,o.lines||(o.lines=[]),o.lines.push(r.id),s=e._getPos(a-1),r.hash=s.hash,r.atMoveNode=a,l.push(r),e.selectPosition(-1,r.id))},e.selectLineEnd=function(t){return"number"!=typeof t&&(t=i),(t!==i||a<e._history().length-1)&&e.selectPosition(null,t,!0)},e.selectLineStart=function(){var t,n;return i?(a>1||1===a&&!e._getPos(0).isContinuation?t=e._history():(n=e._getPos(-1),t=e._lines()[n.ids?n.ids.line:0]),e.selectPosition(t.id?t[1]&&t[0].isContinuation?1:0:-1,t.id)):-1!==a&&e.selectPosition(-1,0)},e.selectPosition=function(n,r,o){var s=e._lines(),c=e._history();if("number"==typeof r&&(r!==i||o)){if(r<0||r>=s.length)return!1;if(c=s[r],"number"!=typeof n)n=c.length-1;else if(n<-1||n>=c.length)return!1;i=r,e._history(c),o=!0}if("number"==typeof n&&(n!==a||o)){if(n<-1||n>=c.length)return!1;t.load(e._getPos(n).fen,t.header().Variant,!0,!0),a=n}return!0},e.resetToMainLine=function(){var t=e._lines();e.selectLineEnd(0),t.length>1&&(t.length=1,e.reorderLines())},e.saveLines=function(t,n){var r,o,a,i=e._lines(),s=t.length;for(t!==i&&(i.length=0),o=0;o<s;++o){if(r=t[o],o&&"number"!=typeof r.parentId)return!1;t!==i&&i.push(r),r.id=o}return n||(a=e.ids(),e.selectPosition(-1,0,!0),e.selectPosition(a.move,a.line)),!0},e.deletePosition=function(t,n){var r,o,s=e._lines();return!(!s[n]||!(s[n][t]||-1===t&&0!==n))&&(n&&(0===t?t=-1:1===t&&s[n][0].isContinuation&&(t=-1)),i>0&&n!==i?o=!1!==(r=function descendsFromMove(e,t,n){for(var r,o=e[t];"number"==typeof(r=o.parentId);){if(r===n)return o.atMoveNode;o=e[r]}return!1}(s,i,n))&&r>=t:n===i&&t<=a&&(o=!0),o&&(t>1?e.selectPosition(t-1,n):(e.selectPosition(s[n][0].isContinuation||1===t?1:0,n),e.moveBackward())),t>0?s[n].length=t:n?s[n]=null:s[0].length=0,e.reorderLines(),e.ids())},e.mark=function(t,n){var r=a<0?e._lines()[i]:e._lines()[i][a],o=t.type,s=1;t.color&&("arrow"===o?e.mark({key:t.color+t.key,type:"cal"},n):"square"===o&&e.mark({key:t.color+t.key,type:"csl"},n)),"cal"!==o&&"csl"!==o&&(o="c_"+o,s=0),r.commands&&r.commands[o]&&(r.commands[o]=r.commands[o].split(",").filter(function rm(e){return e.slice(s).split(";")[0]!==t.key.slice(s)}).join(","),r.commands[o]||delete r.commands[o]),n||(r.commands||(r.commands={}),r.commands[o]=(r.commands[o]?r.commands[o]+",":"")+t.key+(t.data?";"+t.data.join(";"):""))},e.markings=function(){var t,n,r,o,s,c,l,u,d={},f=a<0?e._lines()[i]:e._lines()[i][a],p={cal:"arrow",csl:"square"};for(n in f.commands){if(r=f.commands[n],p[n])n=p[n],o=0;else{if("c_"!==n.substr(0,2))continue;n=n.slice(2),o=1}for(d[n]=d[n]||{},c=(s=r.split(",")).length,t=0;t<c;++t)o?(u=(l=s[t].split(";")).shift(),d[n][u]=d[n][u]||{type:n,key:u},d[n][u].data=l):(u=s[t].slice(1),d[n][u]=d[n][u]||{type:n,key:u},d[n][u].color=s[t][0])}return d},e.clearMarkings=function(){var t,n=a<0?e._lines()[i]:e._lines()[i][a];for(t in n.commands)/^c[sa]l$|^c_/.test(t)&&delete n.commands[t]},e.pgn=function(n){var r,o=e.ids();return e.selectLineEnd(0),r=t.pgn(n),e.selectPosition(o.move,o.line),r},e.loadMoves=function(t,n){var r,o,s;if(n=n||{},"string"==typeof t&&(t=decodeTCN(t)),t){for(n.atCurrent||e.selectPosition(-1,0),s=i,o=t.length,r=0;r<o;++r){if(!e.move(t[r],!0)&&(t[r].promotion=!0===n.autoPromote?"q":n.autoPromote,!e.move(t[r],!0)))return!1;i!==s&&"merge"!==n.method&&(e.promoteVariation(i,1),"promote"!==n.method&&(e._history()[a].lines=void 0,e.reorderLines()),s=i)}"merge"!==n.method&&"promote"!==n.method&&e.deletePosition(a+1,i)}return!0})}(t),e.disableHashing&&t.hashing(!1),e.pgn){if(!t.loadPgn(e.pgn,e.index,e.options))return!1}else{if(e.headers&&(e.variant=e.headers.Variant||e.variant,e.fen||(e.fen=e.headers.FEN)),(e.fen||e.variant)&&!t.load(e.fen||n,e.variant))return!1;e.headers&&"object"===s()(e.headers)&&!Array.isArray(e.headers)&&t.header(e.headers)}if(e.tcn)if("object"===s()(e.tcn)){if(!function playBughouseTCN(e,t,n){var r,o,a,i=[decodeTCN(t[0]),decodeTCN(t[1])],s=[0,0],c=[0,0],l=i[0].length+i[1].length,u=Math.max(0|n[0][0],0|n[0][1],0|n[1][0],0|n[1][1]),d=[0,0],f=[0,0];for(r=[[u+=600-u%600,u],[u,u]];l--;){if(f[0]=d[0]+r[0][c[0]]-n[0][s[0]]||0,f[1]=d[1]+r[1][c[1]]-n[1][s[1]]||0,i[o=f[0]<=f[1]?0:1][s[o]]||(o^=1),(!(a=o?e.siblingGame:e).move(i[o][s[o]])||l&&a.inCheckmate()&&a.undo(!0))&&!(a=(o^=1)?e.siblingGame:e).move(i[o][s[o]]))return!1;a._history()[s[o]].time=n[o][s[o]],r[o][c[o]]=n[o][s[o]],d[o]=f[o],c[o]^=1,++s[o]}return!0}(t,e.tcn,e.timestamps||[[],[]]))return!1}else r=decodeTCN(e.tcn);else r=e.moves;return!(r&&!makeMoves(t,r,e,e.timestamps))&&t}function normalizeMoveObj(e){return e&&(e.piece&d&&(e.promoted=!0),e.piece=l[e.piece&i],e.captured&&(e.captured&d&&(e.capturedPromotedPawn=!0),e.captured=l[e.captured&c]),e.promotion&&(e.promotion=l[e.promotion&i]),void 0!==e.drop&&(e.drop=u[e.drop])),e}function getPremoves(e,n,r){var a,i,s,c,l,d,f,p,m=[];function pawnCapture(e){var r,o=l[0]+"x"+e;if(1===n&&7===a||2===n&&2===a)for(r=4;r>0;--r)m.push({color:n,to:e,flags:t.FLAGS.CAPTURE|t.FLAGS.PROMOTION,from:l,promotion:1<<r+2,piece:4,san:o+"="+u[r].toUpperCase()});else 1===a&&2===n||8===a&&1===n||m.push({color:n,to:e,flags:t.FLAGS.CAPTURE,from:l,piece:4,san:o})}if(1!==n&&2!==n||!t.load(e,r||"chess"))return null;for(e=t.fen(),(c=o()).clear(),r&&c.header({Variant:r}),t.turn(n),c.turn(n),a=1;a<9;++a)for(i=1;i<9;++i)l=String.fromCharCode(i+96)+a,(s=t.get(l))&&(t.remove(l,!0),s.color===n&&("p"===s.type?(i>1&&pawnCapture(String.fromCharCode(i-1+96)+(a+(1===n?1:-1))),i<8&&pawnCapture(String.fromCharCode(i+1+96)+(a+(1===n?1:-1)))):"k"===s.type&&(f=l[0],p=a),c.put(s,l,!0),m=m.concat(c.moves({verbose:!0})),c.remove(l,!0)));return"-"!==(d=e.split(" ")[2])&&d.split("").forEach(function(e){(1===n&&e<"a"||2===n&&e>="a")&&("k"===(e=e.toLowerCase())?m.push({color:n,to:"g"+p,flags:t.FLAGS.KSIDE_CASTLE,from:"e"+p,piece:128,san:"O-O"}):"q"===e?m.push({color:n,to:"c"+p,flags:t.FLAGS.QSIDE_CASTLE,from:"e"+p,piece:128,san:"O-O-O"}):e>f?m.push({color:n,to:e+p,flags:t.FLAGS.KSIDE_CASTLE,from:f+p,piece:128,san:"O-O"}):m.push({color:n,to:e+p,flags:t.FLAGS.QSIDE_CASTLE,from:f+p,piece:128,san:"O-O-O"}))}),(m=m.concat(t.moves({verbose:!0}))).forEach(function(e){normalizeMoveObj(e)}),m}function getLegalMoves(e,n){var r,o,a,i;if("string"==typeof e){if(!(o=t).load(e,n))return null}else o=createGame(e);for(i=(r=o.moves({verbose:!0})).length,a=0;a<i;++a)normalizeMoveObj(r[a]);return r}function jce(t,n){return(e=e||a(jce))(t,n)}return jce.gameFingerprints=function gameFingerprints(e){var t,o,a,i,s,c,l,u,d,f=createGame(e),p=[""],m=[];if(!f)return!1;for(d=(u=f.header()).Variant||"",c=f.hashes(),t="function"==typeof f.origHistory?f.origHistory(!0):f.history(!0),s=c.length,o=[c[0][0],c[0][1]],m.push(r.to64BitHex(o)+d),c[0]=r.to64BitHex(c[0]),a=1;a<s;++a)o[0]=(o[0]^c[a][0]*(a+58465))>>>0,o[1]=(o[1]^c[a][1]*(a+984))>>>0,c[a]=r.to64BitHex(c[a]),m.push(r.to64BitHex(o)+d),normalizeMoveObj(t[i=a-1]),l=(t[i].from?t[i].from:t[i].drop.toUpperCase()+"@")+t[i].to+(t[i].promotion||""),i&&(l=p[i]+" "+l),p.push(l);return{startingFen:u.FEN||n,hashes:c,fingerprints:m,moves:p,variant:u.Variant}},jce.getFenFromMoves=function getFenFromMoves(e,n,r){return t.reset(),t.load(e,r),!(n&&!makeMoves(t,n))&&t.fen()},jce.getLegalMoves=getLegalMoves,jce.getPremoves=getPremoves,jce.getPositionInfo=function getPositionInfo(e,n,r){var o,a,i,s={gameOver:!1,check:!1,checkmate:!1,draw:!1,stalemate:!1,threefold:!1,insufficient:!1};if(Array.isArray(n)||(r=n,n=null),"boolean"==typeof r?(o=r,r={}):o=(r=r||{}).variant,"string"==typeof e){if(0!==(i=t).validateFen(e,o)||!i.load(e,o))return!1}else i=createGame(e);return!(n&&!makeMoves(i,n))&&(r.getLegalMoves?(a=getLegalMoves({game:i}),s.legalMoves=a):a=i.moves(),i.inCheck()?(s.check=!0,s.checkmate=0===a.length):s.stalemate=0===a.length,r.premove&&(r.check=!1,r.kings=!1),s.threefold=i.inThreefoldRepetition(),s.insufficient=i.insufficientMaterial(r.color),s.fiftyMoveRule=i.in50MoveRule(),s.draw=s.stalemate||s.threefold||s.insufficient||s.fiftyMoveRule||i.inDraw(),r.skipValidation||(s.isValid=i.isPositionValid(r)),o&&(s.variantWin=i.isVariantWin(),void 0===s.variantWin&&(s.variantWin=i.isBughouseWin())),s.gameOver=s.checkmate||s.draw||Boolean(s.variantWin),s)},jce.isFenValid=function isFenValid(e,n){return 0===t.validateFen(e,n)},jce.encodeTCN=function encodeTCN(e){var t,n,r,o,a="";for(Array.isArray(e)||(e=[e]),n=e.length,t=0;t<n;t+=1)r=e[t].drop?79+p.indexOf(e[t].drop):f.indexOf(e[t].from[0])+8*(e[t].from[1]-1),o=f.indexOf(e[t].to[0])+8*(e[t].to[1]-1),e[t].promotion&&(o=3*p.indexOf(e[t].promotion)+64+(o<r?9+o-r:o-r-7)),a+=f[r]+f[o];return a},jce.decodeTCN=decodeTCN,jce.uciToObj=uciToObj,jce.generatePgn=function generatePgn(e){var t;return(e=e||{}).disableHashing=!0,!!(t=createGame(e))&&t.pgn(e)},jce.pgnToFen=function pgnToFen(e,n){var r,o,a=[];if(t.reset(),!t.loadPgn(e))return!1;if(r=t.moveCount(),"number"==typeof n){for(n<0&&(n=r+n+1),o=r-1;o>=n&&o>=0;o-=1)t.undo();return t.fen()}for(o=0;o<=r;o+=1)a.unshift(t.fen()),t.undo();return a},jce.pgnToJson=function pgnToJson(e,n,r){var o,a=[],i=t;return"number"!=typeof n&&(r=n,n=void 0),o=i.tokenizePgn(e,r),n<0&&(n=o.length+n),!!o&&(r&&r.includeFen&&(i=createGame({analysis:!0})),o.forEach(function(e,t){var o,s;t===n||void 0===n?i.loadPgn([e],0,r)?(s=function normalizeHistory(e){var t,n,r,o,a,i,s,c=e.history(!0,!0);if(e.siblingGame){for(t=e.siblingGame.history(!0,!0),r=c.length+t.length,n=[],o=0;o<r;++o)!c.length||t.length&&t[0].bughouseOrder<c[0].bughouseOrder?(a=t.shift()).board="b":(a=c.shift()).board="a",n.push(a);c=n}for(r=c.length,o=0;o<r;++o)if((i=c[o]).fen||normalizeMoveObj(i),i.lines)for(s=i.lines.length-1;s>=0;--s)e.selectLine(i.lines[s]),i.lines[s]=normalizeHistory(e).moves;return{moves:c}}(i),o=i.header(),a.push({headers:o,moves:s.moves})):a.push(!1):a.push(void 0)}),"number"==typeof n?a[n]:a)},jce.sanToObj=function sanToObj(e,n,r){return t.reset(),!!t.load(n,r)&&normalizeMoveObj(t.move(e))},jce.completeFen=t.completeFen,jce.shortenFen=function shortenFen(e,n){return t.completeFen(e).split(" ").slice(0,n||4).join(" ")},jce.createGame=createGame,jce.getPositionDetails=function getPositionDetails(e,t){var n,r,o,a;if((e=e||{}).disableHashing=!0,!(n=createGame(e)))return null;if(t)if(e.premove){if(!(o=makePremove(n,e.color,t)))return null}else{if(!(o=n.move(t)))return null;n.extended||normalizeMoveObj(o)}return a=n.fen(),e.premove&&(e.check=!1,e.kings=!1),e.skipValidation||n.isPositionValid(e)?(r=a.split(" "),{fen:a,pieces:getPieces(n),sideToMove:n.turn(),castling:r[2],epSquare:"-"===r[3]?null:r[3],halfMoves:+r[4],moveNumber:+r[5],move:o,hand:n.hand(),checks:n.checks()}):null},jce.predict=function predict(e,t){var n=Math.min(Math.max(.20773843*Math.atan(2.49085889*e/100-2.47841945*t/100)+.02262979*e/100-.02256839*t/100+.52239679,0),1),r=Math.min(Math.max(-.20720905*Math.atan(2.49626837*e/100-2.48220286*t/100)+-.02352551*e/100+.02172627*t/100+.49443923,0),1),o=Math.min(Math.max(Math.exp(.037043456*e/100+.178106427*t/100-8.069742932)+.004823544*Math.exp(-1.364136591*Math.pow(e/100-t/100,2))+-.001625539,0),1),a=n+r+o;return{w:n/a,b:r/a,d:o/a}},jce.FLAGS=t.FLAGS,jce.loadECO=function loadECO(e,t){r.loadBook(e,function onload(e,n){if(!n||!n.json)return t(e||new Error("Invalid book"));t(e,function queryECO(e){var t,o,a,i,s,c,l,u,d;if(e.hash)o="string"==typeof e.hash?[r.hex64ToDec(e.hash)]:[e.hash],i=1;else{if(!(t=createGame(e)))return!1;i=(o=t.hashes()).length}for(a=0;a<i;++a)if(s=n.json[r.to64BitHex(o[a])]){if(s.constructor===Array)if(c&&-1===s[0].m.indexOf(c.m)){for(u=s.length-1;u>=0;--u)if(!u||-1!==s[u].m.indexOf(c.m)){(d=s[u]).e=s[0].e,d.s=s[0].s,d.mate=s[0].mate,d.v=s[0].v,d.h=s[0].h,d.n=d.n||s[0].n,d.u=d.u||s[0].u,d.c=d.c||s[0].c;break}}else d=s[0];else d=s;(d.n||e.allowNameless)&&(c=d)}else e.mustEndInBook&&(c=void 0);if(c)return l={name:c.n},c.m&&(l.moves=c.m),void 0!==c.d&&(l.sdiff=c.d/100),c.u?(l.url=c.u,l.code=l.url.substr(0,3)):c.n&&c.c&&(l.url=c.c+"-"+c.n.replace(/['+,]/g,"").replace(/[^a-z0-9.]+/gi,"-").replace(/(with-\d|St)\.+-?/,"$1-"),l.code=c.c),c.e?(l.eval=c.e,l.depth=c.h,l.score=c.e[0].cp/100,void 0!==c.e[0].mate&&(l.mate=c.e[0].mate)):(l.score=c.s/100,void 0!==c.mate&&(l.mate=c.mate)),c.v&&(l.bad=!0),l},n.json)})},jce}());t.a=c},150:function(e,t,n){(function(e){var r=n(113),o=n(175),a=t&&!t.nodeType&&t,i=a&&"object"==typeof e&&e&&!e.nodeType&&e,s=i&&i.exports===a?r.Buffer:void 0,c=(s?s.isBuffer:void 0)||o;e.exports=c}).call(this,n(115)(e))},151:function(e,t){var n=9007199254740991,r=/^(?:0|[1-9]\d*)$/;e.exports=function isIndex(e,t){var o=typeof e;return!!(t=null==t?n:t)&&("number"==o||"symbol"!=o&&r.test(e))&&e>-1&&e%1==0&&e<t}},152:function(e,t,n){var r=n(176),o=n(177),a=n(178),i=a&&a.isTypedArray,s=i?o(i):r;e.exports=s},153:function(e,t){e.exports=function overArg(e,t){return function(n){return e(t(n))}}},16:function(e,t,n){"use strict";n.d(t,"a",function(){return s});var r=n(29),o=n.n(r),a=n(5),i=n.n(a);function ownKeys(e,t){var n=Object.keys(e);return Object.getOwnPropertySymbols&&n.push.apply(n,Object.getOwnPropertySymbols(e)),t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(n,!0).forEach(function(t){i()(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var s={getId:function getId(e){var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";return Array(e||20).fill().reduce(function(e){return e+t.charAt(Math.floor(Math.random()*t.length))},"")},getInitialFen:function getInitialFen(){return"rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1"},formatJSTimestampForPgn:function formatJSTimestampForPgn(e){var t=new Date(e),n="0".concat(t.getUTCDate()).slice(-2),r="0".concat(t.getUTCMonth()+1).slice(-2);return"".concat(t.getFullYear(),"-").concat(r,"-").concat(n)},getSanFromFileRank:function getSanFromFileRank(e){return e&&e.file&&e.rank?String.fromCharCode(96+e.file)+e.rank.toString():null},getFileRankFromSan:function getFileRankFromSan(e){return e?{file:e.toLowerCase().charCodeAt(0)-96,rank:Number(e.charAt(1))}:null},getPieceAt:function getPieceAt(e,t){return e.setup.pieces.find(function(e){return e.file===t.file&&e.rank===t.rank})},cloneGame:function cloneGame(e){return{id:e.id,variant:e.variant,jce:e.jce,tree:s.cloneTree(e.tree),setup:JSON.parse(JSON.stringify(e.setup)),markings:_objectSpread({},e.markings),settings:_objectSpread({},e.settings),history:o()(e.history),premoves:e.premoves.map(function(e){return JSON.parse(JSON.stringify(e))})}},cloneTree:function cloneTree(e){return _objectSpread({},e,{initialMarkings:JSON.parse(JSON.stringify(e.initialMarkings)),selected:_objectSpread({},e.selected),selectedNode:e.selectedNode?_objectSpread({},e.selectedNode,{ids:_objectSpread({},e.selectedNode.ids),hash:o()(e.selectedNode.hash),lines:e.selectedNode.lines&&o()(e.selectedNode.lines),arrows:e.selectedNode.arrows&&o()(e.selectedNode.arrows)}):null})},getFirstFen:function getFirstFen(e){return e.tree.lines[0].length?e.tree.lines[0][0].beforeFen:e.setup.fen}}},168:function(e,t,n){"use strict";n.d(t,"a",function(){return r});var r={MAIN_AD:"main-ad",SHORT_SIDEBAR_AD_BOTTOM:"short-sidebar-ad-bottom",SHORT_SIDEBAR_AD_TOP:"short-sidebar-ad-top",TALL_SIDEBAR_AD:"tall-sidebar-ad",WHAT_IS_CHESS:"what-is-chess"}},17:function(e,t,n){e.exports=n(19)(4)},171:function(e,t){e.exports=function createBaseFor(e){return function(t,n,r){for(var o=-1,a=Object(t),i=r(t),s=i.length;s--;){var c=i[e?s:++o];if(!1===n(a[c],c,a))break}return t}}},172:function(e,t,n){var r=n(148),o=n(180),a=n(103);e.exports=function keys(e){return a(e)?r(e):o(e)}},173:function(e,t){e.exports=function baseTimes(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}},174:function(e,t,n){var r=n(95),o=n(88),a="[object Arguments]";e.exports=function baseIsArguments(e){return o(e)&&r(e)==a}},175:function(e,t){e.exports=function stubFalse(){return!1}},176:function(e,t,n){var r=n(95),o=n(125),a=n(88),i={};i["[object Float32Array]"]=i["[object Float64Array]"]=i["[object Int8Array]"]=i["[object Int16Array]"]=i["[object Int32Array]"]=i["[object Uint8Array]"]=i["[object Uint8ClampedArray]"]=i["[object Uint16Array]"]=i["[object Uint32Array]"]=!0,i["[object Arguments]"]=i["[object Array]"]=i["[object ArrayBuffer]"]=i["[object Boolean]"]=i["[object DataView]"]=i["[object Date]"]=i["[object Error]"]=i["[object Function]"]=i["[object Map]"]=i["[object Number]"]=i["[object Object]"]=i["[object RegExp]"]=i["[object Set]"]=i["[object String]"]=i["[object WeakMap]"]=!1,e.exports=function baseIsTypedArray(e){return a(e)&&o(e.length)&&!!i[r(e)]}},177:function(e,t){e.exports=function baseUnary(e){return function(t){return e(t)}}},178:function(e,t,n){(function(e){var r=n(179),o=t&&!t.nodeType&&t,a=o&&"object"==typeof e&&e&&!e.nodeType&&e,i=a&&a.exports===o&&r.process,s=function(){try{return i&&i.binding&&i.binding("util")}catch(e){}}();e.exports=s}).call(this,n(115)(e))},179:function(e,t,n){e.exports=n(19)(81)},18:function(e,t,n){"use strict";var r={name:"icon-font",mixins:[{props:{family:{type:String,default:"chess"},isDarkMode:{type:Boolean,default:!1},name:{type:String,required:!0},theme:{type:String,default:""}}}]},o=n(62),a=n(8);var i=Object(a.a)(r,function(){var e,t=this,n=t.$createElement,r=t._self._c||n;return r("div",t._g({class:[t.$style.component,(e={},e[t.$style.darkMode]=t.isDarkMode,e)]},t.$listeners),[r("span",{class:[t.$style[t.family],t.name,t.$style[t.theme]]})])},[],!1,function injectStyles(e){this.$style=o.default.locals||o.default},null,null);t.a=i.exports},180:function(e,t,n){var r=n(132),o=n(181),a=Object.prototype.hasOwnProperty;e.exports=function baseKeys(e){if(!r(e))return o(e);var t=[];for(var n in Object(e))a.call(e,n)&&"constructor"!=n&&t.push(n);return t}},181:function(e,t,n){var r=n(153)(Object.keys,Object);e.exports=r},19:function(e,t){e.exports=vueDLL},191:function(e,t){e.exports=function arrayEach(e,t){for(var n=-1,r=null==e?0:e.length;++n<r&&!1!==t(e[n],n,e););return e}},192:function(e,t,n){var r=n(131),o=n(193)(r);e.exports=o},193:function(e,t,n){var r=n(103);e.exports=function createBaseEach(e,t){return function(n,o){if(null==n)return n;if(!r(n))return e(n,o);for(var a=n.length,i=t?a:-1,s=Object(n);(t?i--:++i<a)&&!1!==o(s[i],i,s););return n}}},2:function(e,t,n){"use strict";n.d(t,"a",function(){return r});var r={getLine:function getLine(e,t){return e[t]||null},getNode:function getNode(e,t,n){if("number"==typeof t){if(void 0!==n){var o=r.getLine(e,Math.max(0,t));return o?o[n]:null}return null}if(!t)return null;var a=r.getLine(e,Math.max(0,t.line));return a?a[t.move]:null},getSelectedLine:function getSelectedLine(e){return r.getLine(e.jce._lines(),e.tree.selected.line)},getSelectedNode:function getSelectedNode(e){return r.getNode(e.jce._lines(),e.tree.selected)},nodeIsSelected:function nodeIsSelected(e,t){return!!(t||t.line||t.move)&&(e.selected.line===t.line&&e.selected.move===t.move)},getLinesFromJce:function getLinesFromJce(e){return r.formatLinesFromJce(e.jce._lines())},getJceSelectedLine:function getJceSelectedLine(e){return e._lines()[e._history().id]},formatLinesFromJce:function formatLinesFromJce(e){return r.consolidateComments(e)},consolidateComments:function consolidateComments(e){return e.map(function(t){var n=r.isContinuation(e,t.id)?r.getNode(e,t.id,1):r.getNode(e,t.id,0);return n?(t.initComment&&(n.commentBefore=t.initComment),t):t})},isContinuation:function isContinuation(e,t){var n=r.getLine(e,t);if(!n)return!1;if(void 0!==n.parentId&&void 0!==n[0]){var o=r.getNode(e,n.parentId,n.atMoveNode);return!(!o||!o.move)&&o.move===n[0].move}return!1},isMainLine:function isMainLine(e){return 0===e},getNextNodeIds:function getNextNodeIds(e,t){return!e||e.move+t<0?null:{line:e.line,move:e.move+t}},getNextContinuationLineId:function getNextContinuationLineId(e,t){var n=r.getNode(e,t);if(!n||!n.lines)return null;var o=n.lines.find(function(t){return r.isContinuation(e,t)});return-1!==o?o:null},getParentNode:function getParentNode(e,t){var n={line:e[t.line].parentId,move:e[t.line].atMoveNode};return r.findNode(e,n)},getParentNodeIds:function getParentNodeIds(e,t){var n=r.getLine(e,t.line);return n&&void 0!==n.parentId?{line:n.parentId,move:n.atMoveNode}:null},deleteRemainingNodes:function deleteRemainingNodes(e,t){return e?(e.length=t+1,e):null},deleteNode:function deleteNode(e,t){return r.prune(e,{line:t.line,move:t.move-1})},deleteLine:function deleteLine(e,t){var n=r.getLine(e,t);if(void 0!==n.parentId){var o=r.getNode(e,{line:n.parentId,move:n.atMoveNode});o.lines=o.lines.filter(function(e){return e!==t}),0===o.lines.length&&delete o.lines}var a=e.filter(function(e){return r.isMainLine(e.id)||e.id!==t});return r.rebuildIds(a)},rebuildIds:function rebuildIds(e){var t=[];return e.forEach(function(e,n){e.id!==n&&(t[e.id]=n)}),e.map(function(n){return n.id=void 0!==t[n.id]?t[n.id]:n.id,void 0!==t[n.parentId]&&(n.parentId=t[n.parentId]),n.forEach(function(n){n.ids.line=void 0!==t[n.ids.line]?t[n.ids.line]:n.ids.line,n.lines&&n.lines.length>0&&(n.lines=n.lines.map(function(e){return void 0!==t[e]?t[e]:e}).filter(function(t){return void 0!==e[t]}),0===n.lines.length&&delete n.lines)}),n})},prune:function prune(e,t){return r.getNode(e,{line:t.line,move:t.move+1})?(e[t.line]=r.deleteRemainingNodes(e[t.line],t.move),!r.isMainLine(t.line)&&r.isFirstVisibleNode(e,t)&&e.splice(e.findIndex(function(e){return e.id===t.line}),1),e.sort(function(e,t){return e.id-t.id}).reduce(function(e,t){var n=r.getNode(e,{line:t.parentId,move:t.atMoveNode});return(r.isMainLine(t.id)||n)&&e.push(t),e},[])):e},isFirstNodeInTree:function isFirstNodeInTree(e){return 0===e.line&&-1===e.move},isFirstVisibleNode:function isFirstVisibleNode(e,t){return r.isContinuation(e,t.line)?1===t.move:0===t.move},isFirstNodeInLine:function isFirstNodeInLine(e,t){return t&&e&&e[t.line]&&e[t.line][0]&&e[t.line][0].ids&&e[t.line][0].ids.line===t.line&&e[t.line][0].ids.move===t.move},isHead:function isHead(e,t){return t&&e[t.line].length-1===t.move||!1},getHeadIds:function getHeadIds(e,t){return{line:t,move:e[t].length-1}},nodeMatchesMove:function nodeMatchesMove(e,t,n){var o=r.getNode(e,t);return!!o&&(o.from===n.from&&o.to===n.to&&(o.promotion||null)===(n.promotion||null))},shouldMatchMove:function shouldMatchMove(e,t,n){return e&&1===t&&0===n},getNextMatchingNode:function getNextMatchingNode(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,o=r.getNode(e,t),a=r.getNode(e,t.line,t.move+1);return e.reduce(function(e,t){return e.concat(t)},[]).filter(function(e){return o&&e.moveNumber===o.moveNumber+1||a&&e.moveNumber===a.moveNumber}).filter(function(t){return!!(o&&t.ids.line===o.ids.line||a&&t.ids.line===a.ids.line)||(!!(o&&o.lines&&-1!==o.lines.indexOf(t.ids.line)&&r.isContinuation(e,t.ids.line))||!(!a||!a.lines||-1===a.lines.indexOf(t.ids.line)||r.isContinuation(e,t.ids.line)))}).filter(function(t){return r.nodeMatchesMove(e,t.ids,n)}).sort(function(e,t){return e.ids.line-t.ids.line})[0]||null},clearNode:function clearNode(e,t){var n=r.getNode(e,t);return n?(delete n.comment,delete n.annotation,n):null},findNode:function findNode(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=arguments.length>2?arguments[2]:void 0,a=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];if(!e||void 0===n.line)return null;if("string"==typeof o)switch(n.move){case"begin":n.move=0;break;case"end":n.move=e[0].length-1}else if(void 0===n.move)return e[n.line];return o&&0!==Math.abs(o)&&(n=new Array(Math.abs(o)).fill(o/Math.abs(o)).reduce(function(n,o){if(null===n)return null;var i=r.isContinuation(e,n.line),s=r.getNextNodeIds(n,o);if(r.getNode(e,s)&&(-1!==o||!i||0!==s.move))return s;switch(o){case 1:return a?n:null!==(t=r.getNextContinuationLineId(e,n))?{line:t,move:1}:null;case-1:return s=i?r.getParentNodeIds(e,n):r.getNextNodeIds(r.getParentNodeIds(e,n),-1),r.getNode(e,s)?s:n;default:return null}},n)),r.getNode(e,n)||null},clearNodeMarkings:function clearNodeMarkings(e,t){var n=r.getNode(e,t);return n?(delete n.squares,delete n.arrows,delete n.effects,n):null},clearNodeAnalysis:function clearNodeAnalysis(e,t){var n=r.getNode(e,t);return n?(delete n.comment,delete n.annotation,delete n.additionalAnnotation,n):null},clearAllMarkings:function clearAllMarkings(e){return e?(e.forEach(function(t){t.length>0&&t.forEach(function(t){return r.clearNodeMarkings(e,{line:t.ids.line,move:t.ids.move})})}),e):null},clearAnalysis:function clearAnalysis(e){return e?(e.forEach(function(t){t.length>0&&t.forEach(function(t){return r.clearNodeAnalysis(e,{line:t.ids.line,move:t.ids.move})})}),e):null}}},23:function(e,t,n){"use strict";n.d(t,"a",function(){return a}),n.d(t,"b",function(){return i});var r=n(5),o=n.n(r),a=function createComponentConfig(e,t){var n=document.querySelector(e),r=e.replace(/#|\./g,""),a=o()({},"".concat(r),{});return null!=n&&(a[r]=Object.assign({el:e},t(n))),a},i=function mergePropsData(e,t){return e.propsData=Object.assign({},e.propsData,t),e}},24:function(e,t,n){e.exports=n(19)(41)},25:function(e,t,n){e.exports=n(19)(78)},26:function(e,t,n){"use strict";n.d(t,"j",function(){return o}),n.d(t,"a",function(){return a}),n.d(t,"b",function(){return i}),n.d(t,"i",function(){return s}),n.d(t,"d",function(){return c}),n.d(t,"e",function(){return l}),n.d(t,"f",function(){return u}),n.d(t,"g",function(){return d}),n.d(t,"c",function(){return f}),n.d(t,"h",function(){return p});n(2);var r=n(11),o=(n(53),function normalizeAnnotation(e){return Object.prototype.hasOwnProperty.call(r.b,e)||Object.prototype.hasOwnProperty.call(r.a,e)?s(e)?r.b[e]:normalizeAnnotation(r.a[e]):e||""}),a=function additionalAnnotationExists(e,t){return e.additionalAnnotation&&Array.isArray(e.additionalAnnotation)&&o(e.additionalAnnotation[0])===o(t)},i=function annotationExists(e,t){return o(e.annotation)===o(t)},s=function isNagFormat(e){return e&&"$"===e.charAt(0)},c=function hasComment(e){return Boolean(e&&"string"==typeof e.comment)},l=function hasCommentBefore(e){return Boolean(e&&"string"==typeof e.commentBefore)},u=function hasLines(e){return Boolean(e&&e.lines&&e.lines.length)},d=function isEnPassant(e){return 4===e.flags},f=function generateAnnotationString(e){var t="";return e.annotation&&(t="".concat(t).concat(o(e.annotation))),e.additionalAnnotation&&e.additionalAnnotation[0]&&(t="".concat(t,"&nbsp;").concat(o(e.additionalAnnotation[0]))),t},p=function isFirstNodeOnFormattedLine(e){return 0===e.ids.move}},27:function(e,t,n){e.exports=n(19)(2)},28:function(e,t,n){e.exports=n(19)(3)},29:function(e,t,n){e.exports=n(19)(17)},3:function(e,t,n){"use strict";var r=n(15),o=n(2),a=n(48),i=n(16);n.d(t,"a",function(){return s});var s={createJce:function createJce(e){var t=Object.assign({},e,{analysis:!0});return r.a.createGame(t)||null},updateIdsFromJce:function updateIdsFromJce(e){return e&&e.jce?(e.tree.selected=e.jce.ids(),e):null},getSelectedIds:function getSelectedIds(e){return e.jce.ids()},getPositionInfo:function getPositionInfo(e){var t=r.a.getPositionInfo({game:e.jce},{skipValidation:!0,getLegalMoves:!0});return e.settings.premoves?t.legalPremoves=s.getLegalPremoves(e):t.legalPremoves=[],t},getPositionDetails:function getPositionDetails(e){return Object.assign(r.a.getPositionDetails({game:e.jce,kings:!1,skipValidation:!0}),{hand:s.getHand(e)})},addExtraCastlingMoves:function addExtraCastlingMoves(e){e.setup.legalMoves.forEach(function(t){16!==t.flags&&32!==t.flags||("chess960"===e.variant?s.addCastlingMoves960(e,t):s.addCastlingMoves(e,t))})},addCastlingMoves:function addCastlingMoves(e,t){var n=1===t.color?1:8;(16===t.flags?[8]:[1,2]).forEach(function(r){e.setup.legalMoves.push({color:t.color,flags:t.flags,piece:"k",from:t.from,san:16===t.flags?"O-O":"O-O-O",to:i.a.getSanFromFileRank({file:r,rank:n})})})},addCastlingMoves960:function addCastlingMoves960(e,t){for(var n=i.a.getFileRankFromSan(t.from).rank,r=1,o=0;o<2;){var a=i.a.getPieceAt(e,{file:r,rank:n});void 0!==a&&"r"===a.type&&o++,(1===o&&32===t.flags||2===o&&16===t.flags)&&e.setup.legalMoves.push({color:t.color,flags:t.flags,piece:"k",from:t.from,san:16===t.flags?"O-O":"O-O-O",to:i.a.getSanFromFileRank({file:r,rank:n})})}r++},getHeaders:function getHeaders(e){return e.jce.header()},getFen:function getFen(e){return e.jce.fen()},getPgn:function getPgn(e,t){return e.jce.pgn(t)},getPremoves:function getPremoves(e){return e.jce.premoves},getHand:function getHand(e){return e.jce.hand()},getChecks:function getChecks(e){return e.jce.checks()},getLegalPremoves:function getLegalPremoves(e){return r.a.getPremoves(e.jce.premoves&&e.jce.premoves.length>0?e.jce.premoves[e.jce.premoves.length-1].fen:e.jce.fen(),e.setup.playingAs,e.variant)},load:function load(e,t){return e.jce.load(t)&&s.updateIdsFromJce(e),e},loadPgn:function loadPgn(e,t){return e.jce.loadPgn(t)&&s.updateIdsFromJce(e),e},createVariation:function createVariation(e){return e.jce.createVariation()&&(e.jce.reorderLines(),s.updateIdsFromJce(e)),e},getJCEMove:function getJCEMove(e,t){var n=t;return s.isValidMoveObject(t)?(n.san?n=r.a.sanToObj(n.san,s.getFen(e),e.variant):n.tcn&&(n=r.a.decodeTCN(n.tcn)[0]),n):null},move:function move(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(!t)return null;var r=!1;if(!1===n){var o=t.from?e.jce.get(t.from):null,a=t.to?e.jce.get(t.to):null;if(o&&a&&"k"===a.type)return null;e.jce.remove(t.to),e.jce.remove(t.from);var i=t.drop||t.put;r=e.jce.put(o||{type:i.toLowerCase(),color:i&&i.toUpperCase()===i?1:2},t.to),t.from&&o&&null===t.to&&(r=!0)}else t.drop&&(t.drop=t.drop.toLowerCase()),r=e.jce.move(t);return r&&s.updateIdsFromJce(e),r},selectLine:function selectLine(e,t){var n=o.a.getLine(e.tree.lines,t);return n&&(e.jce.selectLine(t),e.tree.selected={line:t,move:n.length-1}),e},selectNode:function selectNode(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{line:0,move:0};return e.jce.selectPosition(t.move,t.line),e},updateHeaders:function updateHeaders(e,t){return e.jce.header(t)},clear:function clear(e){return e.jce.clear(e.variant)},isFileRankEqual:function isFileRankEqual(e,t){return e.file&&t.file&&e.rank&&t.rank&&e.file===t.file&&e.rank===t.rank},isValidMoveObject:function isValidMoveObject(e){return"string"==typeof e.from&&"string"==typeof e.to||"string"==typeof e.san||"string"==typeof e.tcn||!e.from&&"string"==typeof e.to&&"string"==typeof e.drop||null===e.to&&"string"==typeof e.from||!e.from&&"string"==typeof e.to&&"string"==typeof e.put},movesMatch:function movesMatch(e,t){return!(e.from!==t.from||e.to!==t.to||e.promotion&&e.promotion!==t.promotion||e.drop&&e.drop!==t.drop)},getMoveNumber:function getMoveNumber(e,t){return 1===e?Math.ceil(t/2+1):Math.floor(t/2+1)},isUserTurn:function isUserTurn(e){return e.setup.playingAs===e.setup.sideToMove},getFens:function getFens(e){var t=[e.setup.fen];return(e.tree.lines||n(40).default.state.lines)[0].forEach(function(e){t.push(e.fen)}),t},getLastTcn:function getLastTcn(e){var t=a.a.getTcn(e);return t.substr(t.length-2)},getSanMoves:function getSanMoves(e,t){var r=[];return(e.tree.lines||n(40).default.state.lines)[0].some(function(e,n){return"number"==typeof t&&n>=t||(r.push(e.san),!1)}),r}}},30:function(e,t,n){"use strict";n.d(t,"d",function(){return r}),n.d(t,"c",function(){return o}),n.d(t,"i",function(){return a}),n.d(t,"j",function(){return i}),n.d(t,"h",function(){return s}),n.d(t,"a",function(){return c}),n.d(t,"f",function(){return u}),n.d(t,"g",function(){return d}),n.d(t,"e",function(){return f}),n.d(t,"b",function(){return p});var r=function getWindowTitle(){return encodeURIComponent(window.document.title)},o=function getWindowLocation(){return encodeURIComponent(window.location.href)},a=window.location.pathname,i=r(),s=o();window.chessBrowserChecker={};var c=function bookmarkPage(){if(window.sidebar&&window.sidebar.addPanel)window.sidebar.addPanel(i,s,"");else if(window.external&&"AddFavorite"in window.external)window.external.AddFavorite(s,i);else{var e=-1!==window.navigator.userAgent.toLowerCase().indexOf("mac")?"Cmd":"Ctrl";alert("Press ".concat(e,"+D to bookmark this page."))}};window.chessBrowserChecker.supportedBrowsers=["Chrome","edge","Firefox","IE","Safari","Waterfox"];var l={chrome:74,edge:17,firefox:60,safari:11,waterfox:56};window.chessBrowserChecker.supportedBrowserVersions=l;var u=function printWindow(){window.print()},d=function sendEmail(e,t){window.location.href="mailto:?".concat(e,"&").concat(t)},f=function isMobile(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.navigator.userAgent;return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(e)},p=function getBrowser(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.navigator.userAgent,n=t.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i)||[];if(function isEdge(){return null!==(arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.navigator.userAgent).match(/Edge/)}(t)){var r=t.indexOf("Edge/");return{name:"Edge",version:parseInt(t.substring(r+5,t.indexOf(".",r)),10)}}if(/trident/i.test(n[1]))return{name:"IE",version:(e=/\brv[ :]+(\d+)/g.exec(t)||[])[1]||""};if("Chrome"===n[1]&&null!=(e=t.match(/\bOPR\/(\d+)/)))return{name:"Opera",version:e[1]};if("Firefox"===n[1]){var o=t.match(/(waterfox(?=\/))\/?\s*(\d+)/i)||[];if("Waterfox"===o[1])return{name:o[1],version:parseInt(o[2],10)}}return"Safari"===(n=n[2]?[n[1],n[2]]:[window.navigator.appName,window.navigator.appVersion,"-?"])[0]&&null!=(e=t.match(/version\/(\d+)/i))&&n.splice(1,1,e[1]),{name:n[0],version:parseInt(n[1],10)}};window.chessBrowserChecker.getBrowserInformation=p;window.chessBrowserChecker.isOldBrowser=function isOldBrowser(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.navigator.userAgent,t=p(e);return"Chrome"===t.name?t.version<l.chrome:"Safari"===t.name?t.version<l.safari:"Firefox"===t.name?t.version<l.firefox:"Edge"===t.name?t.version<l.edge:"IE"===t.name}},34:function(e,t,n){"use strict";var r={name:"form-button",mixins:[n(52).a],props:{disabled:{type:Boolean,default:!1},fullWidth:{type:Boolean,default:!1},href:{type:String,required:!1},size:{type:String,required:!1},theme:{type:String,required:!1},type:{type:String,default:"button"}},methods:{handleClick:function handleClick(e){e.stopPropagation(),this.href&&(window.location=this.href)}}},o=n(73),a=n(8);var i=Object(a.a)(r,function(){var e,t=this,n=t.$createElement;return(t._self._c||n)("button",t._g({class:[t.componentClasses(),t.$style[t.size],t.$style[t.theme],(e={},e[t.$style["full-width"]]=t.fullWidth,e)],attrs:{disabled:t.disabled,type:t.type},on:{click:t.handleClick}},t.$listeners),[t._t("default")],2)},[],!1,function injectStyles(e){this.$style=o.default.locals||o.default},null,null);t.a=i.exports},35:function(e,t,n){e.exports=n(19)(19)},36:function(e,t,n){var r,o;
/**
 * @author William DURAND <william.durand1@gmail.com>
 * @license MIT Licensed
 */void 0===(o="function"==typeof(r=function(){"use strict";var e={},t="en",n=[],r=new RegExp(/^\w+\: +(.+)$/),o=new RegExp(/^\s*((\{\s*(\-?\d+[\s*,\s*\-?\d+]*)\s*\})|([\[\]])\s*(-Inf|\-?\d+)\s*,\s*(\+?Inf|\-?\d+)\s*([\[\]]))\s?(.+?)$/),a=new RegExp(/^\s*(\{\s*(\-?\d+[\s*,\s*\-?\d+]*)\s*\})|([\[\]])\s*(-Inf|\-?\d+)\s*,\s*(\+?Inf|\-?\d+)\s*([\[\]])/),i={locale:get_current_locale(),fallback:t,placeHolderPrefix:"%",placeHolderSuffix:"%",defaultDomain:"messages",pluralSeparator:"|",add:function(t,r,o,a){var i=a||this.locale||this.fallback,s=o||this.defaultDomain;return e[i]||(e[i]={}),e[i][s]||(e[i][s]={}),e[i][s][t]=r,!1===function exists(e,t){for(var n=0;n<e.length;n++)if(t===e[n])return!0;return!1}(n,s)&&n.push(s),this},trans:function(e,t,n,r){var o=get_message(e,n,r,this.locale,this.fallback);return replace_placeholders(o,t||{})},transChoice:function(e,t,n,s,c){var l=get_message(e,s,c,this.locale,this.fallback),u=parseInt(t,10);return void 0===(n=n||{}).count&&(n.count=t),void 0===l||isNaN(u)||(l=function pluralize(e,t,n){var s,c,l=[],u=[],d=e.split(i.pluralSeparator),f=[];for(s=0;s<d.length;s++){var p=d[s];o.test(p)?(f=p.match(o),l[f[0]]=f[f.length-1]):r.test(p)?(f=p.match(r),u.push(f[1])):u.push(p)}for(c in l)if(a.test(c))if((f=c.match(a))[1]){var m,h=f[2].split(",");for(m in h)if(t==h[m])return l[c]}else{var v=convert_number(f[4]),g=convert_number(f[5]);if(("["===f[3]?t>=v:t>v)&&("]"===f[6]?t<=g:t<g))return l[c]}return u[function plural_position(e,t){var n=t;switch("pt_BR"===n&&(n="xbr"),n.length>3&&(n=n.split("_")[0]),n){case"bo":case"dz":case"id":case"ja":case"jv":case"ka":case"km":case"kn":case"ko":case"ms":case"th":case"tr":case"vi":case"zh":return 0;case"af":case"az":case"bn":case"bg":case"ca":case"da":case"de":case"el":case"en":case"eo":case"es":case"et":case"eu":case"fa":case"fi":case"fo":case"fur":case"fy":case"gl":case"gu":case"ha":case"he":case"hu":case"is":case"it":case"ku":case"lb":case"ml":case"mn":case"mr":case"nah":case"nb":case"ne":case"nl":case"nn":case"no":case"om":case"or":case"pa":case"pap":case"ps":case"pt":case"so":case"sq":case"sv":case"sw":case"ta":case"te":case"tk":case"ur":case"zu":return 1==e?0:1;case"am":case"bh":case"fil":case"fr":case"gun":case"hi":case"ln":case"mg":case"nso":case"xbr":case"ti":case"wa":return 0===e||1==e?0:1;case"be":case"bs":case"hr":case"ru":case"sr":case"uk":return e%10==1&&e%100!=11?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2;case"cs":case"sk":return 1==e?0:e>=2&&e<=4?1:2;case"ga":return 1==e?0:2==e?1:2;case"lt":return e%10==1&&e%100!=11?0:e%10>=2&&(e%100<10||e%100>=20)?1:2;case"sl":return e%100==1?0:e%100==2?1:e%100==3||e%100==4?2:3;case"mk":return e%10==1?0:1;case"mt":return 1==e?0:0===e||e%100>1&&e%100<11?1:e%100>10&&e%100<20?2:3;case"lv":return 0===e?0:e%10==1&&e%100!=11?1:2;case"pl":return 1==e?0:e%10>=2&&e%10<=4&&(e%100<12||e%100>14)?1:2;case"cy":return 1==e?0:2==e?1:8==e||11==e?2:3;case"ro":return 1==e?0:0===e||e%100>0&&e%100<20?1:2;case"ar":return 0===e?0:1==e?1:2==e?2:e>=3&&e<=10?3:e>=11&&e<=99?4:5;default:return 0}}(t,n)]||u[0]||void 0}(l,u,c||this.locale||this.fallback)),replace_placeholders(l,n)},fromJSON:function(e){if("string"==typeof e&&(e=JSON.parse(e)),e.locale&&(this.locale=e.locale),e.fallback&&(this.fallback=e.fallback),e.defaultDomain&&(this.defaultDomain=e.defaultDomain),e.translations)for(var t in e.translations)for(var n in e.translations[t])for(var r in e.translations[t][n])this.add(r,e.translations[t][n][r],n,t);return this},reset:function(){e={},n=[],this.locale=get_current_locale()}};function replace_placeholders(e,t){var n,r=i.placeHolderPrefix,o=i.placeHolderSuffix;for(n in t){var a=new RegExp(r+n+o,"g");if(a.test(e)){var s=String(t[n]).replace(new RegExp("\\$","g"),"$$$$");e=e.replace(a,s)}}return e}function get_message(t,r,o,a,i){var s,c,l,u,d=o||a||i,f=r,p=d.split("_")[0];if(!(d in e))if(p in e)d=p;else{if(!(i in e))return t;d=i}if(null==f)for(var m=0;m<n.length;m++)if(has_message(d,n[m],t)||has_message(p,n[m],t)||has_message(i,n[m],t)){f=n[m];break}if(has_message(d,f,t))return e[d][f][t];for(;d.length>2&&(s=d.length,c=d.split(/[\s_]+/),l=c[c.length-1],u=l.length,1!==c.length);)if(has_message(d=d.substring(0,s-(u+1)),f,t))return e[d][f][t];return has_message(i,f,t)?e[i][f][t]:t}function has_message(t,n,r){return t in e&&n in e[t]&&r in e[t][n]}function convert_number(e){return"-Inf"===e?Number.NEGATIVE_INFINITY:"+Inf"===e||"Inf"===e?Number.POSITIVE_INFINITY:parseInt(e,10)}function get_current_locale(){return"undefined"!=typeof document?document.documentElement.lang.replace("-","_"):t}return i})?r.call(t,n,t,e):r)||(e.exports=o)},37:function(e,t,n){"use strict";n.d(t,"a",function(){return o});var r=n(3),o={premove:function premove(e,t){var n=!1;return e.settings.premoves&&!e.settings.analysis&&e.jce.premoves.length<8&&(n=e.jce.premove(t,e.setup.playingAs)),n},cancelPremoves:function cancelPremoves(e){return!!e.jce.premoves.length&&(e.jce.premoves.length=0,!0)},consumePremove:function consumePremove(e){if(e.jce.premoves.length){var t=e.jce.premoves.shift();if(r.a.move(e,t.move)){var n=e.jce.premoves.map(function(e){return e});e.jce.premoves.length=0;for(var a=0;a<n.length;a+=1){var i=n[a];if(delete i.move.san,!o.premove(e,i.move))break}return!0}}return!1}}},381:function(e,t,n){e.exports={ad:"what-is-chess-ad",title:"what-is-chess-title",play:"what-is-chess-play",icon:"what-is-chess-icon"}},39:function(e,t,n){"use strict";function removeClassFromElement(e,t){var n=document.getElementById(e);null===n&&void 0===n||n.classList.remove(t)}function addClassToElement(e,t){var n=document.getElementById(e);null===n&&void 0===n||n.classList.add(t)}n.d(t,"b",function(){return removeClassFromElement}),n.d(t,"a",function(){return addClassToElement})},4:function(e,t,n){"use strict";n.d(t,"a",function(){return l});var r=n(5),o=n.n(r),a=n(2),i=n(3);function ownKeys(e,t){var n=Object.keys(e);return Object.getOwnPropertySymbols&&n.push.apply(n,Object.getOwnPropertySymbols(e)),t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(n,!0).forEach(function(t){o()(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var s={},c={q:9,r:5,b:3,n:3,p:1,k:0},l={getInitialSettings:function getInitialSettings(){return{variations:!1,analysis:!1,mainLineIsImmutable:!1,rules:!0,premoves:!1,GTM:!1}},getInitialSetup:function getInitialSetup(){return{ranks:8,files:8}},getInitialTree:function getInitialTree(){return{initialMarkings:{arrows:[],effects:[],squares:[]}}},getInitialMarkings:function getInitialMarkings(){return{arrows:[],blinkingSquares:[],effects:[],squares:[]}},clearState:function clearState(e){return e.setup=l.getInitialSetup(),e},updateState:function updateState(e){e.setup=Object.assign({},e.setup,i.a.getPositionInfo(e),i.a.getPositionDetails(e)),i.a.addExtraCastlingMoves(e),e.tree.lines=a.a.getLinesFromJce(e),e.tree.selected=e.jce.ids(),e.tree.selectedNode=a.a.getSelectedNode(e),e.setup.capturedPieces=l.getCapturedPieces(e.setup),e.setup.capturedScores=l.getCapturedScores(e.setup),e.setup.result=l.getResult(e),e.premoves=i.a.getPremoves(e),e.variant=i.a.getHeaders(e).Variant||e.variant,e.startingMoveNumber=e.setup.moveNumber;var t=a.a.getNode(e.tree.lines,i.a.getSelectedIds(e))||e.tree.initialMarkings;return t&&(e.markings.squares=t.squares?t.squares.map(function(e){return _objectSpread({},e)}):[],e.markings.arrows=t.arrows?t.arrows.map(function(e){return _objectSpread({},e)}):[],e.setup.effects?e.markings.effects=e.setup.effects:t.effects?e.markings.effects=t.effects.map(function(e){return _objectSpread({},e)}):e.markings.effects=[]),s[e.id]=!0,e.sibling&&!s[e.sibling.id]&&(e.sibling=l.updateState(e.sibling)),s={},e},getCapturedPieces:function getCapturedPieces(e){return e.pieces.reduce(function(e,t){if("k"===t.type)return e;var n=t.promoted?"p":t.type;return e[t.color-1][n]-=1,e},[{p:8,n:2,b:2,r:2,q:1},{p:8,n:2,b:2,r:2,q:1}])},getCapturedScores:function getCapturedScores(e){return e.pieces.reduce(function(e,t){return e[t.color-1]+=c[t.type],e},[0,0])},getResult:function getResult(e){var t=i.a.getHeaders(e).Result;return"*"!==t?t:e.setup.insufficient||e.setup.stalemate?"1/2-1/2":e.setup.gameOver&&!e.setup.draw?1===e.setup.sideToMove?"0-1":"1-0":"*"}}},40:function(e,t,n){"use strict";n.r(t),n.d(t,"nodeProps",function(){return i});var r=n(29),o=n.n(r),a=n(2),i=["additionalAnnotation","annotation","arrows","color","comment","commentBefore","fen","flags","from","ids","lines","moveNumber","piece","previous","promotion","san","time","to"];t.default=function moveList(){var e,t={lines:[]};return{state:t,updateLines:function updateLines(n){t.lines=o()(n),(n||[]).forEach(function(r,o){e=a.a.isContinuation(n,r.id),t.lines[o]=r.map(function(t){var n={};return i.forEach(function(e){void 0!==t[e]&&(n[e]=t[e])}),e&&0===t.ids.move&&(n.commentBefore=r.initComment),n}),t.lines[o].atMoveNode=r.atMoveNode,t.lines[o].id=r.id,t.lines[o].parentId=r.parentId})}}}()},400:function(e,t,n){e.exports={header:"list-players-header",title:"list-players-title",subtitle:"list-players-subtitle",section:"list-players-section",item:"list-players-item","place-number":"list-players-place-number","avatar-link":"list-players-avatar-link","avatar-img":"list-players-avatar-img","chess-title":"list-players-chess-title",username:"list-players-username",rating:"list-players-rating"}},401:function(e,t,n){e.exports={separator:"authentication-login-separator",label:"authentication-login-label",form:"authentication-login-form","zero-margin":"authentication-login-zero-margin",options:"authentication-login-options",forgot:"authentication-login-forgot",social:"authentication-login-social",button:"authentication-login-button",facebook:"authentication-login-facebook",google:"authentication-login-google",icon:"authentication-login-icon"}},410:function(e,t,n){"use strict";t.a={GAME_ILLEGAL_MOVE:100,RATING_MAX:3500,RATING_MIN:0,ACTIVE_DAY_CUTOFF:365,TIME_WARNING_SECONDS:28800,MAX_DAY_PER_MOVE:14,TIME_MULTIPLIER:10,DEFAULT_NAME:"Let's Play!",WELCOME_NAME:"Welcome to Chess.com!",MIN_CHEAT_POLICY_RATING:2e3,MIN_SUSPICIOUS_PLAY_RATING:2e3,MIN_SUSPICIOUS_PLAY_TOGGLE_PERC:75,MIN_SUSPICIOUS_PLAY_PLY_COUNT:40,MIN_PLY_COUNT_RATED:6,SPAM_CHECK_GAMES_MIN_LIMIT:5,SPAM_CHECK_NEW_PLAYERS_GAMES_MIN_LIMIT:10,DEFAULT_FEN_SHORT:"rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq",DEFAULT_FEN:"rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1",ACCESS_LEVEL_SUPER_ADMIN:"super_admin",ACCESS_LEVEL_ADMIN:"admin",ACCESS_LEVEL_MEMBER:"member",ACTIVITY_TYPE_NEWS:"news",ACTIVITY_TYPE_EVENT:"event",ACTIVITY_TYPE_FORUM:"forum",ACTIVITY_TYPE_NOTES:"notes",POINT_VALUE:1,LAST_ACTIVITY_DATE_EXPIRATION_IN_MINUTES:10,MAX_PROBLEMS_PER_DAY_DEFAULT:3,AVERAGE_TIME_PER_MOVE:30,MIN_ATTEMPT_COUNT:20,MIN_SCORE_TO_BE_QUEUED:5,BEST_SCORE:0,DEAD_SCORE:10,MIN_RATING:400,MAX_ATTEMPT_LOGGED_OUT:10,USER_FEED_MAX_PAGES:4,USER_FEED_ITEMS_FIRST_PAGE:5,USER_FEED_ITEMS_PER_PAGE:20,STD_PROP_LIST:1,ARRAY_AS_PROPS:2,DEFAULT_LOCALE:"en_US",DEFAULT_LANGUAGE_CODE:"en",DEFAULT_LANGUAGE_DIRECTION:"ltr",DEFAULT_MAX_YEAR_INCREASE:5,CONTENT_ITEMS_PER_PAGE:25,LEADERBOARD_ITEMS_PER_PAGE:50,I18N_DEFAULT_LOCALE:"en_US"}},42:function(e,t,n){e.exports=n(19)(21)},427:function(e,t,n){e.exports={component:"main-ad-component",icon:"main-ad-icon"}},428:function(e,t,n){e.exports={question:"survey-question","question-link":"survey-question-link",label:"survey-label","label-title":"survey-label-title",subtitle:"survey-subtitle",progress:"survey-progress","progress-bar":"survey-progress-bar",submit:"survey-submit",actions:"survey-actions",separator:"survey-separator",details:"survey-details","results-button":"survey-results-button"}},429:function(e,t,n){e.exports={component:"tv-player-component",iframe:"tv-player-iframe"}},43:function(e,t,n){"use strict";n.d(t,"a",function(){return r}),n.d(t,"b",function(){return o});var r={AUTHENTICATE:"navigation-sidebar-authenticate-component",AUTHENTICATE_COLLAPSED:"navigation-sidebar-authenticate-collapsed",BADGE_HOME:"navigation-sidebar-home-badge",BADGE_INDEX:"navigation-sidebar-index-badge",BADGE_MESSAGES:"navigation-sidebar-messages-badge",BADGE_PLAY:"navigation-sidebar-play-badge",BOTTOM_LINK_EXPAND_COLLAPSE:"navigation-sidebar-expand-collapse-feature",BOTTOM_LINK_HELP:"navigation-sidebar-help-feature",BOTTOM_LINK_SEARCH:"navigation-sidebar-search-feature",BOTTOM_LINK_SETTINGS:"navigation-settings-link",BOTTOM_LINK_TOP_MENU:"navigation-toggle",DAILY_TIME_CONTROLS_BUTTON:"navigation-sidebar-play-button",HELP_POPOVER:"navigation-popover-help-component navigation-sidebar-feature-popover-help",LINK:"navigation-sidebar-category-component",LINK_HOME:"navigation-sidebar-home-category",LINK_INDEX:"navigation-sidebar-index-category",LINK_LEARN:"navigation-sidebar-learn-category",LINK_PLAY:"navigation-sidebar-play-category",LINK_SHARE:"navigation-sidebar-share-category",LOGO:"navigation-sidebar-primary-logo",LOGO_COLLAPSED:"navigation-sidebar-logo-collapsed",NAV_CLOSE_ICON:"nav-close-icon",NAV_OPEN_ICON:"nav-open-icon",NOTIFICATIONS_PANEL_CATCHMENT:"navigation-sidebar-notifications-catchment",SEARCH_BUTTON:"navigation-search-link",SEARCH_POPOVER:"navigation-sidebar-feature-popover-search",SECONDARY:"navigation-sidebar-secondary-component",SECONDARY_ACTIVE:"navigation-sidebar-secondary-active",SECONDARY_COLLAPSED:"navigation-sidebar-secondary-collapsed",SECONDARY_CONTROLS_SHOW:"navigation-sidebar-play-show",SECONDARY_DAILY_TIME_CONTROLS:"navigation-sidebar-play-daily",SECONDARY_ELEMENT:"navigation-sidebar-secondary-element",SECONDARY_LINK_DAILY:"navigation-secondary-dailychess",SECONDARY_LINK_LIVE:"navigation-secondary-livechess",SECONDARY_LIVE_TIME_CONTROLS:"navigation-sidebar-play-live",SECONDARY_NAVIGATION:"navigation-sidebar-secondary-navigation",SECONDARY_PANEL_HOME:"navigation-sidebar-home-component",SECONDARY_PANEL_LEARN:"navigation-sidebar-learn-component",SECONDARY_PANEL_NOTIFICATIONS:"navigation-sidebar-notifications-component",SECONDARY_PANEL_PLAY:"navigation-sidebar-play-component",SECONDARY_PANEL_SHARE:"navigation-sidebar-share-component",SECONDARY_WIDE:"navigation-sidebar-secondary-wide",SIDEBAR:"#sb",SIDEBAR_CATEGORIES_COLLAPSED:"navigation-sidebar-categories-collapsed",SIDEBAR_CATEGORY:"navigation-sidebar-category-component",SIDEBAR_CATEGORY_COLLAPSED:"navigation-sidebar-category-collapsed",SIDEBAR_COLLAPSED:"collapsed",SIDEBAR_FEATURE:"navigation-sidebar-feature-component",SIDEBAR_FEATURE_COLLAPSED:"navigation-sidebar-feature-collapsed",SIDEBAR_FEATURES:"navigation-sidebar-features-component",SIDEBAR_FEATURES_COLLAPSED:"navigation-sidebar-features-collapsed",SIDEBAR_FORCED_OPEN:"navigation-sidebar-open",SIDEBAR_GAMES:"navigations-sidebar-games",SIDEBAR_INTERNATIONAL:"nav-sidebar-wide",SIDEBAR_LINKS:"navigation-sidebar-primary-top",TIME_CONTROLS:"navigation-sidebar-play-daily",TV_COMPONENT:"navigation-sidebar-category-component navigation-sidebar-categories-watch",TV_ELEMENT:"chesstv",TV_EXCLAM:"navigation-sidebar-categories-exclamation",TV_POPOVER:"navigation-popover-watch-component navigation-sidebar-categories-popover-watch"},o={DAILY_TIME_CONTROLS_HEADER:"daily-time-controls-header",LIVE_TIME_CONTROLS_HEADER:"live-time-controls-header",DAILY_TIME_CONTROLS_SIDEBAR:"daily-time-controls-sidebar",LIVE_TIME_CONTROLS_SIDEBAR:"live-time-controls-sidebar",MOBILE_NAV_TOGGLE:"mobile-nav-toggle",LANGUAGE_PICKER_MODAL:"language-picker-modal",MODAL_VIDEO:"modal-video"}},430:function(e,t,n){e.exports={component:"tv-player-headline-component",player:"tv-player-headline-player"}},44:function(e,t,n){"use strict";n.d(t,"a",function(){return o}),n.d(t,"d",function(){return a}),n.d(t,"e",function(){return i}),n.d(t,"f",function(){return s}),n.d(t,"g",function(){return c}),n.d(t,"b",function(){return l}),n.d(t,"c",function(){return copyInputValueToBuffer}),n.d(t,"h",function(){return showHideMore});var r=n(10),o=(n(67),function browserWidth(){return window.parent.innerWidth}),a=function getClickedChild(e,t,n){var r=n,o=null;if(!e||!t||!n)return o;for(;r&&r!==e&&!o;)r.classList.contains(t)&&(o=r),r=r.parentNode;return o},i=function getElement(e){return document.querySelector(".".concat(e))},s=function getElements(e){return document.getElementsByClassName(e)},c=function injectMounts(e,t){t.forEach(function(t){var n=document.createElement("div");n.id=t,e.appendChild(n)})},l=function copyCustomValueToClipoard(e){var t=document.createElement("input");t.value=e,document.body.appendChild(t),t.select(),document.execCommand("copy"),document.body.removeChild(t)};function copyInputValueToBuffer(e){e&&(e.focus(),e.select(),document.execCommand("copy"))}function showHideMore(e,t,n,o){var a=i(e),c=s(t),l=i(n),u=i(o);a&&(l.innerHTML=r.e.showMore,a.addEventListener("click",function(){u.classList.toggle("sidebar-users-grid-toggle-icon-up"),l.innerHTML=l.innerHTML===r.e.showMore?r.e.showLess:r.e.showMore,Array.from(c).forEach(function(e){e.style.display="block"===e.style.display?"none":"block"})}))}},45:function(e,t,n){e.exports={component:"modal-container-component","parent-centered":"modal-container-parent-centered",bg:"modal-container-bg",enter:"modal-container-enter",leave:"modal-container-leave","content-centered":"modal-container-content-centered"}},46:function(e,t,n){e.exports={component:"icon-font-component",primary:"icon-font-primary",darkMode:"icon-font-darkMode",secondary:"icon-font-secondary",tertiary:"icon-font-tertiary",chess:"icon-font-chess",captured:"icon-font-captured"}},47:function(e,t,n){"use strict";var r=n(63),o={name:"modal-container",props:{autoShow:{type:Boolean,default:!1},closeOnBackgroundClick:{type:Boolean,default:!0},closeOnEscPress:{type:Boolean,default:!1},centerOverParent:{type:Boolean,default:!1},centerOverContent:{type:Boolean,default:!1}},data:function data(){return{visible:!1}},mounted:function mounted(){this.closeOnEscPress&&window.addEventListener("keyup",this.onKeyPress),this.autoShow&&this.show()},beforeDestroy:function beforeDestroy(){this.closeOnEscPress&&window.removeEventListener("keyup",this.onKeyPress)},methods:{hide:function hide(){this.visible=!1,this.$emit(r.a.MODAL_DID_HIDE)},onBackgroundClick:function onBackgroundClick(){this.closeOnBackgroundClick&&this.hide()},onKeyPress:function onKeyPress(e){27===e.keyCode&&this.hide()},show:function show(){this.visible=!0}}},a=n(61),i=n(8);var s=Object(i.a)(o,function(){var e,t,n=this,r=n.$createElement,o=n._self._c||r;return o("transition",{attrs:{"enter-active-class":n.$style.enter,"leave-active-class":n.$style.leave}},[n.visible?o("div",{class:[n.$style.component,(e={},e[n.$style["parent-centered"]]=n.centerOverParent,e),(t={},t[n.$style["content-centered"]]=n.centerOverContent,t)]},[n.centerOverParent?n._e():o("div",{class:n.$style.bg,on:{click:n.onBackgroundClick}}),n._v(" "),[n._t("default")]],2):n._e()])},[],!1,function injectStyles(e){this.$style=a.default.locals||a.default},null,null);t.a=s.exports},48:function(e,t,n){"use strict";var r=n(5),o=n.n(r),a=n(16);function ownKeys(e,t){var n=Object.keys(e);return Object.getOwnPropertySymbols&&n.push.apply(n,Object.getOwnPropertySymbols(e)),t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n}var i=n(3),s=n(12),c=n(1),l=n(4),u=n(15),d=n(2);function create_variation_ownKeys(e,t){var n=Object.keys(e);return Object.getOwnPropertySymbols&&n.push.apply(n,Object.getOwnPropertySymbols(e)),t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n}var f=function createVariation(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=function create_variation_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?create_variation_ownKeys(n,!0).forEach(function(t){o()(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):create_variation_ownKeys(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},e.tree.selected);if(!e.settings.variations)return null;void 0!==n.line&&void 0!==n.move?i.a.selectNode(e,n):n=e.tree.selected;var a=d.a.getNode(e.jce._lines(),{line:n.line,move:n.move}).san;return i.a.createVariation(e),t&&i.a.move(e,a),c.b.add(e.history,c.a.JUMP_TO_POSITION,{from:r,to:n}),l.a.updateState(e)},p=function shouldNotMutateLine(e){return-1!==e.tree.selected.move&&e.settings.mainLineIsImmutable&&d.a.isMainLine(e.tree.selected.line)},m=function isValidMove(e,t){return null!==u.a.getPositionDetails({fen:i.a.getFen(e),variant:i.a.getHeaders(e).Variant||"Chess"},t)},h=function makeMove(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=i.a.getJCEMove(e,t);if(null===r)return c.b.add(e.history,c.a.ILLEGAL_MOVE),e;var o=e.settings.analysis||n;if(!d.a.isHead(e.jce._lines(),e.tree.selected)){if(!o)return Object(s.a)(e,d.a.getHeadIds(e.jce._lines(),e.tree.selected.line));var a=d.a.getNextMatchingNode(e.jce._lines(),e.tree.selected,r);if(a)return Object(s.a)(e,a.ids);if(m(e,r)){if(c.b.add(e.history,c.a.TREE_AMENDED),e.settings.variations)return i.a.selectNode(e,{line:e.tree.selected.line,move:e.tree.selected.move+1}),i.a.createVariation(e),l.a.updateState(e),makeMove(e,r);if(!e.settings.mainLineIsImmutable)return d.a.prune(e.jce._lines(),e.tree.selected),makeMove(e,r)}return c.b.add(e.history,c.a.ILLEGAL_MOVE),e}if(!o&&!i.a.isUserTurn(e))return c.b.add(e.history,c.a.ILLEGAL_MOVE),e;if(o&&e.settings.variations&&p(e)&&m(e,r)){var u=d.a.getNextMatchingNode(e.jce._lines(),e.tree.selected,r);return u?Object(s.a)(e,u.ids):(f(e,!0),l.a.updateState(e),makeMove(e,r))}return!p(e)&&i.a.move(e,r,e.settings.rules)?(c.b.add(e.history,c.a.MAKE_MOVE,r),l.a.updateState(e)):(c.b.add(e.history,c.a.ILLEGAL_MOVE),e)},v=function setPlayingAs(e,t){return[1,2].indexOf(t)>=0&&(e.setup.playingAs=t),e},g=n(75),b=function changeSettings(e,t){var n=Object.prototype.hasOwnProperty.call(t,"premoves")&&e.settings.premoves!==t.premoves;return e.settings=Object.assign(e.settings,t),e.settings.premoves||Object(g.a)(e),c.b.add(e.history,c.a.SETTINGS_CHANGE),n&&l.a.updateState(e),e},_=function loadFromFen(e,t){return t?(d.a.clearAllMarkings(e.jce._lines()),i.a.load(e,t),c.b.add(e.history,c.a.LOAD),l.a.updateState(e)):null},E=function clearMarkings(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=d.a.getNode(e.jce._lines(),t)||d.a.getNode(e.jce._lines(),i.a.getSelectedIds(e))||e.tree.initialMarkings;return(r.arrows&&r.arrows.length||r.squares&&r.squares.length||r.effects&&r.effects.length)&&(r.arrows=[],r.squares=[],r.effects=[],n&&(l.a.updateState(e),c.b.add(e.history,c.a.TREE_CHANGE))),e},y=function convertFileToInteger(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").charCodeAt(0)-97+1},O=function createGame(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={id:a.a.getId(),variant:e.variant||"chess",settings:Object.assign(l.a.getInitialSettings(),e.settings),setup:Object.assign(l.a.getInitialSetup(),e.setup),tree:Object.assign(l.a.getInitialTree(),e.tree),history:c.b.getInitialHistory(),markings:Object.assign(l.a.getInitialMarkings(),e.markings),premoves:[]};return v(t,e.player||1),Object.defineProperty(t,"jce",{writable:!1,enumerable:!1,configurable:!1,value:i.a.createJce(e)}),i.a.updateIdsFromJce(t),c.b.add(t.history,c.a.INIT),t.jce.siblingGame&&!t.sibling&&(t.sibling={id:a.a.getId(),variant:t.variant||"chess",sibling:t,settings:t.settings,setup:l.a.getInitialSetup(),tree:l.a.getInitialTree(),history:c.b.getInitialHistory(),markings:Object.assign(l.a.getInitialMarkings(),e.markings),premoves:[]},Object.defineProperty(t.sibling,"jce",{writable:!1,enumerable:!1,configurable:!1,value:i.a.createJce({game:t.jce.siblingGame})}),i.a.updateIdsFromJce(t.sibling)),l.a.updateState(t),t},A=n(26);function select_line_start_ownKeys(e,t){var n=Object.keys(e);return Object.getOwnPropertySymbols&&n.push.apply(n,Object.getOwnPropertySymbols(e)),t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n}var S=function selectLineStart(e){var t=d.a.getSelectedLine(e),n=0,r=function select_line_start_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?select_line_start_ownKeys(n,!0).forEach(function(t){o()(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):select_line_start_ownKeys(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},e.tree.selected);0===e.tree.selected.move&&void 0!==t.parentId?(i.a.selectLine(e,t.parentId),t=d.a.getSelectedLine(e)):d.a.isMainLine(t.id)&&(n=-1);var a={line:t.id,move:n};return i.a.selectNode(e,a),c.b.add(e.history,c.a.JUMP_TO_POSITION,{from:r,to:a}),l.a.updateState(e)},N=function deleteNode(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=(d.a.findNode(e.jce._lines(),e.tree.selected),Object.assign(e.tree.selected,t));return n.line>0&&(n.move<=0||d.a.isFirstVisibleNode(e.jce._lines(),n))&&(n.move=-1),e.jce.deletePosition(n.move,n.line),c.b.add(e.history,c.a.TREE_CHANGE),l.a.updateState(e),e},T=function deleteRemainingNodes(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=Object.assign(e.tree.selected,t);return N(e,{move:n.move+1,line:n.line})},C=function getTcn(e,t){var r=e.jce&&e.jce._lines()||n(40).default.state.lines;return u.a.encodeTCN(d.a.getLine(r,t)||r[0])},I=n(11),w=n(49),L=function loadFromTcn(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:a.a.getInitialFen(),r=arguments.length>3?arguments[3]:void 0;_(e,n);var o=u.a.decodeTCN(t);return o?(o.forEach(function(t){"Crazyhouse"!==e.variant&&"Bughouse"!==e.variant||!t.drop||Object(w.a)(e,e.setup.sideToMove,t.drop),h(e,t,!0)}),l.a.updateState(e),r?Object(s.a)(e,e.tree.selected,-1):(c.b.add(e.history,c.a.LOAD),e)):null},k=function markArrow(e,t,n){var r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],o=d.a.getNode(e.jce._lines(),n)||d.a.getNode(e.jce._lines(),i.a.getSelectedIds(e))||e.tree.initialMarkings;return o.arrows||(o.arrows=[]),o.arrows.find(function(e){return i.a.isFileRankEqual(e.fromFileRank,t.fromFileRank)&&i.a.isFileRankEqual(e.toFileRank,t.toFileRank)})||(o.arrows.push(t),r&&(l.a.updateState(e),c.b.add(e.history,c.a.TREE_CHANGE))),e},P=function markEffect(e){var t=e.game,n=e.effect,r=e.ids,o=e.persist,a=e.updateState,s=void 0===a||a;if(o)return t.setup.effects=n?[n]:null,l.a.updateState(t),t;var u=d.a.getNode(t.jce._lines(),r)||d.a.getNode(t.jce._lines(),i.a.getSelectedIds(t))||t.tree.initialMarkings;return u.effects||(u.effects=[]),u.effects.find(function(e){return i.a.isFileRankEqual(e.square,n.square)})||(u.effects.push(n),s&&(l.a.updateState(t),c.b.add(t.history,c.a.TREE_CHANGE))),t},M=function markSquare(e,t,n){var r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],o=d.a.getNode(e.jce._lines(),n)||d.a.getNode(e.jce._lines(),i.a.getSelectedIds(e))||e.tree.initialMarkings;return o.squares||(o.squares=[]),o.squares.find(function(e){return i.a.isFileRankEqual(e,t)})||(o.squares.push(t),r&&(l.a.updateState(e),c.b.add(e.history,c.a.TREE_CHANGE))),e},D=function fixTcn(e,t){var n=O({variant:e.variant,fen:a.a.getFirstFen(e)});return L(n,t,n.setup.fen),C(n)};function merge_tcn_ownKeys(e,t){var n=Object.keys(e);return Object.getOwnPropertySymbols&&n.push.apply(n,Object.getOwnPropertySymbols(e)),t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n}function select_line_end_ownKeys(e,t){var n=Object.keys(e);return Object.getOwnPropertySymbols&&n.push.apply(n,Object.getOwnPropertySymbols(e)),t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n}var R=function selectLineEnd(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.tree.selected.line,n=d.a.getLine(e.jce._lines(),t).length-1,r=function select_line_end_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?select_line_end_ownKeys(n,!0).forEach(function(t){o()(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):select_line_end_ownKeys(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},e.tree.selected);if(e.tree.selected.move!==n||t!==e.tree.selected.line){var a={line:t,move:n};return i.a.selectNode(e,a),c.b.add(e.history,c.a.JUMP_TO_POSITION,{from:r,to:a}),l.a.updateState(e)}return e};function reset_to_main_line_ownKeys(e,t){var n=Object.keys(e);return Object.getOwnPropertySymbols&&n.push.apply(n,Object.getOwnPropertySymbols(e)),t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n}n.d(t,"a",function(){return j});var j={addBlinkingSquare:function addBlinkingSquare(e,t,n,r){var i=a.a.getId(),s=function _objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(n,!0).forEach(function(t){o()(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({id:i,interval:t,times:n},r);return e.markings.blinkingSquares.push(s),setTimeout(function(){var t=e.markings.blinkingSquares.findIndex(function(e){return e.id===i});e.markings.blinkingSquares.splice(t,1)},0),e},addVariant:function addVariant(e,t){return t?(Object(s.a)(e,{line:0,move:0}),t.match(/.{2}/g).forEach(function(t){return h(e,{tcn:t},!0)}),e):e},canMoveBackward:function canMoveBackward(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(0===e.tree.selected.line&&e.tree.selected.move-t<-1)return!1;var r=e.tree.lines||n(40).default.state.lines;return null!==d.a.findNode(r,e.tree.selected,-1*t,!1)},canMoveForward:function canMoveForward(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=e.tree.lines||n(40).default.state.lines;return null!==d.a.findNode(r,e.tree.selected,t,!1)},changeSettings:b,clearAnalysis:function clearAnalysis(e){var t=j.resetToMainLine(e),n=d.a.clearAnalysis(t.jce._lines());return t.jce.saveLines(n),c.b.add(t.history,c.a.TREE_CHANGE),l.a.updateState(e)},clearArrow:function clearArrow(e,t,n){var r=d.a.getNode(e.jce._lines(),n)||d.a.getNode(e.jce._lines(),i.a.getSelectedIds(e))||e.tree.initialMarkings;r.arrows||(r.arrows=[]);var o=r.arrows.findIndex(function(e){return i.a.isFileRankEqual(e.fromFileRank,t.fromFileRank)&&i.a.isFileRankEqual(e.toFileRank,t.toFileRank)});return-1!==o&&(r.arrows.splice(o,1),l.a.updateState(e),c.b.add(e.history,c.a.TREE_CHANGE)),e},clearBlinkingSquare:function clearBlinkingSquare(e,t){return e.markings.blinkingSquares[t]&&delete e.markings.blinkingSquares[t],e},clearBoard:function clearBoard(e){return b(e,{rules:!1}),_(e,"8/8/8/8/8/8/8/8 w - - 0 1"),c.b.add(e.history,c.a.LOAD),l.a.updateState(e)},clearEffect:function clearEffect(e,t,n){var r=d.a.getNode(e.jce._lines(),n)||d.a.getNode(e.jce._lines(),i.a.getSelectedIds(e))||e.tree.initialMarkings;r.effects||(r.effects=[]);var o=r.effects.findIndex(function(e){return i.a.isFileRankEqual(e.square,t.square)});return-1!==o&&(r.effects.splice(o,1),l.a.updateState(e),c.b.add(e.history,c.a.TREE_CHANGE)),e},clearMarkedSquare:function clearMarkedSquare(e,t,n){var r=d.a.getNode(e.jce._lines(),n)||d.a.getNode(e.jce._lines(),i.a.getSelectedIds(e))||e.tree.initialMarkings;r.squares||(r.squares=[]);var o=r.squares.findIndex(function(e){return i.a.isFileRankEqual(e,t)});return-1!==o&&(r.squares.splice(o,1),l.a.updateState(e),c.b.add(e.history,c.a.TREE_CHANGE)),e},clearMarkings:E,clearNodes:function clearNodes(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.jce._lines();if(!n)return e;if(void 0===t.line&&void 0===t.move)return n.forEach(function(e){e.forEach(function(e,t){return d.a.clearNode(n,{line:e.ids.line,move:t})})}),c.b.add(e.history,c.a.TREE_CHANGE),e;if(void 0===t.move){var r=d.a.getLine(e.jce._lines(),t.line);return r?(r.forEach(function(e,t){return d.a.clearNode(n,{line:r.id,move:t})}),c.b.add(e.history,c.a.TREE_CHANGE),e):e}return d.a.getNode(n,t)?(d.a.clearNode(n,t),c.b.add(e.history,c.a.TREE_CHANGE),e):e},convertLanToFileRanks:function convertLanToFileRanks(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return{fromFileRank:{file:y(e[0]),rank:Number(e[1])},toFileRank:{file:y(e[2]),rank:Number(e[3])}}},createGame:O,createVariation:f,deleteLine:function deleteLine(e,t){return e.jce.deletePosition(-1,t)?(c.b.add(e.history,c.a.TREE_CHANGE),l.a.updateState(e),e):null},deleteNode:N,deleteRemainingNodes:T,getCurrentFullLine:function getCurrentFullLine(e){var t=e.jce._history().length-e.jce.ids().move-1,n=e.jce.history(!0);return 0===t?n:n.slice(0,-t)},getPgn:function getPgn(e,t){return i.a.getPgn(e,t)},getPgnHeaders:function getPgnHeaders(e){return i.a.getHeaders(e)},getSelectedNode:function getSelectedNode(e){return d.a.getSelectedNode(e)},getTcn:C,isMoveLegal:function isMoveLegal(e,t){var n=!1;if(!e.settings.rules)return!0;for(var r=0;r<e.setup.legalMoves.length;r++){var o=e.setup.legalMoves[r];if(o.from===t.from&&o.to===t.to){n=!0;break}}return n},loadFromFen:_,loadFromLan:function loadFromLan(e,t,n,r){var o=t.map(function(e){return u.a.encodeTCN({from:e.slice(0,2),to:e.slice(2,4),promotion:e.slice(4,5)||void 0})}).join("");return j.loadFromTcn(e,o,n,r)},loadFromPgn:function loadFromPgn(e,t,n){return t?(i.a.loadPgn(e,function normalizePgnAnnotation(e){return Object.keys(I.b).forEach(function(t){e=e.replace(new RegExp("\\".concat(t,"\\b"),"gm"),Object(A.j)(t))}),e}(t)),l.a.updateState(e),n?Object(s.a)(e,e.tree.selected,n):(c.b.add(e.history,c.a.LOAD),e)):e},loadFromSanMoves:function loadFromSanMoves(e,t,n,r){return t&&t.length?(n&&i.a.load(e,n),t.forEach(function(t){return h(e,{san:t},!0)}),l.a.updateState(e),r?Object(s.a)(e,e.tree.selected,-1):(c.b.add(e.history,c.a.LOAD),e)):null},loadFromTcn:L,makeMove:h,makeOpponentMove:function makeOpponentMove(e,t){return v(e,3-e.setup.playingAs),h(e,t),v(e,3-e.setup.playingAs),l.a.updateState(e)},markArrow:k,markEffect:P,markSquare:M,mergeTcn:function mergeTcn(e,t,n){if("string"!=typeof t||e.settings.mainLineIsImmutable)return null;if(""===t)return S(e),L(e,"",e.setup.fen);var r=function merge_tcn_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?merge_tcn_ownKeys(n,!0).forEach(function(t){o()(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):merge_tcn_ownKeys(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},e.tree.selected),a=C(e),i=t,l=e.history.length-1;if(!(a.includes(i)||i.includes(a)||(a=D(e,a),i=D(e,i),a.includes(i)||i.includes(a))))return L(e,i);if(i.length<a.length)Object(s.a)(e,{line:0,move:i.length/2-1}),T(e);else{if(!(i.length>a.length))return e;var f;if(Object(s.a)(e,{line:0,move:a.length/2-1}),i.slice(a.length).match(/.{2}/g).forEach(function(t){f=u.a.decodeTCN(t)[0],"Crazyhouse"!==e.variant&&"Bughouse"!==e.variant||!f.drop||Object(w.a)(e,e.setup.sideToMove,f.drop),h(e,f,!0)}),e.history.slice(l+1).some(function(e){return e&&e.type===c.a.ILLEGAL_MOVE}))return Object(s.a)(e,r),T(e),e.history=e.history.slice(0,l),mergeTcn(e,D(e,i))}if(n)return Object(s.a)(e,e.tree.selected,-1);if(r.line!==e.tree.selected.line||r.move!==e.tree.selected.move){var p=d.a.getNode(e.jce._lines(),r)?r:e.tree.selected;return Object(s.a)(e,p)}return e},moveBackward:function moveBackward(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return Object(s.a)(e,e.tree.selected,-1*t,!1)},moveForward:function moveForward(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return Object(s.a)(e,e.tree.selected,t,!1)},moveToEnd:function moveToEnd(e){return d.a.isMainLine(e.tree.selected.line)||i.a.selectLine(e,0),R(e),l.a.updateState(e)},moveToStart:function moveToStart(e){return d.a.isMainLine(e.tree.selected.line)||i.a.selectLine(e,0),S(e),l.a.updateState(e)},moveVariation:function moveVariation(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=d.a.getLine(e.jce._lines(),t);if(r&&void 0!==r.parentId){var o=d.a.getLine(e.jce._lines(),r.parentId)[r.atMoveNode],a=-1;if(o.lines.forEach(function(e,n){t===e&&(a=n)}),a>-1){var i=null;n&&a>0?(i=o.lines[a-1],o.lines[a-1]=t,o.lines[a]=i):!n&&a<o.lines.length-1&&(i=o.lines[a+1],o.lines[a+1]=t,o.lines[a]=i)}c.b.add(e.history,c.a.TREE_CHANGE)}return e},promoteVariation:function promoteVariation(e,t){var n=t;void 0===n&&(n=e.tree.selected);var r=d.a.getLine(e.jce._lines(),n.line);if(r&&void 0!==r.parentId)for(var o=n.move,a=function _loop(){if(e.settings.mainLineIsImmutable&&d.a.isMainLine(r.parentId))return"break";var t=d.a.getLine(e.jce._lines(),r.parentId),n=d.a.isContinuation(e.jce._lines(),r.id)?1:0,a=r[n]&&r[n].commentBefore,s=r.atMoveNode,c=r.slice(0);r.length=0,a&&t[s-1]&&(t[s-1].comment?(" "!==t[s-1].comment.substr(-1)&&(t[s-1].comment+=" "),t[s-1].comment+=a):t[s-1].comment=a,delete c[n].commentBefore,delete r.initComment);var l=t.slice(s),u=l[0].lines.map(function(e){return e});delete l[0].lines,l.forEach(function(t,n){t.lines&&t.lines.length&&t.lines.forEach(function(t){var o=d.a.getLine(e.jce._lines(),t);o.parentId=r.id,o.atMoveNode=n})}),t.length=s,c.forEach(function(n){n.ids={line:t.id,move:t.length},n.lines&&n.lines.length&&n.lines.forEach(function(n){var r=d.a.getLine(e.jce._lines(),n);r.parentId=t.id,r.atMoveNode=t.length}),t.push(n)}),l.forEach(function(e,t){e.ids={line:r.id,move:t},r.push(e)}),t[s].lines=u,t[s].lines.forEach(function(n){d.a.getLine(e.jce._lines(),n).parentId=t.id}),i.a.selectNode(e,{line:t.id,move:s+o}),r=d.a.getLine(e.jce._lines(),r.parentId),o=s+o};void 0!==r.parentId&&"break"!==a(););return e.jce.saveLines(e.tree.lines),c.b.add(e.history,c.a.TREE_CHANGE),l.a.updateState(e)},resetToMainLine:function resetToMainLine(e){var t=function reset_to_main_line_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?reset_to_main_line_ownKeys(n,!0).forEach(function(t){o()(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):reset_to_main_line_ownKeys(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},e.tree.selected);d.a.isMainLine(e.tree.selected.line)||i.a.selectLine(e,0),R(e);var n=e.tree.selected;return e.tree.lines.length=1,e.tree.lines=d.a.rebuildIds(e.tree.lines),e.jce.saveLines(e.tree.lines),c.b.add(e.history,c.a.JUMP_TO_POSITION,{from:t,to:n}),l.a.updateState(e)},selectLineEnd:R,selectLineStart:S,selectNode:s.a,setPlayingAs:v,updateMarkings:function updateMarkings(e){var t=e.arrow,n=e.effect,r=e.game,o=e.ids,a=e.square;return E(r,o,!1),t&&k(r,t,o,!1),n&&P({game:r,effect:n,ids:o,updateState:!1}),a&&M(r,a,o,!1),l.a.updateState(r),c.b.add(r.history,c.a.TREE_CHANGE),r},updateNode:function updateNode(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,r=e.jce._lines(),o=d.a.findNode(r,t);if(!o||!n||n.commentBefore&&!d.a.isFirstVisibleNode(r,t))return null;var a=d.a.getLine(r,t.line);if(void 0===n.commentBefore&&d.a.isFirstVisibleNode(r,t)?delete a.initComment:n.commentBefore&&(a.initComment=n.commentBefore),n.annotation&&(n.annotation=Object(A.b)(o,n.annotation)?"":Object(A.j)(n.annotation)),n.additionalAnnotation){if(!Object(A.i)(n.additionalAnnotation))return null;Object(A.a)(o,n.additionalAnnotation)&&(n.additionalAnnotation=[]),n.additionalAnnotation=[].concat(Object(A.j)(n.additionalAnnotation))}return Object.assign(o,n),c.b.add(e.history,c.a.UPDATE_NODE,{line:t.line,move:t.move}),l.a.updateState(e)},updatePgnHeaders:function updatePgnHeaders(e,t){if(!t)return null;var n=Object.keys(t).reduce(function(e,n){return"Date"===n&&"number"==typeof t[n]&&(t[n]=a.a.formatJSTimestampForPgn(t[n])),e.push(n),e.push(t[n]),e},[]);return i.a.updateHeaders(e,n),c.b.add(e.history,c.a.PGN_HEADERS_UPDATED),e.setup.result=l.a.getResult(e),e}}},49:function(e,t,n){"use strict";n.d(t,"a",function(){return o});n(4);var r={p:1,n:32,b:256,r:2048,q:16384},o=function setHand(e,t,n){return e.jce._hand[t]=n.split("").reduce(function(e,t){return e+r[t]},0),e.setup.hand=e.jce.hand(),e}},490:function(e,t,n){e.exports={category:"social-members-category",title:"social-members-title",icon:"social-members-icon",content:"social-members-content",quantity:"social-members-quantity"}},491:function(e,t,n){e.exports={component:"social-likes-component",network:"social-likes-network",icon:"social-likes-icon",quantity:"social-likes-quantity",facebook:"social-likes-facebook",twitter:"social-likes-twitter",youtube:"social-likes-youtube",twitch:"social-likes-twitch",instagram:"social-likes-instagram"}},492:function(e,t,n){e.exports={board:"daily-puzzle-board"}},5:function(e,t,n){e.exports=n(19)(7)},506:function(e,t,n){"use strict";var r=n(427),o=n.n(r);t.default=o.a},507:function(e,t,n){"use strict";var r=n(428),o=n.n(r);t.default=o.a},508:function(e,t,n){"use strict";var r=n(429),o=n.n(r);t.default=o.a},509:function(e,t,n){"use strict";var r=n(430),o=n.n(r);t.default=o.a},51:function(e,t,n){"use strict";var r=n(43),o={expanded:null===document.querySelector("".concat(r.a.SIDEBAR,".").concat(r.a.SIDEBAR_COLLAPSED)),forcedOpen:!1,isLive:"/live"===window.location.pathname.substr(0,5),isLiveElement:document.querySelector("#live-app"),isVisible:!0,isWide:"en-US"!==document.documentElement.getAttribute("lang"),position:"horizontal",showingSecondary:null};t.a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=[];return{emit:function emit(n,r){t.filter(function(e){return e.type===n}).forEach(function(t){return t.handler(e,r)})},off:function off(e){return-1!==t.findIndex(function(t){return t.type===e.type&&t.handler===e.handler})&&t.splice(t,1),t},on:function on(e,n){return t.push({type:e,handler:n}),t},state:e,subscriptions:t}}(o)},52:function(e,t,n){"use strict";var r=n(5),o=n.n(r);t.a={props:{isDarkMode:{type:Boolean,default:!1}},methods:{componentClasses:function componentClasses(){var e;return e={},o()(e,this.$style.component,!0),o()(e,this.$style.darkMode,this.isDarkMode),e}}}},53:function(e,t,n){"use strict";n.d(t,"b",function(){return u}),n.d(t,"a",function(){return d}),n.d(t,"c",function(){return p});var r,o,a,i=n(5),s=n.n(i),c=n(11),l=n(0),u={AFTER:"after",BEFORE:"before"},d={ADD_ANNOTATION:"addAnnotation",ADD_EVAL_NOTATION:"addEvalNotation",CLEAR_ANALYSIS:"clearAnalysis",CREATE_CONTINUATION:"createContinuation",CREATE_VARIATION:"createVariation",DELETE_COMMENT:"deleteComment",DELETE_LINE:"deleteLine",DELETE_MOVE:"deleteMove",INSERT_COMMENT:"insertComment",MOVE_VARIATION_DOWN:"moveVariationDown",MOVE_VARIATION:"moveVariation",PROMOTE_VARIATION:"promoteVariation",REMOVE_ANNOTATION:"removeAnnotation",REMOVE_BEGIN:"removeBegin",REMOVE_END:"removeEnd",REMOVE_EVAL_ANNOTATION:"removeEvalAnnotation",REMOVE_FOCUS:"removeFocus",SET_BEGIN:"setBegin",SET_END:"setEnd",SET_FOCUS:"setFocus",UPDATE_COMMENT:"updateComment"},f=[{code:"$1",display:c.b.$1,meaning:l.a.trans("Good move"),action:d.ADD_ANNOTATION},{code:"$2",display:c.b.$2,meaning:l.a.trans("Bad move"),action:d.ADD_ANNOTATION},{code:"$3",display:c.b.$3,meaning:l.a.trans("Excellent move"),action:d.ADD_ANNOTATION},{code:"$4",display:c.b.$4,meaning:l.a.trans("Blunder"),action:d.ADD_ANNOTATION},{code:"$5",display:c.b.$5,meaning:l.a.trans("Speculative move"),action:d.ADD_ANNOTATION},{code:"$6",display:c.b.$6,meaning:l.a.trans("Dubious move"),action:d.ADD_ANNOTATION},{code:"$10",display:c.b.$10,meaning:l.a.trans("Drawish"),action:d.ADD_EVAL_NOTATION},{code:"$13",display:c.b.$13,meaning:l.a.trans("Unclear"),action:d.ADD_EVAL_NOTATION},{code:"$14",display:c.b.$14,meaning:l.a.trans("White has a slight advantage"),action:d.ADD_EVAL_NOTATION},{code:"$15",display:c.b.$15,meaning:l.a.trans("Black has a slight advantage"),action:d.ADD_EVAL_NOTATION},{code:"$16",display:c.b.$16,meaning:l.a.trans("White has a moderate advantage"),action:d.ADD_EVAL_NOTATION},{code:"$17",display:c.b.$17,meaning:l.a.trans("Black has a moderate advantage"),action:d.ADD_EVAL_NOTATION},{code:"$18",display:c.b.$18,meaning:l.a.trans("White has a decisive advantage"),action:d.ADD_EVAL_NOTATION},{code:"$19",display:c.b.$19,meaning:l.a.trans("Black has a decisive advantage"),action:d.ADD_EVAL_NOTATION},{code:"$22",display:c.b.$22,meaning:l.a.trans("The position is in zugzwang"),action:d.ADD_EVAL_NOTATION},{code:"$146",display:c.b.$146,meaning:l.a.trans("Novelty"),action:d.ADD_EVAL_NOTATION}],p=(l.a.trans("Clear All Analysis"),d.CLEAR_ANALYSIS,l.a.trans("Insert Continuation"),d.CREATE_CONTINUATION,l.a.trans("Insert Alternate Line"),d.CREATE_VARIATION,l.a.trans("Delete Comment After"),d.DELETE_COMMENT,u.AFTER,l.a.trans("Delete Comment Before"),d.DELETE_COMMENT,u.BEFORE,l.a.trans("Delete Entire Variation"),d.DELETE_LINE,l.a.trans("Delete Move"),d.DELETE_MOVE,l.a.trans("Comment After"),d.INSERT_COMMENT,u.AFTER,l.a.trans("Comment Before"),d.INSERT_COMMENT,u.BEFORE,l.a.trans("Move Variation Down"),d.MOVE_VARIATION_DOWN,l.a.trans("Move Variation Up"),d.MOVE_VARIATION,l.a.trans("Promote"),d.PROMOTE_VARIATION,l.a.trans("Remove Annotation"),d.REMOVE_ANNOTATION,l.a.trans("Remove Begin"),d.REMOVE_BEGIN,l.a.trans("Remove End"),d.REMOVE_END,l.a.trans("Remove Evaluation Annotation"),d.REMOVE_EVAL_ANNOTATION,l.a.trans("Remove Focus"),d.REMOVE_FOCUS,l.a.trans("Set Begin"),d.SET_BEGIN,l.a.trans("Set End"),d.SET_END,l.a.trans("Set Focus"),d.SET_FOCUS,d.SET_BEGIN,d.SET_END,d.SET_FOCUS,d.REMOVE_BEGIN,d.REMOVE_END,d.REMOVE_FOCUS,{BEGIN:"begin",END:"end",FOCUS:"focus"});r={},s()(r,d.SET_BEGIN,p.BEGIN),s()(r,d.SET_END,p.END),s()(r,d.SET_FOCUS,p.FOCUS),o={},s()(o,d.REMOVE_BEGIN,p.BEGIN),s()(o,d.REMOVE_END,p.END),s()(o,d.REMOVE_FOCUS,p.FOCUS),a=[],f.forEach(function(e){var t=a[a.length-1]||null;t&&4!==t.length?t.push(e):a.push([e])})},54:function(e,t,n){"use strict";t.a={BOTTOM_LINK_MOUSE_ENTER:"BOTTOM_LINK_MOUSE_ENTER",EXPAND_COLLAPSE_CHANGE:"EXPAND_COLLAPSE_CHANGE",FEATURE_LINK_INIT:"FEATURE_LINK_INIT",FETCH_NOTIFICATIONS:"FETCH_NOTIFICATIONS",FETCH_NOTIFICATION_COUNT:"FETCH_NOTIFICATION_COUNT",HIDE_TIME_CONTROLS:"HIDE_TIME_CONTROLS",LINK_SECONDARY_HIDE:"LINK_SECONDARY_HIDE",LINK_SECONDARY_MOUNTS:"LINK_SECONDARY_MOUNTS",NAV_TOGGLED:"NAV_TOGGLED",NOTIFICATIONS_FETCHED:"NOTIFICATIONS_FETCHED",NOTIFICATIONS_PANEL_INIT:"NOTIFICATIONS_PANEL_INIT",OPEN_LANGUAGE_PICKER:"OPEN_LANGUAGE_PICKER",SECONDARY_CHANGE:"SECONDARY_CHANGE",SHOW_VIDEO_MODAL:"SHOW_VIDEO_MODAL",TOGGLE_DAILY_CONTROLS:"TOGGLE_DAILY_CONTROLS",TOGGLE_LIVE_CONTROLS:"TOGGLE_LIVE_CONTROLS",VIEW_MOUNTED:"VIEW_MOUNTED"}},55:function(e,t,n){"use strict";var r=n(27),o=n.n(r),a=n(28),i=n.n(a),s=n(136),c=n.n(s).a,l=n(96),u=n(0),d={name:"placeholder-ad",props:{goPremiumLink:{type:String,required:!0}},data:function data(){return{labels:{hideAds:u.a.trans("Remove Ads")}}}},f=n(111),p=n(8);var m=Object(p.a)(d,function(){var e=this.$createElement,t=this._self._c||e;return t("div",{class:this.$style.upgrade},[t("a",{class:this.$style.link,attrs:{target:"_blank",href:this.goPremiumLink}},[this._v("\n    "+this._s(this.labels.hideAds)+"\n  ")])])},[],!1,function injectStyles(e){this.$style=f.default.locals||f.default},null,null).exports,h=n(6),v=n(25),g=n(24),b=n(30),_=n(78),E=new(function(){function CurseHelper(){o()(this,CurseHelper);var e=(new Date).setHours(12,0,0,0),t=window.location.pathname;this.curseAdUrl="//cdm.cursecdn.com/js/chess/cdmfactorem_min.js?misc=".concat(e),"/home"===t&&(this.curseAdUrl+="&sec=home")}return i()(CurseHelper,[{key:"init",value:function init(){var e=this;window.factorem={},window.factorem.slotSizes=[[[728,90]],[[300,250]],[[300,250]],[[728,90]],[[728,90]],[[300,250]],[[160,600]],[[160,600]]];var t=function windowLoadEvent(){window.removeEventListener("load",windowLoadEvent),_.a.insert(e.curseAdUrl)};!0===window.loadEventFired?t():window.addEventListener("load",t,!1)}}]),CurseHelper}()),y=new(function(){function TmsHelper(){o()(this,TmsHelper),this.TmsAdUrl="//rocinante.themediashop.co/library/chess.js"}return i()(TmsHelper,[{key:"init",value:function init(e){var t=this,n=function windowLoadEvent(){window.removeEventListener("load",windowLoadEvent),_.a.insert(t.TmsAdUrl,{"data-tmsclient":"Chess","data-layout":e,"data-debug":"true"})};!0===window.loadEventFired?n():window.addEventListener("load",n,!1)}}]),TmsHelper}());n.d(t,"a",function(){return O}),n.d(t,"d",function(){return A}),n.d(t,"b",function(){return S}),n.d(t,"c",function(){return N});var O=new(function(){function AdHelperClass(){var e=this;o()(this,AdHelperClass),this.providers={},this.layout=window.Config?window.Config["ad.layout"]:"default",this.refreshIntervals=[90,10,10],this.counter=0,g.default.nextTick(function(){e.initProviderScripts()})}return i()(AdHelperClass,[{key:"registerAdSlot",value:function registerAdSlot(e,t){e in this.providers||(this.providers[e]=[]),-1===this.providers[e].indexOf(t)&&this.providers[e].push(t)}},{key:"setLayout",value:function setLayout(e){this.layout=e}},{key:"initProviderScripts",value:function initProviderScripts(){var e=this;c(this.providers,function(t,n){"curse"===n?(E.init(),e.enableAutoRefresh()):y.init(e.layout)}),Object.keys(this.providers).length<1?setTimeout(function(){e.initProviderScripts()}):this.enableAutoRefresh()}},{key:"enableAutoRefresh",value:function enableAutoRefresh(){0!==Object.keys(this.providers).length&&this.startRefreshTimer()}},{key:"startRefreshTimer",value:function startRefreshTimer(){var e=this;setTimeout(function(){if(e.providers.curse){if(window.factorem){var t=parseInt(e.providers.curse[e.counter].substr(-1),10);window.factorem.refreshAds([t],!0)}e.counter+=1,e.counter===e.providers.curse.length&&(e.counter=0),e.startRefreshTimer()}else setTimeout(e.startRefreshTimer.bind(e),1e3)},1e3*this.refreshIntervals[this.counter])}}]),AdHelperClass}()),A={position:{type:String,required:!1},provider:{type:String,default:"tms"},slotId:{type:String,required:!0},goPremiumLink:{type:String,default:h.a.generate("web_membership",{c:"no-ads"})}},S={PlaceholderAd:m,iframeAd:l.a},N=function positionDisabled(e){var t=window.Config["ad.noAds"]||!1,n=window.Config["ad.disabledAds"]||[],r=Math.round((new Date).getTime()/1e3),o=window.location.pathname.split("/"),a=2===o[1].length?o[2]:o[1],i=Object(b.e)()&&window.innerWidth<768,s=null!==window.navigator.userAgent.match(/PTST\/SpeedCurve/i)||v.default.getters["user/isLoggedIn"]&&-1!==["JustForShon","SmokeTestDiamond","NightwatchTest"].indexOf(v.default.getters["user/username"]);return!(!i&&!s)||(v.default.getters["user/isLoggedIn"]?t||v.default.getters["user/isPremium"]||v.default.getters["user/roles"].indexOf("ROLE_SUPPORT")>=0||-1!==n.indexOf(e)||!(v.default.state.user.registerDate<=r-172800):t||-1===["articles","article","news","forum","events","wcc2018"].indexOf(a))}},561:function(e,t,n){e.exports=n(19)(64)},57:function(e,t,n){e.exports={component:"form-dropdown-component",select:"form-dropdown-select",filter:"form-dropdown-filter","desktop-button":"form-dropdown-desktop-button","mobile-button":"form-dropdown-mobile-button",value:"form-dropdown-value",chevron:"form-dropdown-chevron",options:"form-dropdown-options","advanced-options":"form-dropdown-advanced-options",option:"form-dropdown-option",icon:"form-dropdown-icon",live960:"form-dropdown-live960",bullet:"form-dropdown-bullet",blitz:"form-dropdown-blitz",rapid:"form-dropdown-rapid",threecheck:"form-dropdown-threecheck",kingofthehill:"form-dropdown-kingofthehill",crazyhouse:"form-dropdown-crazyhouse",bughouse:"form-dropdown-bughouse",selected:"form-dropdown-selected","short-title":"form-dropdown-short-title",overlay:"form-dropdown-overlay",separator:"form-dropdown-separator",flag:"form-dropdown-flag"}},58:function(e,t,n){e.exports={box:"modal-video-box",video:"modal-video-video",close:"modal-video-close"}},589:function(e,t,n){n(661),n(381),n(490),n(491),n(401),n(492),n(590),n(400),e.exports=n(591)},590:function(e,t,n){e.exports={component:"intro-component",shadow:"intro-shadow",container:"intro-container",logo:"intro-logo","login-box":"intro-login-box","dark-alt":"intro-dark-alt",header:"intro-header",title:"intro-title","play-with-us":"intro-play-with-us","play-now":"intro-play-now","guest-actions":"intro-guest-actions",icon:"intro-icon",learn:"intro-learn","play-online":"intro-play-online","play-computer":"intro-play-computer","on-mobile":"intro-on-mobile",puzzles:"intro-puzzles"}},591:function(e,t,n){e.exports={quote:"index-quote","play-icon":"index-play-icon"}},6:function(e,t,n){"use strict";var r=n(27),o=n.n(r),a=n(28),i=n.n(a),s=function(){function Router(){o()(this,Router),this.baseUrl=null,null==window.Routing&&(window.Routing={generate:function generate(e){return e}})}return i()(Router,[{key:"generate",value:function generate(e,t,n){var r=t||{},o=this.baseUrl||r.baseUrl||null;return"string"==typeof r.username&&(r.username=r.username.toLowerCase()),null!=o?(delete r.baseUrl,o+window.Routing.generate(e,r,!1)):window.Routing.generate(e,r,n)}},{key:"setBaseUrl",value:function setBaseUrl(e){this.baseUrl=e}}]),Router}();t.a=new s},60:function(e,t,n){"use strict";n.d(t,"a",function(){return o}),n.d(t,"b",function(){return a});var r=n(14),o=function getBoardContainerElement(){var e=r.f.board.substr(1),t=document.getElementsByClassName(e)[0];return t||null},a=function getBoardElement(){var e=o();if(!e)return null;var t=e.childNodes;return Array.from(t).find(function(e){return 1===e.nodeType})}},61:function(e,t,n){"use strict";var r=n(45),o=n.n(r);t.default=o.a},62:function(e,t,n){"use strict";var r=n(46),o=n.n(r);t.default=o.a},63:function(e,t,n){"use strict";n.d(t,"a",function(){return r});var r={HIDE_MODAL:"hide-modal",HIDE_MODAL_BACKGROUND_CLICK:"hide-background",HIDE_MODAL_SOCIAL_SHARE:"hide-modal-social-share",LOGIN_OR_REGISTER_MODAL:"LOGIN_OR_REGISTER_MODAL",MODAL_DID_HIDE:"modal-did-hide",SHOW_MODAL_SOCIAL_SHARE:"show-modal-social-share",SHOW_UPGRADE_MODAL:"show-upgrade-modal"}},64:function(e,t,n){"use strict";var r=n(10),o=n(23),a=n(0),i=n(77),s=[{value:"newest",label:a.a.trans("Most Recent")},{value:"view_count",label:a.a.trans("Most Views")}],c=document.getElementById(r.c.FILTERS),l=c?c.getAttribute(r.a.ICON_BUTTON):null;t.a=Object(o.a)("#".concat(r.c.FILTERS),function(){return{component:i.a,propsData:{iconButton:l,onChange:function onChange(){},options:s,overlay:!0,value:s[0]}}})},65:function(e,t,n){e.exports={component:"form-button-component",dark:"form-button-dark","x-small":"form-button-x-small",small:"form-button-small",large:"form-button-large","x-large":"form-button-x-large","full-width":"form-button-full-width",basic:"form-button-basic",darkMode:"form-button-darkMode",primary:"form-button-primary",info:"form-button-info",danger:"form-button-danger"}},66:function(e,t,n){"use strict";var r=n(5),o=n.n(r),a=n(24),i=n(9),s={methods:{$trans:i.b,$transChoice:i.c}};function ownKeys(e,t){var n=Object.keys(e);return Object.getOwnPropertySymbols&&n.push.apply(n,Object.getOwnPropertySymbols(e)),t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(n,!0).forEach(function(t){o()(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}a.default.mixin(s);t.a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={},n=function createInstance(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e[n]&&Object.keys(e[n]).length?(t[n]=t[n]||function instantiate(e){return new a.default(_objectSpread({},e,{el:e.el,render:function render(t){return t(e.component,{props:e.propsData})},store:e.store}))}(_objectSpread({},e[n],{},r)),t[n]):null};return{createInstance:n,createInstances:function createInstances(e){e.forEach(function(e){return n(e)})},instances:t}}},661:function(e,t,n){"use strict";n.r(t);var r=n(168),o=n(10),a=n(6),i=n(0),s="tv-player-headline",c="data-channel",l="data-muted",u="data-title",d=!0,f="chess",p=!1,m=(a.a.generate("web_chess_tv"),i.a.trans("Are you sure you want to delete this episode?"),i.a.trans("Are you sure you want to delete this show?"),n(80)),h=n(24),v=n(5),g=n.n(v),b=n(42),_=n(18),E=n(27),y=n.n(E),O=n(28),A=n.n(O),S=n(561),N=n.n(S),T=new(function(){function LocalStorage(){y()(this,LocalStorage),this.jsonSettings=null,this.userPopoverData=null,this.chessBasil=N()({namespace:null,storages:["local","cookie"],storage:"local",expireDays:1})}return A()(LocalStorage,[{key:"works",value:function works(){return!1!==this.chessBasil}},{key:"setItem",value:function setItem(e,t){if(this.works()){var n=this.chessBasil.get("json_settings")||{};n[e]=t,this.jsonSettings=n,this.chessBasil.set("json_settings",n)}}},{key:"removeItem",value:function removeItem(e){if(this.works()){var t=this.chessBasil.get("json_settings");t&&(delete t[e],this.jsonSettings=t,this.chessBasil.set("json_settings",t))}}},{key:"getItem",value:function getItem(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(this.jsonSettings){if(this.jsonSettings[e])return this.jsonSettings[e]}else if(this.works()){var n=this.chessBasil.get("json_settings");if(this.jsonSettings=n,n&&n[e])return n[e]}return t}}]),LocalStorage}());function ownKeys(e,t){var n=Object.keys(e);return Object.getOwnPropertySymbols&&n.push.apply(n,Object.getOwnPropertySymbols(e)),t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n}var C={name:"main-ad",components:{IconFont:_.a},props:{isDismissable:{type:String,required:!0}},data:function data(){return{enabled:!1,currentTime:(new Date).getTime()}},computed:function _objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(n,!0).forEach(function(t){g()(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},Object(b.mapState)("user",["isLoggedIn"]),{showCloseButton:function showCloseButton(){return"true"===this.isDismissable&&this.isLoggedIn},expirationTime:function expirationTime(){return this.currentTime+864e5}}),created:function created(){this.isLoggedIn&&T.getItem("mainAdExpiration")>this.currentTime||(this.enabled=!0)},methods:{hideAd:function hideAd(){T.setItem("mainAdExpiration",this.expirationTime),this.enabled=!1}}},I=n(506),w=n(8);var L=Object(w.a)(C,function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.enabled?n("div",{class:e.$style.component},[e.showCloseButton?n("icon-font",{class:e.$style.icon,attrs:{name:"x"},on:{click:function(t){return t.preventDefault(),e.hideAd(t)}}}):e._e(),e._v(" "),e._t("default")],2):e._e()},[],!1,function injectStyles(e){this.$style=I.default.locals||I.default},null,null).exports,k=n(25),P=n(66),M=n(137),D=n(138),R=n(23),j=n(17),B={name:"survey",components:{FormButton:n(34).a},props:{discussUrl:{type:String,required:!0},hasVotedEarlier:{type:Boolean,default:!1},surveyData:{type:Object,required:!0},user:Boolean},data:function data(){return{chosenOption:null,hasVotedNow:!1,isLoading:!1,showResults:!1,survey:{options:[],voteCount:0},translations:{backToVote:this.$trans("Back to Vote"),result:this.$trans("Result"),submit:this.$trans("Submit")}}},computed:{commentCount:function commentCount(){return 0===Number(this.survey.comment_count)?this.$trans("Discuss"):this.$transChoice("{0} 0 Comments|{1} 1 Comment|]1,Inf] %number% Comments",this.survey.comment_count,{"%number%":this.survey.comment_count})},hasVoted:function hasVoted(){return this.hasVotedEarlier||this.hasVotedNow},progress:function progress(){var e=this;return this.survey.options.reduce(function(t,n){return t[n.id]=e.survey.vote_count?parseInt(n.vote_count/e.survey.vote_count*100,10):0,t},{})},redirectToLoginPage:function redirectToLoginPage(){return this.user?null:o.d.redirectToLoginPage(this.discussUrl)},votesText:function votesText(){var e=this;return this.survey.options.reduce(function(t,n){return t[n.id]=e.$transChoice("{0} 0 Votes|{1} 1 Vote|]1,Inf] %count% Votes",n.vote_count,{"%count%":n.vote_count}),t},{})}},mounted:function mounted(){this.survey=Object.assign({},this.surveyData)},methods:{requestCompleted:function requestCompleted(){this.isLoading=!1},submit:function submit(){var e=this.survey.id,t=o.d.surveyVote(e,this.chosenOption);this.isLoading=!0,j.default.post(t).then(this.successfulVote.bind(this)).finally(this.requestCompleted.bind(this))},successfulVote:function successfulVote(e){var t=this.survey.options.map(function(t){return t.vote_count=e.data.options[t.id],t});this.survey.options=t,this.survey.vote_count=e.data.voteCount,this.hasVotedNow=!0,this.showResults=!0},toggleResults:function toggleResults(){this.showResults=!this.showResults}}},x=n(507);var F=Object(w.a)(B,function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("form",{directives:[{name:"show",rawName:"v-show",value:!e.showResults&&!e.hasVoted,expression:"!showResults && !hasVoted"}]},[e._l(e.survey.options,function(t){return n("div",{key:t.id},[n("label",{class:e.$style.label},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.chosenOption,expression:"chosenOption"}],attrs:{name:"surveyRadios",required:"required",type:"radio"},domProps:{value:t.id,checked:e._q(e.chosenOption,t.id)},on:{change:function(n){e.chosenOption=t.id}}}),e._v("\n        "+e._s(t.option)+"\n      ")])])}),e._v(" "),n("form-button",{directives:[{name:"show",rawName:"v-show",value:e.chosenOption,expression:"chosenOption"}],class:e.$style.submit,attrs:{disabled:e.isLoading,href:e.redirectToLoginPage,size:"large",theme:"primary"},on:{click:function(t){return e.submit()}}},[e._v("\n      "+e._s(e.translations.submit)+"\n    ")])],2),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:e.showResults||e.hasVoted,expression:"showResults || hasVoted"}]},e._l(e.survey.options,function(t){return n("div",{key:t.id},[n("div",{class:e.$style["label-title"]},[e._v("\n        "+e._s(t.option)+"\n        "),n("span",{class:e.$style.subtitle},[e._v("\n          ("+e._s(e.progress[t.id])+"%,\n          "+e._s(e.votesText[t.id])+")\n        ")])]),e._v(" "),n("div",{class:e.$style.progress},[n("div",{class:e.$style["progress-bar"],style:"width: "+e.progress[t.id]+"%",attrs:{"aria-valuemin":"0","aria-valuemax":"100","aria-valuenow":e.progress[t.id],role:"progressbar"}})])])}),0),e._v(" "),n("div",{class:e.$style.actions},[n("a",{attrs:{href:e.discussUrl},domProps:{textContent:e._s(e.commentCount)}}),e._v(" "),n("span",{directives:[{name:"show",rawName:"v-show",value:!e.hasVoted,expression:"!hasVoted"}]},[n("span",{class:e.$style.separator},[e._v("|")]),e._v(" "),n("button",{directives:[{name:"show",rawName:"v-show",value:!e.showResults,expression:"!showResults"}],attrs:{type:"button"},on:{click:function(t){return e.toggleResults()}}},[e._v("\n        "+e._s(e.translations.result)+"\n      ")]),e._v(" "),n("button",{directives:[{name:"show",rawName:"v-show",value:e.showResults,expression:"showResults"}],attrs:{type:"button"},on:{click:function(t){return e.toggleResults()}}},[e._v("\n        "+e._s(e.translations.backToVote)+"\n      ")])])])])},[],!1,function survey_injectStyles(e){this.$style=x.default.locals||x.default},null,null).exports,V=Object(R.a)("#".concat(o.c.SIDEBAR_SURVEY),function(e){return{component:F,propsData:{surveyData:JSON.parse(e.getAttribute("data-survey")),discussUrl:e.getAttribute("data-discuss-url"),hasVotedEarlier:"1"===e.getAttribute("data-has-voted"),user:!!e.getAttribute("data-user")}}}),H=n(30),G=n(410),U=window.context&&window.context.locale?window.context.locale:G.a.I18N_DEFAULT_LOCALE,$={home:a.a.generate("web_user_home"),live:a.a.generate("web_live"),loginAndGoRoute:function loginAndGoRoute(e){return a.a.generate("web_security_login_and_go",{redirectUrl:e})},logout:a.a.generate("web_security_logout"),membership:a.a.generate("web_membership",{c:"navbarsvelte"}),messages:a.a.generate("web_message_index"),playUrl:function playUrl(e){return"chess.com".concat(a.a.generate("web_member_play",{username:e}))},stats:a.a.generate("web_stats"),themes:a.a.generate("web_user_settings_themes"),registerRoute:function registerRoute(e){return a.a.generate("web_security_register",{redirectUrl:e})},settings:a.a.generate("web_user_settings_edit"),support:"es_ES"===U?"https://support.chess.com/customer/es/portal/articles":"https://support.chess.com/",topPlayerObserve:function topPlayerObserve(e){return"".concat(a.a.generate("web_live"),"#follow=").concat(e)},tv:["en_US","en"].includes(U)?a.a.generate("web_tv"):a.a.generate("web_tv_i18n",{locale:U.substr(0,2)})},q={name:"tv-player",props:{autoplay:{type:Boolean,default:d},channel:{type:String,default:"chess"},muted:{type:Boolean,default:p}},computed:{tvPlayerUrl:function tvPlayerUrl(){return"//player.twitch.tv/?channel=".concat(this.channel,"&autoplay=").concat(this.autoplay,"&muted=").concat(this.muted)}},mounted:function mounted(){var e=this,t=function windowLoadEvent(){var t=e.$refs.player.getAttribute("data-src");t&&e.$refs.player.setAttribute("src",t)};"complete"===document.readyState?t():window.addEventListener("load",t,!1)}},K=n(508);var z={name:"tv-player-headline",components:{TvPlayer:Object(w.a)(q,function(){var e=this.$createElement,t=this._self._c||e;return t("div",{class:this.$style.component},[t("iframe",{ref:"player",class:this.$style.iframe,attrs:{"data-src":this.tvPlayerUrl,allowfullscreen:"true",frameborder:"0",height:"375",scrolling:"no",width:"668"}})])},[],!1,function tv_player_injectStyles(e){this.$style=K.default.locals||K.default},null,null).exports},props:{channel:{type:String,required:!0,default:f},muted:{type:Boolean,default:p},title:{type:String,required:!0}},data:function data(){return{autoplay:d,routes:Object.freeze($)}},mounted:function mounted(){Object(H.e)()&&(this.autoplay=!1)}},W=n(509);var Y=Object(w.a)(z,function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("article",{staticClass:"post-preview-component post-preview-headline",class:e.$style.component},[n("tv-player",{class:e.$style.player,attrs:{autoplay:e.autoplay,channel:e.channel,muted:e.muted}}),e._v(" "),n("h2",{staticClass:"post-preview-titlecontainer"},[n("a",{staticClass:"post-preview-title",attrs:{href:e.routes.tv}},[e._v("\n      "+e._s(e.title)+"\n    ")])])],1)},[],!1,function tv_player_headline_injectStyles(e){this.$style=W.default.locals||W.default},null,null).exports,Q=Object(R.a)("#".concat(s),function(e){return{component:Y,propsData:{muted:"true"===e.getAttribute(l),channel:e.getAttribute(c),title:e.getAttribute(u)}}}),J=Object.assign({},M.a,D.a,V,Q),Z=Object(P.a)(J);document.addEventListener("DOMContentLoaded",function(){var e=document.getElementById(r.a.MAIN_AD);Z.createInstances([o.c.SIDEBAR_SURVEY,r.a.SHORT_SIDEBAR_AD_BOTTOM,r.a.SHORT_SIDEBAR_AD_TOP,s]),e&&new h.default({el:"#".concat(r.a.MAIN_AD),components:{MainAd:L},store:k.default})});var X=document.getElementById(r.a.WHAT_IS_CHESS);Object(m.c)(X),Object(m.b)()},67:function(e,t,n){"use strict";var r=n(14),o=function animationChangeRequiresRefresh(e,t){return r.h.animations.indexOf(e)>-1||r.h.animations.indexOf(t)>-1},a=n(48),i=function makeSvg(e){var t=e.path,n=void 0===t?"":t,r=e.size,o=void 0===r?24:r,a=e.viewBox,i=void 0===a?"0 0 18 19":a;return'\n  <svg width="'.concat(o,'" height="').concat(o,'" viewBox="').concat(i,'">\n    ').concat(n,"\n  </svg>\n")},s=function buildEffect(e){var t=e.icon,n=e.node;return{position:{x:"right",y:"top"},square:e.square||a.a.convertLanToFileRanks("".concat(n.from).concat(n.to)).toFileRank,template:i({path:t,size:"100%"})}},c=(n(17),n(6),n(60)),l=function makeResizeEvent(){var e;return"function"==typeof Event?e=new Event("resize"):(e=document.createEvent("Event")).initEvent("resize",!1,!0),e},u=function pieceChangeRequiresRefresh(e,t){var n=e===t,o=r.h.pieces.indexOf(e)>-1||r.h.pieces.indexOf(t)>-1;return!n&&o},d=function showBoardResize(){var e=document.querySelector(r.f.resize);e&&(e.style.visibility="visible")};n.d(t,"a",function(){return o}),n.d(t,"b",function(){return s}),n.d(t,"c",function(){return c.a}),n.d(t,"d",function(){return l}),n.d(t,"e",function(){return u}),n.d(t,"f",function(){return d})},7:function(e,t,n){"use strict";n.d(t,"a",function(){return o});var r=n(6),o=function generateRoute(e,t,n){var o=e,a=t;if(n){var i=document.querySelector("[data-url-locale]"),s=i&&i.getAttribute("data-url-locale"),c=s&&"en"!==s.split("_")[0]&&s.split("_")[0];c&&a&&(o="i18n_".concat(o),a._locale=c)}return r.a.generate(o,a)}},70:function(e,t,n){"use strict";var r=n(57),o=n.n(r);t.default=o.a},71:function(e,t,n){"use strict";var r=n(58),o=n.n(r);t.default=o.a},73:function(e,t,n){"use strict";var r=n(65),o=n.n(r);t.default=o.a},75:function(e,t,n){"use strict";var r=n(1),o=n(3),a=n(37),i=n(4),s=n(12),c=n(2),l=function makePremove(e,t){var n=o.a.getJCEMove(e,t);return null===n?(r.b.add(e.history,r.a.ILLEGAL_MOVE),e):c.a.isHead(e.jce._lines(),e.tree.selected)||e.settings.analysis?e.settings.analysis?void 0:(a.a.premove(e,n)?(r.b.add(e.history,r.a.PREMOVE),i.a.updateState(e)):r.b.add(e.history,r.a.ILLEGAL_MOVE),e):Object(s.a)(e,c.a.getHeadIds(e.jce._lines(),e.tree.selected.line))},u=function cancelPremoves(e){return a.a.cancelPremoves(e)&&(r.b.add(e.history,r.a.CANCEL_PREMOVES),i.a.updateState(e)),e},d=function consumePremove(e){return e.premoves.length?(a.a.consumePremove(e)?(r.b.add(e.history,r.a.MAKE_MOVE),i.a.updateState(e)):u(e),e):e};n.d(t,"c",function(){return l}),n.d(t,"a",function(){return u}),n.d(t,"b",function(){return d})},77:function(e,t,n){"use strict";var r={name:"form-dropdown",components:{IconFont:n(18).a},props:{advancedOptionsClass:{type:Boolean,default:!1},colorIcons:{type:Boolean,default:!1},countryFlag:{type:Number,default:2},iconButton:{type:String,default:""},labelKey:{type:String,default:"label"},onChange:{type:Function,required:!1},options:{type:Array,required:!0},overlay:{type:Boolean,default:!1},shortTitle:{type:Boolean,default:!1},shortTitleKey:{type:String,default:"shortTitle"},value:{type:Object,required:!0},valueKey:{type:String,default:"value"}},data:function data(){return{showOptions:!1}},methods:{setSelectedOption:function setSelectedOption(e){this.toggleOptions(),this.value!==e&&(this.$emit("input",e),this.onChange&&this.onChange(e))},toggleOptions:function toggleOptions(){this.showOptions=!this.showOptions}}},o=n(70),a=n(8);var i=Object(a.a)(r,function(){var e,t,n,r=this,o=r.$createElement,a=r._self._c||o;return a("div",{class:r.$style.component},[r.iconButton?a("div",{class:(e={},e[r.$style["mobile-button"]]=r.iconButton,e),on:{click:function(e){return r.toggleOptions()}}},[a("icon-font",{class:r.$style.filter,attrs:{name:r.iconButton}})],1):r._e(),r._v(" "),a("div",{class:[r.$style.select,(t={},t[r.$style["desktop-button"]]=r.iconButton,t)],on:{click:function(e){return r.toggleOptions()}}},[r.value.icon?a("icon-font",{class:r.$style.icon,attrs:{theme:"primary",name:r.value.icon}}):r._e(),r._v(" "),r.value.countryId?a("div",{class:[r.$style.flag,"country-flags-component country-flags-large country-"+r.value.countryId]}):r._e(),r._v(" "),a("span",{class:r.$style.value},[r._v(r._s(r.value[r.labelKey]))]),r._v(" "),a("icon-font",{directives:[{name:"show",rawName:"v-show",value:r.showOptions,expression:"showOptions"}],class:r.$style.chevron,attrs:{name:"chevron-up"}}),r._v(" "),a("icon-font",{directives:[{name:"show",rawName:"v-show",value:!r.showOptions,expression:"!showOptions"}],class:r.$style.chevron,attrs:{name:"chevron-bottom"}})],1),r._v(" "),r.overlay?a("div",{directives:[{name:"show",rawName:"v-show",value:r.showOptions,expression:"showOptions"}],class:r.$style.overlay,on:{click:function(e){return r.toggleOptions()}}}):r._e(),r._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:r.showOptions,expression:"showOptions"}],class:[r.$style.options,(n={},n[r.$style["advanced-options"]]=r.advancedOptionsClass,n)]},r._l(r.options,function(e){var t,n;return e.separator?e.separator?a("span",{class:r.$style.separator}):r._e():a("span",{key:e[r.valueKey],class:[r.$style.option,(t={},t[r.$style.selected]=e===r.value,t)],on:{click:function(t){return r.setSelectedOption(e)}}},[e.icon&&!e.noIconInsideDropdown?a("icon-font",{class:[r.$style.icon,(n={},n[r.$style[e.icon]]=r.colorIcons,n)],attrs:{theme:"primary",name:e.icon}}):r._e(),r._v(" "),e.countryId?a("div",{class:[r.$style.flag,"country-flags-component country-"+e.countryId]}):r._e(),r._v(" "),r.shortTitle?a("span",{class:r.$style["short-title"]},[r._v("\n        "+r._s(e[r.shortTitleKey])+"\n      ")]):r._e(),r._v(" "),a("span",{class:r.$style.label},[r._v("\n        "+r._s(e[r.labelKey])+"\n      ")])],1)}),0)])},[],!1,function injectStyles(e){this.$style=o.default.locals||o.default},null,null);t.a=i.exports},78:function(e,t,n){"use strict";var r=n(27),o=n.n(r),a=n(28),i=n.n(a),s=function(){function ScriptLoader(){o()(this,ScriptLoader),this.insert=this.loadScript(function(e,t){var n=document.createElement("script");return n.type="text/javascript",n.src=e,t&&Object.keys(t).forEach(function(e){n.setAttribute(e,t[e])}),document.body.appendChild(n),n})}return i()(ScriptLoader,[{key:"loadScript",value:function loadScript(e){var t={};return function(n,r){if(void 0===t[n]){var o=new Promise(function(t,o){var a=e(n,r);a.onload=function(e){t(e)},a.onreadystatechange=a.onload,a.onerror=function(e){o(e)}});t[n]=o}return t[n]}}}]),ScriptLoader}();t.a=new s},79:function(e,t,n){"use strict";n.d(t,"a",function(){return r});var r=function concatUrlParams(e){var t=[];return e.forEach(function(e){t.push(e.join("="))}),t}},8:function(e,t,n){"use strict";function normalizeComponent(e,t,n,r,o,a,i,s){var c,l="function"==typeof e?e.options:e;if(t&&(l.render=t,l.staticRenderFns=n,l._compiled=!0),r&&(l.functional=!0),a&&(l._scopeId="data-v-"+a),i?(c=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),o&&o.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(i)},l._ssrRegister=c):o&&(c=s?function(){o.call(this,this.$root.$options.shadowRoot)}:o),c)if(l.functional){l._injectStyles=c;var u=l.render;l.render=function renderWithStyleInjection(e,t){return c.call(t),u(e,t)}}else{var d=l.beforeCreate;l.beforeCreate=d?[].concat(d,c):[c]}return{exports:e,options:l}}n.d(t,"a",function(){return normalizeComponent})},80:function(e,t,n){"use strict";var r=n(54),o=n(39),a=n(10),i=n(44),s=(n(6),n(13),n(0)),c=n(7);Object(c.a)("web_articles_authors"),Object(c.a)("web_article_post"),Object(c.a)("web_article_view",{url:"free-chess-curriculum-for-parents-coaches"}),Object(c.a)("web_article_view",{url:"study-plan-directory"}),Object(c.a)("web_article_index",{unpublished:1}),s.a.trans("Articles"),s.a.trans("Article Authors"),s.a.trans("Authors"),s.a.trans("Create Article"),s.a.trans("Curriculum for Kids"),s.a.trans("Delete Article"),s.a.trans("Are you sure you want to delete this article?"),s.a.trans("Edit Article"),s.a.trans("Headline"),s.a.trans("Lock Comments"),s.a.trans("My Articles"),s.a.trans("RSS"),s.a.trans("Study Plans"),s.a.trans("Translate"),s.a.trans("Unlock Comments"),s.a.trans("Unpublished");n(79),n(81),n(23),Object(c.a)("web_blog_all"),Object(c.a)("web_blog_view",{url:"webmaster/how-to-become-a-top-blogger-for-chesscom"}),Object(c.a)("web_blog_index"),Object(c.a)("web_blog_post",{title:s.a.trans("What got me playing chess")}),Object(c.a)("web_blog_post",{title:s.a.trans("My chess goals are...")}),Object(c.a)("web_blog_post",{title:s.a.trans("My best chess win")}),Object(c.a)("web_blog_settings_edit"),Object(c.a)("web_blog_post"),Object(c.a)("web_blog_authors"),s.a.trans("All Blogs"),s.a.trans("Become a listed Chess.com top blogger!"),s.a.trans("Blogs"),s.a.trans("Start Your Blog"),s.a.trans("This is your personal blog where you can share your chess thoughts. Some ideas to blog about:"),s.a.trans("Blog Settings"),s.a.trans("What got me playing chess"),s.a.trans("My chess goals are..."),s.a.trans("My best chess win"),s.a.trans("Bury Blog"),s.a.trans("<strong>NOTE:</strong> Your Blog has not yet been published. This is only a <strong>preview</strong>."),s.a.trans("Click here"),s.a.trans("Create Post"),s.a.trans("Delete"),s.a.trans("Delete Blog"),s.a.trans("Are you sure you want to delete this blog?"),s.a.trans("Edit"),s.a.trans("Edit Blog"),s.a.trans("Get Listed"),s.a.trans("Headline"),s.a.trans("Most Recent"),s.a.trans("Most Views"),s.a.trans("My Blog"),s.a.trans("for more info."),s.a.trans("No"),s.a.trans("User doesn't have any blog posts"),s.a.trans("Publish"),s.a.trans("Report Spam"),s.a.trans("Top Bloggers"),s.a.trans("Unbury Blog"),s.a.trans("Yes"),n(64);var l=n(51),u=n(43),d=n(18),f=n(47),p={name:"modal-video",components:{IconFont:d.a,ModalContainer:f.a},props:{source:{type:String,required:!0}},mounted:function mounted(){var e=this;l.a.on(r.a.SHOW_VIDEO_MODAL,function(){e.$refs.modal.show()})},methods:{hide:function hide(){this.$refs.modal.hide()}}},m=n(71),h=n(8);var v=Object(h.a)(p,function(){var e=this.$createElement,t=this._self._c||e;return t("modal-container",{ref:"modal"},[t("div",{class:this.$style.box},[t("div",{class:this.$style.video},[t("iframe",{attrs:{allowfullscreen:"",frameborder:"0",height:"100%",width:"100%",src:this.source}}),this._v(" "),t("icon-font",{class:this.$style.close,attrs:{family:"chess",name:"x",theme:"primary"},on:{click:this.hide}})],1)])])},[],!1,function injectStyles(e){this.$style=m.default.locals||m.default},null,null).exports,g=n(24),b=function(e){return new g.default({el:"#".concat(u.b.MODAL_VIDEO),render:function render(t){return t(v,{props:{source:e}})}})};function showFooterOnLoad(){window.addEventListener("load",function(){Object(o.b)("".concat(a.c.NAVIGATION_FOOTER),"navigation-footer-hide"),Object(i.e)("layout-one-column-component")&&Object(o.a)("".concat(a.c.NAVIGATION_FOOTER),"navigation-footer-component-one-column"),Object(i.e)("layout-two-column-flipped-component")&&Object(o.a)("".concat(a.c.NAVIGATION_FOOTER),"navigation-footer-component-flipped-column")})}function showVideoModalOnClick(e){if(null!==e){var t=null;e.addEventListener("click",function(){var n=e.getAttribute("data-src");t||(t=t||b(n)),l.a.emit(r.a.SHOW_VIDEO_MODAL)})}}n.d(t,"b",function(){return showFooterOnLoad}),n.d(t,"c",function(){return showVideoModalOnClick}),n.d(t,"a",function(){return _});var _=function onEditBtnClick(e,t){e.preventDefault(),t.classList.add(a.c.POST_CAN_EDIT_URL)}},81:function(e,t,n){"use strict";n.d(t,"a",function(){return r});var r=function getAllUrlParams(e){var t=[];return e.substring(1).split("&").forEach(function(e){t.push(e.split("="))}),t}},88:function(e,t,n){e.exports=n(19)(87)},9:function(e,t,n){"use strict";n.d(t,"b",function(){return s}),n.d(t,"c",function(){return c}),n.d(t,"a",function(){return l});var r=n(36),o=n.n(r);o.a.placeHolderPrefix="",o.a.placeHolderSuffix="";var a=function escapeParameters(e){var t={};return null!=e&&Object.keys(e).forEach(function(n){var r=function escapeRegExp(e){return e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}(n);null!=r&&r.length>0&&(t[r]=e[n])}),t},i=function getTranslatedPhrase(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"messages",n=arguments.length>2?arguments[2]:void 0;return window.chesscom_translations&&window.chesscom_translations[t]&&window.chesscom_translations[t][e]?window.chesscom_translations[t][e]:window.chesscom_live_translations&&window.chesscom_live_translations[t]&&window.chesscom_live_translations[t][e]?window.chesscom_live_translations[t][e]:"live"===t&&window.i18n_phrases&&window.i18n_phrases[e]?window.i18n_phrases:"countries"===t&&window.Country&&window.Country[e]?window.Country:n?void 0:"javascript"!==t?getTranslatedPhrase(e,"javascript"):e},s=function trans(e,t,n){return o.a.trans(i(e,n),a(t),n)},c=function transChoice(e,t,n,r){return void 0===t?"":o.a.transChoice(i(e,r),t,a(n))},l={trans:s,transChoice:c}},91:function(e,t,n){e.exports=n(19)(45)},92:function(e,t,n){e.exports={upgrade:"placeholder-ad-upgrade",link:"placeholder-ad-link"}},93:function(e,t,n){e.exports={container:"short-sidebar-ad-container",component:"short-sidebar-ad-component",iframe:"short-sidebar-ad-iframe",bottom:"short-sidebar-ad-bottom",sticky:"short-sidebar-ad-sticky"}},94:function(e,t,n){"use strict";var r=n(55),o=document.querySelector(".base-container"),a=0,i={name:"short-sidebar-ad",components:r.b,props:r.d,computed:{adId:function adId(){return"sidebar_short_".concat(this.position)},enable:function enable(){return!Object(r.c)(this.adId)},shouldBeSticky:function shouldBeSticky(){return this.enable&&"bottom"===this.position}},mounted:function mounted(){this.shouldBeSticky&&(a=this.$refs[this.adId].offsetTop+this.$refs[this.adId].offsetHeight,o.addEventListener("scroll",this.onScroll))},beforeDestroy:function beforeDestroy(){this.shouldBeSticky&&o.removeEventListener("scroll",this.onScroll)},methods:{onScroll:function onScroll(){this.$refs[this.adId]&&(o.scrollTop>a?this.$refs[this.adId].classList.add(this.$style.sticky):this.$refs[this.adId].classList.remove(this.$style.sticky))}}},s=n(112),c=n(8);var l=Object(c.a)(i,function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.enable?n("div",{ref:e.adId,class:[e.$style.component,e.$style[e.position]]},[n("iframe-ad",{class:e.$style.iframe,attrs:{"go-premium-link":e.goPremiumLink,provider:e.provider,"slot-id":e.slotId,sticky:e.shouldBeSticky}}),e._v(" "),n("placeholder-ad",{attrs:{"go-premium-link":e.goPremiumLink}})],1):e._e()},[],!1,function injectStyles(e){this.$style=s.default.locals||s.default},null,null);t.a=l.exports},95:function(e,t,n){e.exports=n(19)(84)},96:function(e,t,n){"use strict";var r=n(55),o={name:"iframe-ad",props:{provider:{type:String,default:"tms"},slotId:{type:String,required:!0},sticky:{type:Boolean,default:!1}},computed:{adCssClass:function adCssClass(){var e="";return"tms"===this.provider&&(e=this.sticky?"tmsads tmsads-sticky":"tmsads"),e}},mounted:function mounted(){r.a.registerAdSlot(this.provider,this.slotId)}},a=n(8),i=Object(a.a)(o,function(){var e=this.$createElement;return(this._self._c||e)("div",{class:this.adCssClass,attrs:{id:this.slotId}})},[],!1,null,null,null);t.a=i.exports}});